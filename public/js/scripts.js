"use strict";$(function(){var e=$(".wrapper"),a=$("body"),t=$(".header-bottom .wrapper-inner"),s=$(".header-nav"),i=$(".header-burger"),n=$(".header .contacts"),o=$(".header .address-hours"),l=$(".header-search"),c=$(".header-cart"),r=$(".footer-subscribe"),d=$(".footer-copyrights"),h=$(".footer-social"),u=$(".chooser"),f=$(".chooser.chooser-color"),m=$(".color-list li"),v=$(".btn-catalog"),p=$(".btn-category"),g=$(".categories");function b(){$(".header-catalog-menu-item.active .header-catalog-submenu .first-item").detach(),$(".header-catalog-menu-item.active .header-catalog-submenu").fadeOut(300),$(".header-catalog-menu-item.active").removeClass("active")}function w(e){var t=$(".header-catalog > .header-catalog-submenu.desktop-active");$(e).removeClass("hovered"),$(e).removeClass("with-submenu"),t.removeClass("desktop-active"),t.appendTo($(e)),t.css("top","auto")}function C(){$(window).width()<768?(l.insertBefore(c),n.appendTo(s),o.appendTo(s),g.insertAfter(p),r.insertAfter(d)):($(window).width()<1200?(l.insertBefore(c),n.appendTo(t),o.appendTo(s),g.insertAfter(p)):(l.removeClass("active"),$(".header").removeClass("menu-opened"),l.appendTo(t),n.appendTo(t),o.appendTo(t),g.appendTo($(".wrapper-sidebar ")),b()),r.insertBefore(h))}setTimeout(function(){e.animate({opacity:1},500)},500),C(),m.each(function(){$(this).attr("data-background",$(this).css("background-color"))}),$(window).on("resize",function(){C()}),$("[data-removable-close]").on("click",function(){$(this).parents("[data-removable]").fadeOut(400,function(){$(this).detach()})}),$('.header-search button[type="submit"]').on("click",function(e){e.preventDefault();var t=$(this).parents(".header-search");$(window).width()<1200?t.hasClass("active")?t.submit():t.addClass("active"):t.submit()}),$(".field-rate-list i").on("click",function(){var s=$(this).index()+1;$(this).parents(".field-rate").find('input[type="hidden"]').val(s),$(this).parents(".field-rate-list").find("i").each(function(e,t){s<=e?$(t).removeClass("fa-red").addClass("fa-grey"):$(t).removeClass("fa-grey").addClass("fa-red")})}),$('.field-file input[type="file"]').on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$('input[type="tel"]').mask("+7 (999) 999-999-99"),i.on("click",function(){$(this).parents(".header").toggleClass("menu-opened")}),$("[data-call-modal]").on("click",function(){var e=$(this).attr("data-call-modal"),t=$(window).scrollTop(),s=$('[data-modal="'.concat(e,'"]'));a.addClass("modal-opened"),s.fadeIn(300).css({display:"flex",top:"".concat(t,"px")}),$(document).on("touchmove",function(e){e.preventDefault()})}),$(".modal").on("click",function(e){var t=$(e.target);!t.hasClass("modal-close")&&t.closest(".modal-inner").length||($(this).fadeOut(300),a.removeClass("modal-opened"),$(document).off("touchmove"))}),$("[data-select-control]").on("click",function(){$(this).parents("[data-select]").hasClass("active")?$(this).parents("[data-select]").removeClass("active"):($("[data-select]").removeClass("active"),$(this).parents("[data-select]").addClass("active"))}),$("[data-select] ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).addClass("active"),$(this).siblings(".active").removeClass("active"),$(this).parents("ul").siblings("[data-select-control]").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents("[data-select]").removeClass("active")}}),$(".amount-chooser-control").on("click",function(){var e=$(this).siblings("input"),t=parseInt(e.val());$(this).hasClass("amount-chooser-minus")?1<t&&e.val(t-1):$(this).hasClass("amount-chooser-plus")&&e.val(t+1),e.trigger("change")}),$(".amount-chooser input").on("change",function(){var e=$(this).parents(".amount-chooser").siblings(".card-cost").children(".card-cost-value"),t=parseInt($(this).val()),s=parseInt($(this).parents(".amount-chooser").attr("data-cost"));e.text(t*s+" руб.")}),$(".categories-handle").on("click",function(){$(this).parents(".categories").toggleClass("dropped-down")}),m.on("click",function(){$(this).hasClass("active")||($(this).addClass("active"),$(this).siblings().removeClass("active"))}),u.find(".chooser-value").on("click",function(){if($(this).closest(".catalog-brands").length&&767<$(window).width()||$(this).closest(".chooser-color").length&&767<$(window).width())return console.log("hello"),!1;$(this).parents(".chooser").hasClass("active")?$(this).parents(".chooser").removeClass("active"):(u.removeClass("active"),$(this).parents(".chooser").addClass("active"))}),u.find("ul li").on("click",function(){if(!$(this).hasClass("active")&&0===$(this).closest(".catalog-brands").length){var e=$(this).html();$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).parents(".chooser").removeClass("active"),$(this).closest(".chooser-color").length?($(window).width()<768&&$(this).parents("ul").siblings(".chooser-value").html(e),$(this).parents("ul").siblings("input").val($(this).find(".chooser-color-text").text())):($(this).parents("ul").siblings(".chooser-value").html(e),$(this).parents("ul").siblings("input").val(e))}}),f.find("ul li").on("click",function(e){if(e.preventDefault(),!$(this).hasClass("active")){var t=$(this).find(".chooser-color-text").text();$(this).parents("ul").siblings("input").val(t)}}),$(document).on("click",function(e){var t=$(e.target);0===t.closest("[data-select]").length&&$(".active[data-select]").removeClass("active"),0===t.closest(".header-search").length&&$(".header-search").removeClass("active"),0===t.closest(".chooser").length&&u.removeClass("active"),1199<$(window).width()&&0===t.closest(".header-catalog").length&&0===t.closest(".btn-catalog").length&&(v.removeClass("active"),$(".header-catalog").fadeOut(300),$(".header-catalog-menu-item.active .header-catalog-submenu .first-item").detach(),$(".header-catalog-menu-item.active .header-catalog-submenu").fadeOut(300),$(".header-catalog-menu-item.active").removeClass("active"))}),v.on("click",function(){$(this).toggleClass("active"),$(".header-catalog").fadeToggle(300),b($(this))}),p.on("click",function(){$(window).width()<1200&&($(this).toggleClass("active"),$(".categories").fadeToggle(300),$(".categories .categories-submenu .first-item").detach(),$(".categories ul li.active .categories-submenu").fadeOut(300),$(".categories ul li.active").removeClass("active"))}),$(".header-catalog-menu-handle").on("click",function(){$(window).width()<1200&&function(e){$(e).parents(".header-catalog-menu-item").addClass("active"),$('<li class="header-catalog-submenu-item first-item"><i class="fa fa-angle-left"></i>Вернуться назад</li>').prependTo($(e).siblings(".header-catalog-submenu")),$(e).siblings(".header-catalog-submenu").fadeIn(300)}($(this))}),$(".categories-menu-handle").on("click",function(){$(window).width()<1200&&($(this).parents(".categories ul li").addClass("active"),$('<li class="categories-submenu-item first-item"><i class="fa fa-angle-left"></i>Вернуться назад</li>').prependTo($(this).siblings(".categories-submenu")),$(this).siblings(".categories-submenu").fadeIn(300))}),$(".header-catalog").on("click",".header-catalog-submenu-item.first-item",function(){$(window).width()<1200&&($(this).parents(".header-catalog-menu-item").removeClass("active"),$(this).parents(".header-catalog-submenu").fadeOut(300),$(this).detach())}),$(".header-catalog-menu-item").hover(function(){if(1199<$(window).width()){$(this).addClass("hovered");var e=$(this).find(".header-catalog-submenu");e.length&&!$(".header-catalog > .header-catalog-submenu.desktop-active").length&&(e.appendTo($(".header-catalog")),$(this).addClass("with-submenu"),e.addClass("desktop-active"),e.css("top",$(this).position().top+"px"),console.log($(this).position().top,e.css("top")))}},function(){1199<$(window).width()&&($(this).hasClass("with-submenu")?$(".header-catalog > .header-catalog-submenu.desktop-active").is(":hover")||w($(this)):$(this).removeClass("hovered"))}),$(".header-catalog-submenu").hover(function(){},function(){var e=$(".header-catalog-menu-item.hovered.with-submenu");e.is(":hover")||w(e)}),g.on("click",".categories-submenu li.first-item",function(){$(window).width()<1200&&($(this).parents(".categories-submenu li").removeClass("active"),$(this).parents(".categories-submenu").fadeOut(300),$(this).detach())}),$(".field-file input").on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$(".field-rate input").on("change",function(){if($(this).is(":checked")){var a=parseInt($(this).val());$(this).parent().find("input[type=radio]").each(function(e,t){var s=$(t).next("label").find("i");e<a?s.removeClass("fa-star-o").addClass("fa-star"):s.removeClass("fa-star").addClass("fa-star-o")})}})}),$(function(){var e=$("body"),t=$(".catalog-filter"),s=$(".catalog-articles"),a=$(".catalog-banner"),i=$(".breadcrumbs"),n=$(".catalog-aside"),o=document.getElementById("filter-cost"),l=[document.getElementById("filter-cost-from"),document.getElementById("filter-cost-to")];function c(){$(window).width()<1200?function(){i.prependTo($(".header").next(".wrapper-inner")),0===t.find(".modal-close").length&&$('<div class="modal-close"></div>').prependTo(t);t.appendTo('.modal[data-modal="filter"]'),s.insertAfter(".pagination"),a.insertAfter(s)}():function(){i.prependTo($(".catalog-content")),e.removeClass("modal-opened"),$('.modal[data-modal="filter"]').css({display:"none",top:"auto"}),t.find(".modal-close").length&&$(t.find(".modal-close")).detach();t.prependTo(n),s.appendTo(n),a.appendTo(n)}()}c(),$(".chooser-color li").each(function(){$(this).attr("data-background",$(this).find("span").eq(0).css("background-color"))}),o&&(noUiSlider.create(o,{start:[1e3,5e3],step:100,margin:1e3,connect:!0,range:{min:0,max:8e3}}),l.forEach(function(e,t){e.addEventListener("change",function(){o.noUiSlider.setHandle(t,l[t].value)})}),o.noUiSlider.on("update",function(e,t){l[t].value=Math.trunc(e[t])})),$(window).on("resize",function(){c()})}),$(function(){var e=$(".hero");e.length&&e.slick({dots:!0,arrows:!1,fade:!0,autoplay:!0,autoplaySpeed:5e3})}),$(function(){var e=$(".item-image-large"),t=$(".item-image-small"),s=$(".item-params"),a=$(".chooser.chooser-color ul"),i=$(".item .item-list"),n=$(".item-image"),o=$(".item-form-header"),l=$(".item-delivery"),c=$(".item-form");function r(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")}):$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick({slidesToShow:3,infinite:!1})})}function d(){$(window).width()<768?(i.insertAfter(o),l.insertAfter(c)):$(window).width()<1200?(i.appendTo(n),l.insertAfter(c)):(i.appendTo(n),l.appendTo(c))}d(),r(a),s.length&&s.slick({slidesToShow:3,responsive:[{breakpoint:1200,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:2}}]}),e.length&&t.length&&(e.slick({arrows:!1,fade:!0,asNavFor:".item-image-small"}),t.slick({slidesToShow:4,focusOnSelect:!0,asNavFor:".item-image-large",responsive:[{breakpoint:1200,settings:{slidesToShow:2}}]})),$(window).on("resize",function(){r(a),d()}),$(".item-tab-header li").on("click",function(){if($(this).hasClass("active"))$(window).width()<768&&$(this).parents(".item-tab-header").toggleClass("active");else{var e=$(this).attr("data-tab");$(".item-tab-content > li").fadeOut(0),$(".item-tab-content").find('li[data-tab="'+e+'"]').fadeIn(),$(this).siblings().removeClass("active"),$(this).addClass("active"),$(window).width()<768&&$(this).parents(".item-tab-header").removeClass("active")}}),$(".item-list-all").on("click",function(){$("html, body").animate({scrollTop:$(".item-tab-content").offset().top-120},400,function(){$('.item-tab-header li[data-tab="params"]').addClass("active").siblings().removeClass("active"),$('.item-tab-content li[data-tab="params"]').fadeIn().siblings().fadeOut(0)})})}),$(function(){var e=$(".advantages ul, .reviews-rate");function t(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick()}):$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")})}t(e),$(window).on("resize",function(){t(e)})}),$(function(){$(".reviews-result-percent").each(function(){var e=parseInt($(this).attr("data-result-percent")),t=$(this).find(".reviews-result-percent-value");$('<div class="reviews-result-percent-color"></div>').appendTo(t).css("width",e+"%")}),$(".reviews-list .reviews-card p .show-all").on("click",function(){$(this).siblings(".all-text").css("display","inline"),$(this).siblings(".dots").css("display","none"),$(this).css("display","none")})}),$(function(){var e=$(".certificates-list, .product-list, .articles-list, .reviews-slider");e.length&&(e.each(function(){$(this).hasClass("product-list")||$(this).hasClass("certificates-list")?$(this).slick({slidesToShow:4,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3,infinite:!1}},{breakpoint:930,settings:{slidesToShow:2,infinite:!1}},{breakpoint:768,settings:{infinite:!0,slidesToShow:1}}]}):$(this).slick({slidesToShow:2,vertical:!1,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,infinite:!1,vertical:!0}},{breakpoint:768,settings:{slidesToShow:1,infinite:!0,vertical:!1}}]}),$(this).find(".slick-prev").addClass("disabled")}),e.on("beforeChange",function(e,t,s,a){!function(e,t){var s=$(e).find(".slick-prev"),a=$(e).find(".slick-next"),i=$(e).find(".slick-slide").length,n=$(e).find(".slick-slide.slick-active").length,o=n+1===i;0===t?(s.addClass("disabled"),a.removeClass("disabled")):s.removeClass("disabled");o?i<=t+n?(a.addClass("disabled"),s.removeClass("disabled")):a.removeClass("disabled"):i-1<t+n?(a.addClass("disabled"),s.removeClass("disabled")):a.removeClass("disabled")}($(this),a)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjYXRhbG9nLmpzIiwiaGVyby5qcyIsIml0ZW0uanMiLCJtb2JpbGVTbGlkZXIuanMiLCJyZXZpZXdzLmpzIiwic2xpZGVycy5qcyJdLCJuYW1lcyI6WyIkIiwid3JhcHBlciIsImJvZHkiLCJoZWFkZXJCb3R0b20iLCJoZWFkZXJOYXYiLCJidXJnZXIiLCJoZWFkZXJDb250YWN0cyIsImhlYWRlckFkZHJlc3MiLCJoZWFkZXJTZWFyY2giLCJoZWFkZXJDYXJ0IiwiZm9vdGVyU3Vic2NyaWJlIiwiZm9vdGVyQ29weXJpZ2h0cyIsImZvb3RlclNvY2lhbCIsImNob29zZXIiLCJjaG9vc2VyQ29sb3IiLCJjb2xvckl0ZW0iLCJidG5DYXRhbG9nIiwiYnRuQ2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiYnRuQ2F0YWxvZ0NsaWNrZWQiLCJkZXRhY2giLCJmYWRlT3V0IiwicmVtb3ZlQ2xhc3MiLCJtZW51SXRlbVVuaG92ZXJlZCIsIm1lbnVJdGVtIiwic3VibWVudSIsImFwcGVuZFRvIiwiY3NzIiwicGFnZVJlcGFpbnQiLCJ3aW5kb3ciLCJ3aWR0aCIsImluc2VydEJlZm9yZSIsImluc2VydEFmdGVyIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJvcGFjaXR5IiwiZWFjaCIsInRoaXMiLCJhdHRyIiwib24iLCJwYXJlbnRzIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm0iLCJoYXNDbGFzcyIsInN1Ym1pdCIsImFkZENsYXNzIiwidmFsdWUiLCJpbmRleCIsImZpbmQiLCJ2YWwiLCJlbGVtZW50IiwidmFsQXJyYXkiLCJzcGxpdCIsInNpYmxpbmdzIiwidGV4dCIsImxlbmd0aCIsIm1hc2siLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsInNjcm9sbFZhbHVlIiwic2Nyb2xsVG9wIiwibW9kYWwiLCJjb25jYXQiLCJmYWRlSW4iLCJkaXNwbGF5IiwidG9wIiwiZG9jdW1lbnQiLCJjbG9zZXN0Iiwib2ZmIiwiYW1vdW50RE9NIiwiYW1vdW50VmFsdWUiLCJwYXJzZUludCIsInRyaWdnZXIiLCJjb3N0RE9NIiwiY2hpbGRyZW4iLCJhbW91bnQiLCJpdGVtQ29zdCIsImNvbnNvbGUiLCJsb2ciLCJodG1sIiwiZmFkZVRvZ2dsZSIsImhhbmRsZSIsInByZXBlbmRUbyIsImNhdGFsb2dNZW51SGFuZGxlQ2xpY2tlZCIsImhvdmVyIiwicG9zaXRpb24iLCJpcyIsInBhcmVudE1lbnVJdGVtIiwicGFyZW50IiwiaXRlbSIsInN0YXIiLCJuZXh0IiwiY2F0YWxvZ0ZpbHRlciIsImNhdGFsb2dBcnRpY2xlcyIsImNhdGFsb2dCYW5uZXIiLCJicmVhZGNydW1icyIsImNhdGFsb2dBc2lkZSIsImZpbHRlckNvc3QiLCJnZXRFbGVtZW50QnlJZCIsImZpbHRlckNvc3RIYW5kbGVzIiwiY2F0YWxvZ1JlcGFpbnQiLCJyZW5kZXJNb2JpbGVDYXRhbG9nIiwicmVuZGVyRGVza3RvcENhdGFsb2ciLCJlcSIsIm5vVWlTbGlkZXIiLCJjcmVhdGUiLCJzdGFydCIsInN0ZXAiLCJtYXJnaW4iLCJjb25uZWN0IiwicmFuZ2UiLCJtaW4iLCJtYXgiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEhhbmRsZSIsInZhbHVlcyIsIk1hdGgiLCJ0cnVuYyIsImhlcm8iLCJzbGljayIsImRvdHMiLCJhcnJvd3MiLCJmYWRlIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwiaXRlbVNsaWRlckxhcmdlIiwiaXRlbVNsaWRlclNtYWxsIiwicGFyYW1zIiwiY29sb3JTbGlkZXIiLCJpdGVtTGlzdCIsIml0ZW1JbWFnZSIsIml0ZW1Gb3JtSGVhZGVyIiwiaXRlbURlbGl2ZXJ5IiwiaXRlbUZvcm0iLCJyZXBhaW50Q29sb3JTbGlkZXIiLCJzbGlkZXNUb1Nob3ciLCJpbmZpbml0ZSIsIml0ZW1SZXBhaW50IiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsImFzTmF2Rm9yIiwiZm9jdXNPblNlbGVjdCIsImN1cnJlbnQiLCJvZmZzZXQiLCJtb2JpbGVTbGlkZXIiLCJyZXBhaW50TW9iaWxlU2xpZGVyIiwidmFsdWVET00iLCJzbGlkZXJzIiwidmVydGljYWwiLCJjdXJyZW50U2xpZGUiLCJuZXh0U2xpZGUiLCJzbGlkZXIiLCJwcmV2Iiwic2l6ZSIsInZpc2libGUiLCJzbWFsbEFtb3VudCIsInNldFNsaWRlckFycm93cyJdLCJtYXBwaW5ncyI6ImFBQUFBLEVBQUUsV0FFQSxJQUFNQyxFQUFVRCxFQUFFLFlBQ1pFLEVBQU9GLEVBQUUsUUFDVEcsRUFBZUgsRUFBRSxpQ0FDakJJLEVBQVlKLEVBQUUsZUFDZEssRUFBU0wsRUFBRSxrQkFDWE0sRUFBaUJOLEVBQUUscUJBQ25CTyxFQUFnQlAsRUFBRSwwQkFDbEJRLEVBQWVSLEVBQUUsa0JBQ2pCUyxFQUFhVCxFQUFFLGdCQUNmVSxFQUFrQlYsRUFBRSxxQkFDcEJXLEVBQW1CWCxFQUFFLHNCQUNyQlksRUFBZVosRUFBRSxrQkFDakJhLEVBQVViLEVBQUUsWUFDWmMsRUFBZWQsRUFBRSwwQkFDakJlLEVBQVlmLEVBQUUsa0JBQ2RnQixFQUFhaEIsRUFBRSxnQkFDZmlCLEVBQWNqQixFQUFFLGlCQUNoQmtCLEVBQWFsQixFQUFFLGVBcVNyQixTQUFTbUIsSUFDUG5CLEVBQUUsd0VBQXdFb0IsU0FDMUVwQixFQUFFLDREQUE0RHFCLFFBQVEsS0FDdEVyQixFQUFFLG9DQUFvQ3NCLFlBQVksVUFVcEQsU0FBU0MsRUFBbUJDLEdBQzFCLElBQU1DLEVBQVV6QixFQUFFLDREQUNsQkEsRUFBRXdCLEdBQVVGLFlBQVksV0FDeEJ0QixFQUFFd0IsR0FBVUYsWUFBWSxnQkFDeEJHLEVBQVFILFlBQVksa0JBQ3BCRyxFQUFRQyxTQUFTMUIsRUFBRXdCLElBQ25CQyxFQUFRRSxJQUFJLE1BQU8sUUFHckIsU0FBU0MsSUFDSDVCLEVBQUU2QixRQUFRQyxRQUFVLEtBZXhCdEIsRUFBYXVCLGFBQWF0QixHQUMxQkgsRUFBZW9CLFNBQVN0QixHQUN4QkcsRUFBY21CLFNBQVN0QixHQUN2QmMsRUFBV2MsWUFBWWYsR0Ft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QUFLOUMsU0FBUyxZQUNkNkcsRUFBS3JJLFlBQVksYUFFakJzRSxFQUFLdEUsWUFBWSxZQTdCbkJ5SSxDQUFnQi9KLEVBQUVxQyxNQUFPb0giLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCB3cmFwcGVyID0gJCgnLndyYXBwZXInKTtcclxuICBjb25zdCBib2R5ID0gJCgnYm9keScpO1xyXG4gIGNvbnN0IGhlYWRlckJvdHRvbSA9ICQoJy5oZWFkZXItYm90dG9tIC53cmFwcGVyLWlubmVyJyk7XHJcbiAgY29uc3QgaGVhZGVyTmF2ID0gJCgnLmhlYWRlci1uYXYnKTtcclxuICBjb25zdCBidXJnZXIgPSAkKCcuaGVhZGVyLWJ1cmdlcicpO1xyXG4gIGNvbnN0IGhlYWRlckNvbnRhY3RzID0gJCgnLmhlYWRlciAuY29udGFjdHMnKTtcclxuICBjb25zdCBoZWFkZXJBZGRyZXNzID0gJCgnLmhlYWRlciAuYWRkcmVzcy1ob3VycycpO1xyXG4gIGNvbnN0IGhlYWRlclNlYXJjaCA9ICQoJy5oZWFkZXItc2VhcmNoJyk7XHJcbiAgY29uc3QgaGVhZGVyQ2FydCA9ICQoJy5oZWFkZXItY2FydCcpO1xyXG4gIGNvbnN0IGZvb3RlclN1YnNjcmliZSA9ICQoJy5mb290ZXItc3Vic2NyaWJlJyk7XHJcbiAgY29uc3QgZm9vdGVyQ29weXJpZ2h0cyA9ICQoJy5mb290ZXItY29weXJpZ2h0cycpO1xyXG4gIGNvbnN0IGZvb3RlclNvY2lhbCA9ICQoJy5mb290ZXItc29jaWFsJyk7XHJcbiAgY29uc3QgY2hvb3NlciA9ICQoJy5jaG9vc2VyJyk7XHJcbiAgY29uc3QgY2hvb3NlckNvbG9yID0gJCgnLmNob29zZXIuY2hvb3Nlci1jb2xvcicpO1xyXG4gIGNvbnN0IGNvbG9ySXRlbSA9ICQoJy5jb2xvci1saXN0IGxpJyk7XHJcbiAgY29uc3QgYnRuQ2F0YWxvZyA9ICQoJy5idG4tY2F0YWxvZycpO1xyXG4gIGNvbnN0IGJ0bkNhdGVnb3J5ID0gJCgnLmJ0bi1jYXRlZ29yeScpO1xyXG4gIGNvbnN0IGNhdGVnb3JpZXMgPSAkKCcuY2F0ZWdvcmllcycpO1xyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgIHdyYXBwZXIuYW5pbWF0ZSh7b3BhY2l0eTogMX0sIDUwMCk7XHJcbiAgfSwgNTAwKTtcclxuXHJcbiAgcGFnZVJlcGFpbnQoKTtcclxuXHJcbiAgc2V0Q29sb3JzKCk7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcGFnZVJlcGFpbnQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnW2RhdGEtcmVtb3ZhYmxlLWNsb3NlXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucGFyZW50cygnW2RhdGEtcmVtb3ZhYmxlXScpXHJcbiAgICAgIC5mYWRlT3V0KDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZGV0YWNoKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuaGVhZGVyLXNlYXJjaCBidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGZvcm0gPSAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItc2VhcmNoJyk7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIGlmIChmb3JtLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGZvcm0uc3VibWl0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9ybS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcm0uc3VibWl0KCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5maWVsZC1yYXRlLWxpc3QgaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS5pbmRleCgpICsgMTtcclxuICAgICQodGhpcykucGFyZW50cygnLmZpZWxkLXJhdGUnKS5maW5kKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJykudmFsKHZhbHVlKTtcclxuICAgICQodGhpcykucGFyZW50cygnLmZpZWxkLXJhdGUtbGlzdCcpLmZpbmQoJ2knKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICBpZiAoaW5kZXggPj0gdmFsdWUpIHtcclxuICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmYS1yZWQnKS5hZGRDbGFzcygnZmEtZ3JleScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2ZhLWdyZXknKS5hZGRDbGFzcygnZmEtcmVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuZmllbGQtZmlsZSBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2YWxBcnJheSA9ICQodGhpcykudmFsKCkuc3BsaXQoJ1xcXFwnKTtcclxuICAgICQodGhpcykuc2libGluZ3MoJy5maWVsZC1maWxlLXRleHQnKS50ZXh0KHZhbEFycmF5W3ZhbEFycmF5Lmxlbmd0aCAtIDFdKTtcclxuICB9KTtcclxuXHJcbiAgJCgnaW5wdXRbdHlwZT1cInRlbFwiXScpLm1hc2soXCIrNyAoOTk5KSA5OTktOTk5LTk5XCIpO1xyXG5cclxuICBidXJnZXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyJykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbmVkJyk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLWNhbGwtbW9kYWxdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdkYXRhLWNhbGwtbW9kYWwnKTtcclxuICAgIGNvbnN0IHNjcm9sbFZhbHVlID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgY29uc3QgbW9kYWwgPSAkKGBbZGF0YS1tb2RhbD1cIiR7dGFyZ2V0fVwiXWApO1xyXG4gICAgYm9keS5hZGRDbGFzcygnbW9kYWwtb3BlbmVkJyk7XHJcbiAgICBtb2RhbC5mYWRlSW4oMzAwKS5jc3Moe1xyXG4gICAgICAnZGlzcGxheSc6ICdmbGV4JyxcclxuICAgICAgJ3RvcCc6IGAke3Njcm9sbFZhbHVlfXB4YFxyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgJCgnLm1vZGFsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICBpZiAodGFyZ2V0Lmhhc0NsYXNzKCdtb2RhbC1jbG9zZScpIHx8ICF0YXJnZXQuY2xvc2VzdCgnLm1vZGFsLWlubmVyJykubGVuZ3RoKSB7XHJcbiAgICAgICQodGhpcykuZmFkZU91dCgzMDApO1xyXG4gICAgICBib2R5LnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuZWQnKTtcclxuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnW2RhdGEtc2VsZWN0LWNvbnRyb2xdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykucGFyZW50cygnW2RhdGEtc2VsZWN0XScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLXNlbGVjdF0gdWwgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJ1tkYXRhLXNlbGVjdC1jb250cm9sXScpLnRleHQodmFsdWUpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJ2lucHV0JykudmFsKHZhbHVlKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuYW1vdW50LWNob29zZXItY29udHJvbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGFtb3VudERPTSA9ICQodGhpcykuc2libGluZ3MoJ2lucHV0Jyk7XHJcbiAgICBjb25zdCBhbW91bnRWYWx1ZSA9IHBhcnNlSW50KGFtb3VudERPTS52YWwoKSk7XHJcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYW1vdW50LWNob29zZXItbWludXMnKSkge1xyXG4gICAgICBpZiAoYW1vdW50VmFsdWUgPiAxKSB7XHJcbiAgICAgICAgYW1vdW50RE9NLnZhbChhbW91bnRWYWx1ZSAtIDEpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Ftb3VudC1jaG9vc2VyLXBsdXMnKSkge1xyXG4gICAgICBhbW91bnRET00udmFsKGFtb3VudFZhbHVlICsgMSk7XHJcbiAgICB9XHJcbiAgICBhbW91bnRET00udHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5hbW91bnQtY2hvb3NlciBpbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjb3N0RE9NID0gJCh0aGlzKS5wYXJlbnRzKCcuYW1vdW50LWNob29zZXInKS5zaWJsaW5ncygnLmNhcmQtY29zdCcpLmNoaWxkcmVuKCcuY2FyZC1jb3N0LXZhbHVlJyk7XHJcbiAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgIGNvbnN0IGl0ZW1Db3N0ID0gcGFyc2VJbnQoJCh0aGlzKS5wYXJlbnRzKCcuYW1vdW50LWNob29zZXInKS5hdHRyKCdkYXRhLWNvc3QnKSk7XHJcbiAgICBjb3N0RE9NLnRleHQoYW1vdW50ICogaXRlbUNvc3QgKyAnINGA0YPQsS4nKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmNhdGVnb3JpZXMtaGFuZGxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuY2F0ZWdvcmllcycpLnRvZ2dsZUNsYXNzKCdkcm9wcGVkLWRvd24nKTtcclxuICB9KTtcclxuXHJcbiAgY29sb3JJdGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNob29zZXIuZmluZCgnLmNob29zZXItdmFsdWUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuY2F0YWxvZy1icmFuZHMnKS5sZW5ndGggJiYgJCh3aW5kb3cpLndpZHRoKCkgPiA3NjdcclxuICAgICAgfHwgJCh0aGlzKS5jbG9zZXN0KCcuY2hvb3Nlci1jb2xvcicpLmxlbmd0aCAmJiAkKHdpbmRvdykud2lkdGgoKSA+IDc2Nykge1xyXG4gICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKCQodGhpcykucGFyZW50cygnLmNob29zZXInKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5jaG9vc2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNob29zZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY2hvb3Nlci5maW5kKCd1bCBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgJCh0aGlzKS5jbG9zZXN0KCcuY2F0YWxvZy1icmFuZHMnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLmh0bWwoKTtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5jaG9vc2VyLWNvbG9yJykubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJy5jaG9vc2VyLXZhbHVlJykuaHRtbCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoJCh0aGlzKS5maW5kKCcuY2hvb3Nlci1jb2xvci10ZXh0JykudGV4dCgpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJy5jaG9vc2VyLXZhbHVlJykuaHRtbCh2YWx1ZSk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY2hvb3NlckNvbG9yLmZpbmQoJ3VsIGxpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykuZmluZCgnLmNob29zZXItY29sb3ItdGV4dCcpLnRleHQoKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCdbZGF0YS1zZWxlY3RdJykubGVuZ3RoID09PSAwKSAkKCcuYWN0aXZlW2RhdGEtc2VsZWN0XScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmhlYWRlci1zZWFyY2gnKS5sZW5ndGggPT09IDApICQoJy5oZWFkZXItc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuY2hvb3NlcicpLmxlbmd0aCA9PT0gMCkgY2hvb3Nlci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5KSB7XHJcbiAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmhlYWRlci1jYXRhbG9nJykubGVuZ3RoID09PSAwICYmIHRhcmdldC5jbG9zZXN0KCcuYnRuLWNhdGFsb2cnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBidG5DYXRhbG9nLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKCcuaGVhZGVyLWNhdGFsb2cnKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1jYXRhbG9nLW1lbnUtaXRlbS5hY3RpdmUgLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUgLmZpcnN0LWl0ZW0nKS5kZXRhY2goKTtcclxuICAgICAgICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtLmFjdGl2ZSAuaGVhZGVyLWNhdGFsb2ctc3VibWVudScpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBidG5DYXRhbG9nLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJCgnLmhlYWRlci1jYXRhbG9nJykuZmFkZVRvZ2dsZSgzMDApO1xyXG4gICAgYnRuQ2F0YWxvZ0NsaWNrZWQoJCh0aGlzKSk7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkNhdGVnb3J5Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5jYXRlZ29yaWVzJykuZmFkZVRvZ2dsZSgzMDApO1xyXG4gICAgICAkKCcuY2F0ZWdvcmllcyAuY2F0ZWdvcmllcy1zdWJtZW51IC5maXJzdC1pdGVtJykuZGV0YWNoKCk7XHJcbiAgICAgICQoJy5jYXRlZ29yaWVzIHVsIGxpLmFjdGl2ZSAuY2F0ZWdvcmllcy1zdWJtZW51JykuZmFkZU91dCgzMDApO1xyXG4gICAgICAkKCcuY2F0ZWdvcmllcyB1bCBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWhhbmRsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgY2F0YWxvZ01lbnVIYW5kbGVDbGlja2VkKCQodGhpcykpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuY2F0ZWdvcmllcy1tZW51LWhhbmRsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuY2F0ZWdvcmllcyB1bCBsaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCgnPGxpIGNsYXNzPVwiY2F0ZWdvcmllcy1zdWJtZW51LWl0ZW0gZmlyc3QtaXRlbVwiPjxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtbGVmdFwiPjwvaT7QktC10YDQvdGD0YLRjNGB0Y8g0L3QsNC30LDQtDwvbGk+JylcclxuICAgICAgICAucHJlcGVuZFRvKCQodGhpcykuc2libGluZ3MoJy5jYXRlZ29yaWVzLXN1Ym1lbnUnKSk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoJy5jYXRlZ29yaWVzLXN1Ym1lbnUnKS5mYWRlSW4oMzAwKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnLmhlYWRlci1jYXRhbG9nJykub24oJ2NsaWNrJywgJy5oZWFkZXItY2F0YWxvZy1zdWJtZW51LWl0ZW0uZmlyc3QtaXRlbScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItY2F0YWxvZy1zdWJtZW51JykuZmFkZU91dCgzMDApO1xyXG4gICAgICAkKHRoaXMpLmRldGFjaCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtJykuaG92ZXIoXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICggJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5ICkge1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hvdmVyZWQnKTtcclxuICAgICAgICBjb25zdCBzdWJtZW51ID0gJCh0aGlzKS5maW5kKCcuaGVhZGVyLWNhdGFsb2ctc3VibWVudScpO1xyXG4gICAgICAgIGlmICggc3VibWVudS5sZW5ndGggJiYhJCgnLmhlYWRlci1jYXRhbG9nID4gLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUuZGVza3RvcC1hY3RpdmUnKS5sZW5ndGggICkge1xyXG4gICAgICAgICAgc3VibWVudS5hcHBlbmRUbygkKCcuaGVhZGVyLWNhdGFsb2cnKSk7XHJcbiAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3aXRoLXN1Ym1lbnUnKTtcclxuICAgICAgICAgIHN1Ym1lbnUuYWRkQ2xhc3MoJ2Rlc2t0b3AtYWN0aXZlJyk7XHJcbiAgICAgICAgICBzdWJtZW51LmNzcygndG9wJywgJCh0aGlzKS5wb3NpdGlvbigpLnRvcCArICdweCcpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS5wb3NpdGlvbigpLnRvcCwgc3VibWVudS5jc3MoJ3RvcCcpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICggJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5ICkge1xyXG4gICAgICAgIGlmICggJCh0aGlzKS5oYXNDbGFzcygnd2l0aC1zdWJtZW51JykpIHtcclxuICAgICAgICAgIGNvbnN0IHN1Ym1lbnUgPSAkKCcuaGVhZGVyLWNhdGFsb2cgPiAuaGVhZGVyLWNhdGFsb2ctc3VibWVudS5kZXNrdG9wLWFjdGl2ZScpO1xyXG4gICAgICAgICAgaWYgKCAhc3VibWVudS5pcygnOmhvdmVyJykgKSB7XHJcbiAgICAgICAgICAgIG1lbnVJdGVtVW5ob3ZlcmVkKCQodGhpcykpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdob3ZlcmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgJCgnLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUnKS5ob3ZlcihcclxuICAgIGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zdCBwYXJlbnRNZW51SXRlbSA9ICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0uaG92ZXJlZC53aXRoLXN1Ym1lbnUnKTtcclxuICAgICAgaWYgKCAhcGFyZW50TWVudUl0ZW0uaXMoJzpob3ZlcicpICkge1xyXG4gICAgICAgIG1lbnVJdGVtVW5ob3ZlcmVkKHBhcmVudE1lbnVJdGVtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNhdGVnb3JpZXMub24oJ2NsaWNrJywgJy5jYXRlZ29yaWVzLXN1Ym1lbnUgbGkuZmlyc3QtaXRlbScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuY2F0ZWdvcmllcy1zdWJtZW51IGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5jYXRlZ29yaWVzLXN1Ym1lbnUnKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICQodGhpcykuZGV0YWNoKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5maWVsZC1maWxlIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS52YWwoKS5zcGxpdCgnXFxcXCcpO1xyXG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmZpZWxkLWZpbGUtdGV4dCcpLnRleHQodmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuZmllbGQtcmF0ZSBpbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KCQodGhpcykudmFsKCkpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9cmFkaW9dJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcclxuICAgICAgICBjb25zdCBzdGFyID0gJChpdGVtKS5uZXh0KCdsYWJlbCcpLmZpbmQoJ2knKTtcclxuICAgICAgICBpZiAoaW5kZXggPCB2YWx1ZSkge1xyXG4gICAgICAgICAgc3Rhci5yZW1vdmVDbGFzcygnZmEtc3Rhci1vJykuYWRkQ2xhc3MoJ2ZhLXN0YXInKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3Rhci5yZW1vdmVDbGFzcygnZmEtc3RhcicpLmFkZENsYXNzKCdmYS1zdGFyLW8nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBidG5DYXRhbG9nQ2xpY2tlZCAoYnRuKSB7XHJcbiAgICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtLmFjdGl2ZSAuaGVhZGVyLWNhdGFsb2ctc3VibWVudSAuZmlyc3QtaXRlbScpLmRldGFjaCgpO1xyXG4gICAgJCgnLmhlYWRlci1jYXRhbG9nLW1lbnUtaXRlbS5hY3RpdmUgLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUnKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhdGFsb2dNZW51SGFuZGxlQ2xpY2tlZCAoaGFuZGxlKSB7XHJcbiAgICAkKGhhbmRsZSkucGFyZW50cygnLmhlYWRlci1jYXRhbG9nLW1lbnUtaXRlbScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJzxsaSBjbGFzcz1cImhlYWRlci1jYXRhbG9nLXN1Ym1lbnUtaXRlbSBmaXJzdC1pdGVtXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1sZWZ0XCI+PC9pPtCS0LXRgNC90YPRgtGM0YHRjyDQvdCw0LfQsNC0PC9saT4nKVxyXG4gICAgICAucHJlcGVuZFRvKCQoaGFuZGxlKS5zaWJsaW5ncygnLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUnKSk7XHJcbiAgICAkKGhhbmRsZSkuc2libGluZ3MoJy5oZWFkZXItY2F0YWxvZy1zdWJtZW51JykuZmFkZUluKDMwMCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtZW51SXRlbVVuaG92ZXJlZCAobWVudUl0ZW0pIHtcclxuICAgIGNvbnN0IHN1Ym1lbnUgPSAkKCcuaGVhZGVyLWNhdGFsb2cgPiAuaGVhZGVyLWNhdGFsb2ctc3VibWVudS5kZXNrdG9wLWFjdGl2ZScpO1xyXG4gICAgJChtZW51SXRlbSkucmVtb3ZlQ2xhc3MoJ2hvdmVyZWQnKTtcclxuICAgICQobWVudUl0ZW0pLnJlbW92ZUNsYXNzKCd3aXRoLXN1Ym1lbnUnKTtcclxuICAgIHN1Ym1lbnUucmVtb3ZlQ2xhc3MoJ2Rlc2t0b3AtYWN0aXZlJyk7XHJcbiAgICBzdWJtZW51LmFwcGVuZFRvKCQobWVudUl0ZW0pKTtcclxuICAgIHN1Ym1lbnUuY3NzKCd0b3AnLCAnYXV0bycpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFnZVJlcGFpbnQoKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgcmVuZGVyTW9iaWxlSGVhZGVyKCk7XHJcbiAgICAgIHJlbmRlck1vYmlsZUZvb3RlcigpO1xyXG4gICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgcmVuZGVyVGFibGV0SGVhZGVyKCk7XHJcbiAgICAgIHJlbmRlclRhYmxldEZvb3RlcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGVhZGVyU2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdtZW51LW9wZW5lZCcpO1xyXG4gICAgICByZW5kZXJEZXNrdG9wSGVhZGVyKCk7XHJcbiAgICAgIHJlbmRlckRlc2t0b3BGb290ZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5pbnNlcnRCZWZvcmUoaGVhZGVyQ2FydCk7XHJcbiAgICBoZWFkZXJDb250YWN0cy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gICAgY2F0ZWdvcmllcy5pbnNlcnRBZnRlcihidG5DYXRlZ29yeSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJUYWJsZXRIZWFkZXIoKSB7XHJcbiAgICBoZWFkZXJTZWFyY2guaW5zZXJ0QmVmb3JlKGhlYWRlckNhcnQpO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICAgIGNhdGVnb3JpZXMuaW5zZXJ0QWZ0ZXIoYnRuQ2F0ZWdvcnkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRGVza3RvcEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICAgIGNhdGVnb3JpZXMuYXBwZW5kVG8oJCgnLndyYXBwZXItc2lkZWJhciAnKSk7XHJcbiAgICBidG5DYXRhbG9nQ2xpY2tlZChidG5DYXRhbG9nKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRBZnRlcihmb290ZXJDb3B5cmlnaHRzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BGb290ZXIoKSB7XHJcbiAgICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldENvbG9ycyAoKSB7XHJcbiAgICBjb2xvckl0ZW0uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICQodGhpcykuYXR0cignZGF0YS1iYWNrZ3JvdW5kJywgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IGJvZHkgPSAkKCdib2R5Jyk7XHJcbiAgY29uc3QgY2F0YWxvZ0ZpbHRlciA9ICQoJy5jYXRhbG9nLWZpbHRlcicpO1xyXG4gIGNvbnN0IGNhdGFsb2dBcnRpY2xlcyA9ICQoJy5jYXRhbG9nLWFydGljbGVzJyk7XHJcbiAgY29uc3QgY2F0YWxvZ0Jhbm5lciA9ICQoJy5jYXRhbG9nLWJhbm5lcicpO1xyXG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gJCgnLmJyZWFkY3J1bWJzJyk7XHJcbiAgY29uc3QgY2F0YWxvZ0FzaWRlID0gJCgnLmNhdGFsb2ctYXNpZGUnKTtcclxuICBjb25zdCBmaWx0ZXJDb3N0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1jb3N0Jyk7XHJcbiAgY29uc3QgZmlsdGVyQ29zdEhhbmRsZXMgPVtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItY29zdC1mcm9tJyksXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyLWNvc3QtdG8nKVxyXG4gIF07XHJcblxyXG4gIGNhdGFsb2dSZXBhaW50KCk7XHJcblxyXG4gIHNldENob29zZXJDb2xvcnMoKTtcclxuXHJcbiAgaWYgKGZpbHRlckNvc3QpIHtcclxuICAgIG5vVWlTbGlkZXIuY3JlYXRlKGZpbHRlckNvc3QsIHtcclxuICAgICAgc3RhcnQ6IFsxMDAwLCA1MDAwXSxcclxuICAgICAgc3RlcDogMTAwLFxyXG4gICAgICBtYXJnaW46IDEwMDAsXHJcbiAgICAgIGNvbm5lY3Q6IHRydWUsXHJcbiAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgJ21pbic6IDAsXHJcbiAgICAgICAgJ21heCc6IDgwMDBcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBmaWx0ZXJDb3N0SGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmaWx0ZXJDb3N0Lm5vVWlTbGlkZXIuc2V0SGFuZGxlKGluZGV4LCBmaWx0ZXJDb3N0SGFuZGxlc1tpbmRleF0udmFsdWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZmlsdGVyQ29zdC5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcclxuICAgICAgZmlsdGVyQ29zdEhhbmRsZXNbaGFuZGxlXS52YWx1ZSA9IE1hdGgudHJ1bmModmFsdWVzW2hhbmRsZV0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNhdGFsb2dSZXBhaW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNhdGFsb2dSZXBhaW50ICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgcmVuZGVyTW9iaWxlQ2F0YWxvZygpO1xyXG4gICAgfSAgZWxzZSB7XHJcbiAgICAgIHJlbmRlckRlc2t0b3BDYXRhbG9nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVDYXRhbG9nICgpIHtcclxuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuaGVhZGVyJykubmV4dCgnLndyYXBwZXItaW5uZXInKSk7XHJcbiAgICBpZiAoY2F0YWxvZ0ZpbHRlci5maW5kKCcubW9kYWwtY2xvc2UnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgJCgnPGRpdiBjbGFzcz1cIm1vZGFsLWNsb3NlXCI+PC9kaXY+JykucHJlcGVuZFRvKGNhdGFsb2dGaWx0ZXIpO1xyXG4gICAgfVxyXG4gICAgY2F0YWxvZ0ZpbHRlci5hcHBlbmRUbygnLm1vZGFsW2RhdGEtbW9kYWw9XCJmaWx0ZXJcIl0nKTtcclxuICAgIGNhdGFsb2dBcnRpY2xlcy5pbnNlcnRBZnRlcignLnBhZ2luYXRpb24nKTtcclxuICAgIGNhdGFsb2dCYW5uZXIuaW5zZXJ0QWZ0ZXIoY2F0YWxvZ0FydGljbGVzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BDYXRhbG9nICgpIHtcclxuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuY2F0YWxvZy1jb250ZW50JykpO1xyXG4gICAgYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbmVkJyk7XHJcbiAgICAkKCcubW9kYWxbZGF0YS1tb2RhbD1cImZpbHRlclwiXScpLmNzcyh7XHJcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxyXG4gICAgICAndG9wJzogJ2F1dG8nXHJcbiAgICB9KTtcclxuICAgIGlmIChjYXRhbG9nRmlsdGVyLmZpbmQoJy5tb2RhbC1jbG9zZScpLmxlbmd0aCkge1xyXG4gICAgICAkKGNhdGFsb2dGaWx0ZXIuZmluZCgnLm1vZGFsLWNsb3NlJykpLmRldGFjaCgpO1xyXG4gICAgfVxyXG4gICAgY2F0YWxvZ0ZpbHRlci5wcmVwZW5kVG8oY2F0YWxvZ0FzaWRlKTtcclxuICAgIGNhdGFsb2dBcnRpY2xlcy5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xyXG4gICAgY2F0YWxvZ0Jhbm5lci5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0Q2hvb3NlckNvbG9ycyAoKSB7XHJcbiAgICAkKCcuY2hvb3Nlci1jb2xvciBsaScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtYmFja2dyb3VuZCcsICQodGhpcykuZmluZCgnc3BhbicpLmVxKDApLmNzcygnYmFja2dyb3VuZC1jb2xvcicpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCBoZXJvID0gJCgnLmhlcm8nKTtcclxuXHJcbiAgaWYgKGhlcm8ubGVuZ3RoKSB7XHJcbiAgICBoZXJvLnNsaWNrKHtcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgZmFkZTogdHJ1ZSxcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgaXRlbVNsaWRlckxhcmdlID0gJCgnLml0ZW0taW1hZ2UtbGFyZ2UnKTtcclxuICBjb25zdCBpdGVtU2xpZGVyU21hbGwgPSAkKCcuaXRlbS1pbWFnZS1zbWFsbCcpO1xyXG4gIGNvbnN0IHBhcmFtcyA9ICQoJy5pdGVtLXBhcmFtcycpO1xyXG4gIGNvbnN0IGNvbG9yU2xpZGVyID0gJCgnLmNob29zZXIuY2hvb3Nlci1jb2xvciB1bCcpO1xyXG4gIGNvbnN0IGl0ZW1MaXN0ID0gJCgnLml0ZW0gLml0ZW0tbGlzdCcpO1xyXG4gIGNvbnN0IGl0ZW1JbWFnZSA9ICQoJy5pdGVtLWltYWdlJyk7XHJcbiAgY29uc3QgaXRlbUZvcm1IZWFkZXIgPSAkKCcuaXRlbS1mb3JtLWhlYWRlcicpO1xyXG4gIGNvbnN0IGl0ZW1EZWxpdmVyeSA9ICQoJy5pdGVtLWRlbGl2ZXJ5Jyk7XHJcbiAgY29uc3QgaXRlbUZvcm0gPSAkKCcuaXRlbS1mb3JtJyk7XHJcblxyXG4gIGl0ZW1SZXBhaW50KCk7XHJcblxyXG4gIHJlcGFpbnRDb2xvclNsaWRlcihjb2xvclNsaWRlcik7XHJcblxyXG4gIGlmIChwYXJhbXMubGVuZ3RoKSB7XHJcbiAgICBwYXJhbXMuc2xpY2soe1xyXG4gICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxyXG4gICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiA0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGl0ZW1TbGlkZXJMYXJnZS5sZW5ndGggJiYgaXRlbVNsaWRlclNtYWxsLmxlbmd0aCkge1xyXG5cclxuICAgIGl0ZW1TbGlkZXJMYXJnZS5zbGljayh7XHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIGZhZGU6IHRydWUsXHJcbiAgICAgIGFzTmF2Rm9yOiAnLml0ZW0taW1hZ2Utc21hbGwnXHJcbiAgICB9KTtcclxuXHJcbiAgICBpdGVtU2xpZGVyU21hbGwuc2xpY2soe1xyXG4gICAgICBzbGlkZXNUb1Nob3c6IDQsXHJcbiAgICAgIGZvY3VzT25TZWxlY3Q6IHRydWUsXHJcbiAgICAgIGFzTmF2Rm9yOiAnLml0ZW0taW1hZ2UtbGFyZ2UnLFxyXG4gICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcclxuICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXBhaW50Q29sb3JTbGlkZXIoY29sb3JTbGlkZXIpO1xyXG4gICAgaXRlbVJlcGFpbnQoKTtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gcmVwYWludENvbG9yU2xpZGVyKGNvbG9yU2xpZGVyKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgJChjb2xvclNsaWRlcikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NsaWNrLXNsaWRlcicpKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnNsaWNrKCd1bnNsaWNrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoY29sb3JTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICQodGhpcykuc2xpY2soe1xyXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGl0ZW1SZXBhaW50KCkge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgIHJlbmRlck1vYmlsZUl0ZW0oKTtcclxuICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIHJlbmRlclRhYmxldEl0ZW0oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlbmRlckRlc2t0b3BJdGVtKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVJdGVtICgpIHtcclxuICAgIGl0ZW1MaXN0Lmluc2VydEFmdGVyKGl0ZW1Gb3JtSGVhZGVyKTtcclxuICAgIGl0ZW1EZWxpdmVyeS5pbnNlcnRBZnRlcihpdGVtRm9ybSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJUYWJsZXRJdGVtICgpIHtcclxuICAgIGl0ZW1MaXN0LmFwcGVuZFRvKGl0ZW1JbWFnZSk7XHJcbiAgICBpdGVtRGVsaXZlcnkuaW5zZXJ0QWZ0ZXIoaXRlbUZvcm0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRGVza3RvcEl0ZW0gKCkge1xyXG4gICAgaXRlbUxpc3QuYXBwZW5kVG8oaXRlbUltYWdlKTtcclxuICAgIGl0ZW1EZWxpdmVyeS5hcHBlbmRUbyhpdGVtRm9ybSk7XHJcbiAgfVxyXG5cclxuICAkKCcuaXRlbS10YWItaGVhZGVyIGxpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLml0ZW0tdGFiLWhlYWRlcicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY3VycmVudCA9ICQodGhpcykuYXR0cignZGF0YS10YWInKTtcclxuICAgICAgJCgnLml0ZW0tdGFiLWNvbnRlbnQgPiBsaScpLmZhZGVPdXQoMCk7XHJcbiAgICAgICQoJy5pdGVtLXRhYi1jb250ZW50JykuZmluZCgnbGlbZGF0YS10YWI9XCInICsgY3VycmVudCArICdcIl0nKS5mYWRlSW4oKTtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLml0ZW0tdGFiLWhlYWRlcicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnLml0ZW0tbGlzdC1hbGwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgIHNjcm9sbFRvcDogJCgnLml0ZW0tdGFiLWNvbnRlbnQnKS5vZmZzZXQoKS50b3AgLSAxMjBcclxuICAgIH0sIDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKCcuaXRlbS10YWItaGVhZGVyIGxpW2RhdGEtdGFiPVwicGFyYW1zXCJdJylcclxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKCcuaXRlbS10YWItY29udGVudCBsaVtkYXRhLXRhYj1cInBhcmFtc1wiXScpXHJcbiAgICAgICAgLmZhZGVJbigpLnNpYmxpbmdzKCkuZmFkZU91dCgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxufSk7IiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IG1vYmlsZVNsaWRlciA9ICQoJy5hZHZhbnRhZ2VzIHVsLCAucmV2aWV3cy1yYXRlJyk7XHJcblxyXG4gIHJlcGFpbnRNb2JpbGVTbGlkZXIobW9iaWxlU2xpZGVyKTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcik7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlcGFpbnRNb2JpbGVTbGlkZXIobW9iaWxlU2xpZGVyKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgJChtb2JpbGVTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICQodGhpcykuc2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJChtb2JpbGVTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgICAgJCh0aGlzKS5zbGljaygndW5zbGljaycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSk7XHJcbiIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCByZXZpZXdzUmVzdWx0UGVyY2VudCA9ICQoJy5yZXZpZXdzLXJlc3VsdC1wZXJjZW50Jyk7XHJcblxyXG4gIHJldmlld3NSZXN1bHRQZXJjZW50LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmFsdWUgPSBwYXJzZUludCgkKHRoaXMpLmF0dHIoJ2RhdGEtcmVzdWx0LXBlcmNlbnQnKSk7XHJcbiAgICBjb25zdCB2YWx1ZURPTSA9ICQodGhpcykuZmluZCgnLnJldmlld3MtcmVzdWx0LXBlcmNlbnQtdmFsdWUnKTtcclxuICAgICQoJzxkaXYgY2xhc3M9XCJyZXZpZXdzLXJlc3VsdC1wZXJjZW50LWNvbG9yXCI+PC9kaXY+JylcclxuICAgICAgLmFwcGVuZFRvKHZhbHVlRE9NKS5jc3MoJ3dpZHRoJywgdmFsdWUgKyAnJScpO1xyXG4gIH0pO1xyXG5cclxuICAkKCcucmV2aWV3cy1saXN0IC5yZXZpZXdzLWNhcmQgcCAuc2hvdy1hbGwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYWxsLXRleHQnKS5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lJyk7XHJcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZG90cycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAkKHRoaXMpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgfSk7XHJcblxyXG59KTsiLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3Qgc2xpZGVycyA9ICQoJy5jZXJ0aWZpY2F0ZXMtbGlzdCwgLnByb2R1Y3QtbGlzdCwgLmFydGljbGVzLWxpc3QsIC5yZXZpZXdzLXNsaWRlcicpO1xyXG5cclxuICBpZiAoc2xpZGVycy5sZW5ndGgpIHtcclxuXHJcbiAgICBzbGlkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygncHJvZHVjdC1saXN0JykgfHwgJCh0aGlzKS5oYXNDbGFzcygnY2VydGlmaWNhdGVzLWxpc3QnKSkge1xyXG4gICAgICAgICQodGhpcykuc2xpY2soe1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxyXG4gICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogOTMwLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5zbGljayh7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICB2ZXJ0aWNhbDpmYWxzZSxcclxuICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEyMDAsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgICQodGhpcykuZmluZCgnLnNsaWNrLXByZXYnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNsaWRlcnMub24oJ2JlZm9yZUNoYW5nZScsIGZ1bmN0aW9uKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUpIHtcclxuICAgICAgc2V0U2xpZGVyQXJyb3dzKCQodGhpcyksIG5leHRTbGlkZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRTbGlkZXJBcnJvd3MgKHNsaWRlciwgbmV4dFNsaWRlKSB7XHJcbiAgICBjb25zdCBwcmV2ID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1wcmV2Jyk7XHJcbiAgICBjb25zdCBuZXh0ID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1uZXh0Jyk7XHJcbiAgICBjb25zdCBzaXplID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1zbGlkZScpLmxlbmd0aDtcclxuICAgIGNvbnN0IHZpc2libGUgPSAkKHNsaWRlcikuZmluZCgnLnNsaWNrLXNsaWRlLnNsaWNrLWFjdGl2ZScpLmxlbmd0aDtcclxuICAgIGNvbnN0IHNtYWxsQW1vdW50ID0gdmlzaWJsZSArIDEgPT09IHNpemU7XHJcbiAgICBpZiAobmV4dFNsaWRlID09PSAwKSB7XHJcbiAgICAgIHByZXYuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKHNtYWxsQW1vdW50KSB7XHJcbiAgICAgIGlmIChuZXh0U2xpZGUgKyB2aXNpYmxlID49IHNpemUpIHtcclxuICAgICAgICBuZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKG5leHRTbGlkZSArIHZpc2libGUgPiBzaXplIC0gMSkge1xyXG4gICAgICAgIG5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBuZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSk7XHJcbiJdfQ==
