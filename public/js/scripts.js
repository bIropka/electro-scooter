"use strict";$(function(){var e=$(".wrapper"),a=$("body"),t=$(".header-bottom .wrapper-inner"),s=$(".header-nav"),i=$(".header-burger"),n=$(".header .contacts"),o=$(".header .address-hours"),l=$(".header-search"),c=$(".header-cart"),r=$(".footer-subscribe"),d=$(".footer-copyrights"),h=$(".footer-social"),u=$(".chooser"),f=$(".chooser.chooser-color"),v=$(".color-list li"),m=$(".btn-catalog"),p=$(".btn-category"),g=$(".categories");function b(e){var t=$(e),a=t.hasClass("field-rate")?0:parseInt($(e).val());0===a&&(t=t.find("input").first()),t.parent().find("input[type=radio]").each(function(e,t){var s=$(t).next("label").find("i");e<a?s.removeClass("fa-star-o").addClass("fa-star"):s.removeClass("fa-star").addClass("fa-star-o")})}function w(){$(".header-catalog-menu-item.active .header-catalog-submenu .first-item").detach(),$(".header-catalog-menu-item.active .header-catalog-submenu").fadeOut(300),$(".header-catalog-menu-item.active").removeClass("active")}function C(e){var t=$(".header-catalog > .header-catalog-submenu.desktop-active");$(e).removeClass("hovered"),$(e).removeClass("with-submenu"),t.removeClass("desktop-active"),t.appendTo($(e)),t.css("top","auto")}function k(){$(window).width()<768?(l.insertBefore(c),n.appendTo(s),o.appendTo(s),g.insertAfter(p),r.insertAfter(d)):($(window).width()<1200?(l.insertBefore(c),n.appendTo(t),o.appendTo(s),g.insertAfter(p)):(l.removeClass("active"),$(".header").removeClass("menu-opened"),l.appendTo(t),n.appendTo(t),o.appendTo(t),g.appendTo($(".wrapper-sidebar ")),w()),r.insertBefore(h))}setTimeout(function(){e.animate({opacity:1},500)},500),k(),v.each(function(){$(this).attr("data-background",$(this).css("background-color"))}),$(window).on("resize",function(){k()}),$("[data-removable-close]").on("click",function(){$(this).parents("[data-removable]").fadeOut(400,function(){$(this).detach()})}),$('.header-search button[type="submit"]').on("click",function(e){e.preventDefault();var t=$(this).parents(".header-search");$(window).width()<1200?t.hasClass("active")?t.submit():t.addClass("active"):t.submit()}),$(".field-rate-list i").on("click",function(){var s=$(this).index()+1;$(this).parents(".field-rate").find('input[type="hidden"]').val(s),$(this).parents(".field-rate-list").find("i").each(function(e,t){s<=e?$(t).removeClass("fa-red").addClass("fa-grey"):$(t).removeClass("fa-grey").addClass("fa-red")})}),$('.field-file input[type="file"]').on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$('input[type="tel"]').mask("+7 (999) 999-999-99"),i.on("click",function(){$(this).parents(".header").toggleClass("menu-opened")}),$("[data-call-modal]").on("click",function(){var e=$(this).attr("data-call-modal"),t=$(window).scrollTop(),s=$('[data-modal="'.concat(e,'"]'));a.addClass("modal-opened"),s.fadeIn(300).css({display:"flex",top:"".concat(t,"px")}),$(document).on("touchmove",function(e){e.preventDefault()})}),$(".modal").on("click",function(e){var t=$(e.target);!t.hasClass("modal-close")&&t.closest(".modal-inner").length||($(this).fadeOut(300),a.removeClass("modal-opened"),$(document).off("touchmove"))}),$("[data-select-control]").on("click",function(){$(this).parents("[data-select]").hasClass("active")?$(this).parents("[data-select]").removeClass("active"):($("[data-select]").removeClass("active"),$(this).parents("[data-select]").addClass("active"))}),$("[data-select] ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).addClass("active"),$(this).siblings(".active").removeClass("active"),$(this).parents("ul").siblings("[data-select-control]").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents("[data-select]").removeClass("active")}}),$(".amount-chooser-control").on("click",function(){var e=$(this).siblings("input"),t=parseInt(e.val());$(this).hasClass("amount-chooser-minus")?1<t&&e.val(t-1):$(this).hasClass("amount-chooser-plus")&&e.val(t+1),e.trigger("change")}),$(".amount-chooser input").on("change",function(){var e=$(this).parents(".amount-chooser").siblings(".card-cost").children(".card-cost-value"),t=parseInt($(this).val()),s=parseInt($(this).parents(".amount-chooser").attr("data-cost"));e.text(t*s+" руб.")}),$(".categories-handle").on("click",function(){$(this).parents(".categories").toggleClass("dropped-down")}),v.on("click",function(){$(this).hasClass("active")||($(this).addClass("active"),$(this).siblings().removeClass("active"))}),u.find(".chooser-value").on("click",function(){if($(this).closest(".catalog-brands").length&&767<$(window).width()||$(this).closest(".chooser-color").length&&767<$(window).width())return console.log("hello"),!1;$(this).parents(".chooser").hasClass("active")?$(this).parents(".chooser").removeClass("active"):(u.removeClass("active"),$(this).parents(".chooser").addClass("active"))}),u.find("ul li").on("click",function(){if(!$(this).hasClass("active")&&0===$(this).closest(".catalog-brands").length){var e=$(this).html();$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).parents(".chooser").removeClass("active"),$(this).closest(".chooser-color").length?($(window).width()<768&&$(this).parents("ul").siblings(".chooser-value").html(e),$(this).parents("ul").siblings("input").val($(this).find(".chooser-color-text").text())):($(this).parents("ul").siblings(".chooser-value").html(e),$(this).parents("ul").siblings("input").val(e))}}),f.find("ul li").on("click",function(e){if(e.preventDefault(),!$(this).hasClass("active")){var t=$(this).find(".chooser-color-text").text();$(this).parents("ul").siblings("input").val(t)}}),$(document).on("click",function(e){var t=$(e.target);0===t.closest("[data-select]").length&&$(".active[data-select]").removeClass("active"),0===t.closest(".header-search").length&&$(".header-search").removeClass("active"),0===t.closest(".chooser").length&&u.removeClass("active"),1199<$(window).width()&&0===t.closest(".header-catalog").length&&0===t.closest(".btn-catalog").length&&(m.removeClass("active"),$(".header-catalog").fadeOut(300),$(".header-catalog-menu-item.active .header-catalog-submenu .first-item").detach(),$(".header-catalog-menu-item.active .header-catalog-submenu").fadeOut(300),$(".header-catalog-menu-item.active").removeClass("active"))}),m.on("click",function(){$(this).toggleClass("active"),$(".header-catalog").fadeToggle(300),w($(this))}),p.on("click",function(){$(window).width()<1200&&($(this).toggleClass("active"),$(".categories").fadeToggle(300),$(".categories .categories-submenu .first-item").detach(),$(".categories ul li.active .categories-submenu").fadeOut(300),$(".categories ul li.active").removeClass("active"))}),$(".header-catalog-menu-handle").on("click",function(){$(window).width()<1200&&function(e){$(e).parents(".header-catalog-menu-item").addClass("active"),$('<li class="header-catalog-submenu-item first-item"><i class="fa fa-angle-left"></i>Вернуться назад</li>').prependTo($(e).siblings(".header-catalog-submenu")),$(e).siblings(".header-catalog-submenu").fadeIn(300)}($(this))}),$(".categories-menu-handle").on("click",function(){$(window).width()<1200&&($(this).parents(".categories ul li").addClass("active"),$('<li class="categories-submenu-item first-item"><i class="fa fa-angle-left"></i>Вернуться назад</li>').prependTo($(this).siblings(".categories-submenu")),$(this).siblings(".categories-submenu").fadeIn(300))}),$(".header-catalog").on("click",".header-catalog-submenu-item.first-item",function(){$(window).width()<1200&&($(this).parents(".header-catalog-menu-item").removeClass("active"),$(this).parents(".header-catalog-submenu").fadeOut(300),$(this).detach())}),$(".header-catalog-menu-item").hover(function(){if(1199<$(window).width()){$(this).addClass("hovered");var e=$(this).find(".header-catalog-submenu");e.length&&!$(".header-catalog > .header-catalog-submenu.desktop-active").length&&(e.appendTo($(".header-catalog")),$(this).addClass("with-submenu"),e.addClass("desktop-active"),e.css("top",$(this).position().top+"px"),console.log($(this).position().top,e.css("top")))}},function(){1199<$(window).width()&&($(this).hasClass("with-submenu")?$(".header-catalog > .header-catalog-submenu.desktop-active").is(":hover")||C($(this)):$(this).removeClass("hovered"))}),$(".header-catalog-submenu").hover(function(){},function(){var e=$(".header-catalog-menu-item.hovered.with-submenu");e.is(":hover")||C(e)}),g.on("click",".categories-submenu li.first-item",function(){$(window).width()<1200&&($(this).parents(".categories-submenu li").removeClass("active"),$(this).parents(".categories-submenu").fadeOut(300),$(this).detach())}),$(".field-file input").on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$(".field-rate input").on("change",function(){$(this).is(":checked")&&b($(this))}),$(".field-rate label").hover(function(){b($(this).prev("input"))},function(){var e=$(this).siblings("input:checked");e.length?b(e):b($(".field-rate"))})}),$(function(){var e=$("body"),t=$(".catalog-filter"),s=$(".catalog-articles"),a=$(".catalog-banner"),i=$(".breadcrumbs"),n=$(".catalog-aside"),o=document.getElementById("filter-cost"),l=[document.getElementById("filter-cost-from"),document.getElementById("filter-cost-to")];function c(){$(window).width()<1200?function(){i.prependTo($(".header").next(".wrapper-inner")),0===t.find(".modal-close").length&&$('<div class="modal-close"></div>').prependTo(t);t.appendTo('.modal[data-modal="filter"]'),s.insertAfter(".pagination"),a.insertAfter(s)}():function(){i.prependTo($(".catalog-content")),e.removeClass("modal-opened"),$('.modal[data-modal="filter"]').css({display:"none",top:"auto"}),t.find(".modal-close").length&&$(t.find(".modal-close")).detach();t.prependTo(n),s.appendTo(n),a.appendTo(n)}()}c(),$(".chooser-color li").each(function(){$(this).attr("data-background",$(this).find("span").eq(0).css("background-color"))}),o&&(noUiSlider.create(o,{start:[1e3,5e3],step:100,margin:1e3,connect:!0,range:{min:0,max:8e3}}),l.forEach(function(e,t){e.addEventListener("change",function(){o.noUiSlider.setHandle(t,l[t].value)})}),o.noUiSlider.on("update",function(e,t){l[t].value=Math.trunc(e[t])})),$(window).on("resize",function(){c()})}),$(function(){var e=$(".hero");e.length&&e.slick({dots:!0,arrows:!1,fade:!0,autoplay:!0,autoplaySpeed:5e3})}),$(function(){var e=$(".item-image-large"),t=$(".item-image-small"),s=$(".item-params"),a=$(".chooser.chooser-color ul"),i=$(".item .item-list"),n=$(".item-image"),o=$(".item-form-header"),l=$(".item-delivery"),c=$(".item-form");function r(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")}):$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick({slidesToShow:3,infinite:!1})})}function d(){$(window).width()<768?(i.insertAfter(o),l.insertAfter(c)):$(window).width()<1200?(i.appendTo(n),l.insertAfter(c)):(i.appendTo(n),l.appendTo(c))}d(),r(a),s.length&&s.slick({slidesToShow:3,responsive:[{breakpoint:1200,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:2}}]}),e.length&&t.length&&(e.slick({arrows:!1,fade:!0,asNavFor:".item-image-small"}),t.slick({slidesToShow:4,focusOnSelect:!0,asNavFor:".item-image-large",responsive:[{breakpoint:1200,settings:{slidesToShow:2}}]})),$(window).on("resize",function(){r(a),d()}),$(".item-tab-header li").on("click",function(){if($(this).hasClass("active"))$(window).width()<768&&$(this).parents(".item-tab-header").toggleClass("active");else{var e=$(this).attr("data-tab");$(".item-tab-content > li").fadeOut(0),$(".item-tab-content").find('li[data-tab="'+e+'"]').fadeIn(),$(this).siblings().removeClass("active"),$(this).addClass("active"),$(window).width()<768&&$(this).parents(".item-tab-header").removeClass("active")}}),$(".item-list-all").on("click",function(){$("html, body").animate({scrollTop:$(".item-tab-content").offset().top-120},400,function(){$('.item-tab-header li[data-tab="params"]').addClass("active").siblings().removeClass("active"),$('.item-tab-content li[data-tab="params"]').fadeIn().siblings().fadeOut(0)})})}),$(function(){var e=$(".advantages ul, .reviews-rate");function t(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick()}):$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")})}t(e),$(window).on("resize",function(){t(e)})}),$(function(){$(".reviews-result-percent").each(function(){var e=parseInt($(this).attr("data-result-percent")),t=$(this).find(".reviews-result-percent-value");$('<div class="reviews-result-percent-color"></div>').appendTo(t).css("width",e+"%")}),$(".reviews-list .reviews-card p .show-all").on("click",function(){$(this).siblings(".all-text").css("display","inline"),$(this).siblings(".dots").css("display","none"),$(this).css("display","none")})}),$(function(){var e=$(".certificates-list, .product-list, .articles-list, .reviews-slider");e.length&&(e.each(function(){$(this).hasClass("product-list")||$(this).hasClass("certificates-list")?$(this).slick({slidesToShow:4,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3,infinite:!1}},{breakpoint:930,settings:{slidesToShow:2,infinite:!1}},{breakpoint:768,settings:{infinite:!0,slidesToShow:1}}]}):$(this).slick({slidesToShow:2,vertical:!1,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,infinite:!1,vertical:!0}},{breakpoint:768,settings:{slidesToShow:1,infinite:!0,vertical:!1}}]}),$(this).find(".slick-prev").addClass("disabled")}),e.on("beforeChange",function(e,t,s,a){!function(e,t){var s=$(e).find(".slick-prev"),a=$(e).find(".slick-next"),i=$(e).find(".slick-slide").length,n=$(e).find(".slick-slide.slick-active").length,o=n+1===i;0===t?(s.addClass("disabled"),a.removeClass("disabled")):s.removeClass("disabled");o?i<=t+n?(a.addClass("disabled"),s.removeClass("disabled")):a.removeClass("disabled"):i-1<t+n?(a.addClass("disabled"),s.removeClass("disabled")):a.removeClass("disabled")}($(this),a)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjYXRhbG9nLmpzIiwiaGVyby5qcyIsIml0ZW0uanMiLCJtb2JpbGVTbGlkZXIuanMiLCJyZXZpZXdzLmpzIiwic2xpZGVycy5qcyJdLCJuYW1lcyI6WyIkIiwid3JhcHBlciIsImJvZHkiLCJoZWFkZXJCb3R0b20iLCJoZWFkZXJOYXYiLCJidXJnZXIiLCJoZWFkZXJDb250YWN0cyIsImhlYWRlckFkZHJlc3MiLCJoZWFkZXJTZWFyY2giLCJoZWFkZXJDYXJ0IiwiZm9vdGVyU3Vic2NyaWJlIiwiZm9vdGVyQ29weXJpZ2h0cyIsImZvb3RlclNvY2lhbCIsImNob29zZXIiLCJjaG9vc2VyQ29sb3IiLCJjb2xvckl0ZW0iLCJidG5DYXRhbG9nIiwiYnRuQ2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiZmllbGRSYXRlUmVuZGVyIiwiaW5wdXQiLCJmaWVsZCIsInZhbHVlIiwiaGFzQ2xhc3MiLCJwYXJzZUludCIsInZhbCIsImZpbmQiLCJmaXJzdCIsInBhcmVudCIsImVhY2giLCJpbmRleCIsIml0ZW0iLCJzdGFyIiwibmV4dCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJidG5DYXRhbG9nQ2xpY2tlZCIsImRldGFjaCIsImZhZGVPdXQiLCJtZW51SXRlbVVuaG92ZXJlZCIsIm1lbnVJdGVtIiwic3VibWVudSIsImFwcGVuZFRvIiwiY3NzIiwicGFnZVJlcGFpbnQiLCJ3aW5kb3ciLCJ3aWR0aCIsImluc2VydEJlZm9yZSIsImluc2VydEFmdGVyIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJvcGFjaXR5IiwidGhpcyIsImF0dHIiLCJvbiIsInBhcmVudHMiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm9ybSIsInN1Ym1pdCIsImVsZW1lbnQiLCJ2YWxBcnJheSIsInNwbGl0Iiwic2libGluZ3MiLCJ0ZXh0IiwibGVuZ3RoIiwibWFzayIsInRvZ2dsZUNsYXNzIiwidGFyZ2V0Iiwic2Nyb2xsVmFsdWUiLCJzY3JvbGxUb3AiLCJtb2RhbCIsImNvbmNhdCIsImZhZGVJbiIsImRpc3BsYXkiLCJ0b3AiLCJkb2N1bWVudCIsImNsb3Nlc3QiLCJvZmYiLCJhbW91bnRET00iLCJhbW91bnRWYWx1ZSIsInRyaWdnZXIiLCJjb3N0RE9NIiwiY2hpbGRyZW4iLCJhbW91bnQiLCJpdGVtQ29zdCIsImNvbnNvbGUiLCJsb2ciLCJodG1sIiwiZmFkZVRvZ2dsZSIsImhhbmRsZSIsInByZXBlbmRUbyIsImNhdGFsb2dNZW51SGFuZGxlQ2xpY2tlZCIsImhvdmVyIiwicG9zaXRpb24iLCJpcyIsInBhcmVudE1lbnVJdGVtIiwicHJldiIsImNoZWNrZWQiLCJjYXRhbG9nRmlsdGVyIiwiY2F0YWxvZ0FydGljbGVzIiwiY2F0YWxvZ0Jhbm5lciIsImJyZWFkY3J1bWJzIiwiY2F0YWxvZ0FzaWRlIiwiZmlsdGVyQ29zdCIsImdldEVsZW1lbnRCeUlkIiwiZmlsdGVyQ29zdEhhbmRsZXMiLCJjYXRhbG9nUmVwYWludCIsInJlbmRlck1vYmlsZUNhdGFsb2ciLCJyZW5kZXJEZXNrdG9wQ2F0YWxvZyIsImVxIiwibm9VaVNsaWRlciIsImNyZWF0ZSIsInN0YXJ0Iiwic3RlcCIsIm1hcmdpbiIsImNvbm5lY3QiLCJyYW5nZSIsIm1pbiIsIm1heCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SGFuZGxlIiwidmFsdWVzIiwiTWF0aCIsInRydW5jIiwiaGVybyIsInNsaWNrIiwiZG90cyIsImFycm93cyIsImZhZGUiLCJhdXRvcGxheSIsImF1dG9wbGF5U3BlZWQiLCJpdGVtU2xpZGVyTGFyZ2UiLCJpdGVtU2xpZGVyU21hbGwiLCJwYXJhbXMiLCJjb2xvclNsaWRlciIsIml0ZW1MaXN0IiwiaXRlbUltYWdlIiwiaXRlbUZvcm1IZWFkZXIiLCJpdGVtRGVsaXZlcnkiLCJpdGVtRm9ybSIsInJlcGFpbnRDb2xvclNsaWRlciIsInNsaWRlc1RvU2hvdyIsImluZmluaXRlIiwiaXRlbVJlcGFpbnQiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiYXNOYXZGb3IiLCJmb2N1c09uU2VsZWN0IiwiY3VycmVudCIsIm9mZnNldCIsIm1vYmlsZVNsaWRlciIsInJlcGFpbnRNb2JpbGVTbGlkZXIiLCJ2YWx1ZURPTSIsInNsaWRlcnMiLCJ2ZXJ0aWNhbCIsImN1cnJlbnRTbGlkZSIsIm5leHRTbGlkZSIsInNsaWRlciIsInNpemUiLCJ2aXNpYmxlIiwic21hbGxBbW91bnQiLCJzZXRTbGlkZXJBcnJvd3MiXSwibWFwcGluZ3MiOiJhQUFBQSxFQUFFLFdBRUEsSUFBTUMsRUFBVUQsRUFBRSxZQUNaRSxFQUFPRixFQUFFLFFBQ1RHLEVBQWVILEVBQUUsaUNBQ2pCSSxFQUFZSixFQUFFLGVBQ2RLLEVBQVNMLEVBQUUsa0JBQ1hNLEVBQWlCTixFQUFFLHFCQUNuQk8sRUFBZ0JQLEVBQUUsMEJBQ2xCUSxFQUFlUixFQUFFLGtCQUNqQlMsRUFBYVQsRUFBRSxnQkFDZlUsRUFBa0JWLEVBQUUscUJBQ3BCVyxFQUFtQlgsRUFBRSxzQkFDckJZLEVBQWVaLEVBQUUsa0JBQ2pCYSxFQUFVYixFQUFFLFlBQ1pjLEVBQWVkLEVBQUUsMEJBQ2pCZSxFQUFZZixFQUFFLGtCQUNkZ0IsRUFBYWhCLEVBQUUsZ0JBQ2ZpQixFQUFjakIsRUFBRSxpQkFDaEJrQixFQUFhbEIsRUFBRSxlQTBTckIsU0FBU21CLEVBQWtCQyxHQUN6QixJQUFJQyxFQUFRckIsRUFBRW9CLEdBQ1JFLEVBQVVELEVBQU1FLFNBQVMsY0FBa0IsRUFBSUMsU0FBU3hCLEVBQUVvQixHQUFPSyxPQUN4RCxJQUFWSCxJQUNIRCxFQUFRQSxFQUFNSyxLQUFLLFNBQVNDLFNBRTlCTixFQUFNTyxTQUFTRixLQUFLLHFCQUFxQkcsS0FBSyxTQUFVQyxFQUFPQyxHQUM3RCxJQUFNQyxFQUFPaEMsRUFBRStCLEdBQU1FLEtBQUssU0FBU1AsS0FBSyxLQUNwQ0ksRUFBUVIsRUFDVlUsRUFBS0UsWUFBWSxhQUFhQyxTQUFTLFdBRXZDSCxFQUFLRSxZQUFZLFdBQVdDLFNBQVMsZUFLM0MsU0FBU0MsSUFD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akcsRUFBRWdLLEdBQVF0SSxLQUFLLGVBQ3RCTyxFQUFPakMsRUFBRWdLLEdBQVF0SSxLQUFLLGVBQ3RCdUksRUFBT2pLLEVBQUVnSyxHQUFRdEksS0FBSyxnQkFBZ0J1QyxPQUN0Q2lHLEVBQVVsSyxFQUFFZ0ssR0FBUXRJLEtBQUssNkJBQTZCdUMsT0FDdERrRyxFQUFjRCxFQUFVLElBQU1ELEVBQ2xCLElBQWRGLEdBQ0Y5RCxFQUFLOUQsU0FBUyxZQUNkRixFQUFLQyxZQUFZLGFBRWpCK0QsRUFBSy9ELFlBQVksWUFFZmlJLEVBQ3lCRixHQUF2QkYsRUFBWUcsR0FDZGpJLEVBQUtFLFNBQVMsWUFDZDhELEVBQUsvRCxZQUFZLGFBRWpCRCxFQUFLQyxZQUFZLFlBR08rSCxFQUFPLEVBQTdCRixFQUFZRyxHQUNkakksRUFBS0UsU0FBUyxZQUNkOEQsRUFBSy9ELFlBQVksYUFFakJELEVBQUtDLFlBQVksWUE3Qm5Ca0ksQ0FBZ0JwSyxFQUFFb0QsTUFBTzJHIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uICgpIHtcblxuICBjb25zdCB3cmFwcGVyID0gJCgnLndyYXBwZXInKTtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKTtcbiAgY29uc3QgaGVhZGVyQm90dG9tID0gJCgnLmhlYWRlci1ib3R0b20gLndyYXBwZXItaW5uZXInKTtcbiAgY29uc3QgaGVhZGVyTmF2ID0gJCgnLmhlYWRlci1uYXYnKTtcbiAgY29uc3QgYnVyZ2VyID0gJCgnLmhlYWRlci1idXJnZXInKTtcbiAgY29uc3QgaGVhZGVyQ29udGFjdHMgPSAkKCcuaGVhZGVyIC5jb250YWN0cycpO1xuICBjb25zdCBoZWFkZXJBZGRyZXNzID0gJCgnLmhlYWRlciAuYWRkcmVzcy1ob3VycycpO1xuICBjb25zdCBoZWFkZXJTZWFyY2ggPSAkKCcuaGVhZGVyLXNlYXJjaCcpO1xuICBjb25zdCBoZWFkZXJDYXJ0ID0gJCgnLmhlYWRlci1jYXJ0Jyk7XG4gIGNvbnN0IGZvb3RlclN1YnNjcmliZSA9ICQoJy5mb290ZXItc3Vic2NyaWJlJyk7XG4gIGNvbnN0IGZvb3RlckNvcHlyaWdodHMgPSAkKCcuZm9vdGVyLWNvcHlyaWdodHMnKTtcbiAgY29uc3QgZm9vdGVyU29jaWFsID0gJCgnLmZvb3Rlci1zb2NpYWwnKTtcbiAgY29uc3QgY2hvb3NlciA9ICQoJy5jaG9vc2VyJyk7XG4gIGNvbnN0IGNob29zZXJDb2xvciA9ICQoJy5jaG9vc2VyLmNob29zZXItY29sb3InKTtcbiAgY29uc3QgY29sb3JJdGVtID0gJCgnLmNvbG9yLWxpc3QgbGknKTtcbiAgY29uc3QgYnRuQ2F0YWxvZyA9ICQoJy5idG4tY2F0YWxvZycpO1xuICBjb25zdCBidG5DYXRlZ29yeSA9ICQoJy5idG4tY2F0ZWdvcnknKTtcbiAgY29uc3QgY2F0ZWdvcmllcyA9ICQoJy5jYXRlZ29yaWVzJyk7XG5cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgd3JhcHBlci5hbmltYXRlKHtvcGFjaXR5OiAxfSwgNTAwKTtcbiAgfSwgNTAwKTtcblxuICBwYWdlUmVwYWludCgpO1xuXG4gIHNldENvbG9ycygpO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIHBhZ2VSZXBhaW50KCk7XG4gIH0pO1xuXG4gICQoJ1tkYXRhLXJlbW92YWJsZS1jbG9zZV0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1yZW1vdmFibGVdJylcbiAgICAgIC5mYWRlT3V0KDQwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmRldGFjaCgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gICQoJy5oZWFkZXItc2VhcmNoIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtID0gJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLXNlYXJjaCcpO1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcbiAgICAgIGlmIChmb3JtLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgfVxuICB9KTtcblxuICAkKCcuZmllbGQtcmF0ZS1saXN0IGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLmluZGV4KCkgKyAxO1xuICAgICQodGhpcykucGFyZW50cygnLmZpZWxkLXJhdGUnKS5maW5kKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJykudmFsKHZhbHVlKTtcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5maWVsZC1yYXRlLWxpc3QnKS5maW5kKCdpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgIGlmIChpbmRleCA+PSB2YWx1ZSkge1xuICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmYS1yZWQnKS5hZGRDbGFzcygnZmEtZ3JleScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnZmEtZ3JleScpLmFkZENsYXNzKCdmYS1yZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgJCgnLmZpZWxkLWZpbGUgaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHZhbEFycmF5ID0gJCh0aGlzKS52YWwoKS5zcGxpdCgnXFxcXCcpO1xuICAgICQodGhpcykuc2libGluZ3MoJy5maWVsZC1maWxlLXRleHQnKS50ZXh0KHZhbEFycmF5W3ZhbEFycmF5Lmxlbmd0aCAtIDFdKTtcbiAgfSk7XG5cbiAgJCgnaW5wdXRbdHlwZT1cInRlbFwiXScpLm1hc2soXCIrNyAoOTk5KSA5OTktOTk5LTk5XCIpO1xuXG4gIGJ1cmdlci5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyJykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbmVkJyk7XG4gIH0pO1xuXG4gICQoJ1tkYXRhLWNhbGwtbW9kYWxdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRhcmdldCA9ICQodGhpcykuYXR0cignZGF0YS1jYWxsLW1vZGFsJyk7XG4gICAgY29uc3Qgc2Nyb2xsVmFsdWUgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgY29uc3QgbW9kYWwgPSAkKGBbZGF0YS1tb2RhbD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIGJvZHkuYWRkQ2xhc3MoJ21vZGFsLW9wZW5lZCcpO1xuICAgIG1vZGFsLmZhZGVJbigzMDApLmNzcyh7XG4gICAgICAnZGlzcGxheSc6ICdmbGV4JyxcbiAgICAgICd0b3AnOiBgJHtzY3JvbGxWYWx1ZX1weGBcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcubW9kYWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5oYXNDbGFzcygnbW9kYWwtY2xvc2UnKSB8fCAhdGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbC1pbm5lcicpLmxlbmd0aCkge1xuICAgICAgJCh0aGlzKS5mYWRlT3V0KDMwMCk7XG4gICAgICBib2R5LnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuZWQnKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlJyk7XG4gICAgfVxuICB9KTtcblxuICAkKCdbZGF0YS1zZWxlY3QtY29udHJvbF0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQodGhpcykucGFyZW50cygnW2RhdGEtc2VsZWN0XScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgJCgnW2RhdGEtc2VsZWN0XSB1bCBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykudGV4dCgpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdbZGF0YS1zZWxlY3QtY29udHJvbF0nKS50ZXh0KHZhbHVlKTtcbiAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwodmFsdWUpO1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgJCgnLmFtb3VudC1jaG9vc2VyLWNvbnRyb2wnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYW1vdW50RE9NID0gJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQnKTtcbiAgICBjb25zdCBhbW91bnRWYWx1ZSA9IHBhcnNlSW50KGFtb3VudERPTS52YWwoKSk7XG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Ftb3VudC1jaG9vc2VyLW1pbnVzJykpIHtcbiAgICAgIGlmIChhbW91bnRWYWx1ZSA+IDEpIHtcbiAgICAgICAgYW1vdW50RE9NLnZhbChhbW91bnRWYWx1ZSAtIDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYW1vdW50LWNob29zZXItcGx1cycpKSB7XG4gICAgICBhbW91bnRET00udmFsKGFtb3VudFZhbHVlICsgMSk7XG4gICAgfVxuICAgIGFtb3VudERPTS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgfSk7XG5cbiAgJCgnLmFtb3VudC1jaG9vc2VyIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjb3N0RE9NID0gJCh0aGlzKS5wYXJlbnRzKCcuYW1vdW50LWNob29zZXInKS5zaWJsaW5ncygnLmNhcmQtY29zdCcpLmNoaWxkcmVuKCcuY2FyZC1jb3N0LXZhbHVlJyk7XG4gICAgY29uc3QgYW1vdW50ID0gcGFyc2VJbnQoJCh0aGlzKS52YWwoKSk7XG4gICAgY29uc3QgaXRlbUNvc3QgPSBwYXJzZUludCgkKHRoaXMpLnBhcmVudHMoJy5hbW91bnQtY2hvb3NlcicpLmF0dHIoJ2RhdGEtY29zdCcpKTtcbiAgICBjb3N0RE9NLnRleHQoYW1vdW50ICogaXRlbUNvc3QgKyAnINGA0YPQsS4nKTtcbiAgfSk7XG5cbiAgJCgnLmNhdGVnb3JpZXMtaGFuZGxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykucGFyZW50cygnLmNhdGVnb3JpZXMnKS50b2dnbGVDbGFzcygnZHJvcHBlZC1kb3duJyk7XG4gIH0pO1xuXG4gIGNvbG9ySXRlbS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgY2hvb3Nlci5maW5kKCcuY2hvb3Nlci12YWx1ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuY2F0YWxvZy1icmFuZHMnKS5sZW5ndGggJiYgJCh3aW5kb3cpLndpZHRoKCkgPiA3NjdcbiAgICAgIHx8ICQodGhpcykuY2xvc2VzdCgnLmNob29zZXItY29sb3InKS5sZW5ndGggJiYgJCh3aW5kb3cpLndpZHRoKCkgPiA3NjcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoJCh0aGlzKS5wYXJlbnRzKCcuY2hvb3NlcicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5jaG9vc2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hvb3Nlci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBjaG9vc2VyLmZpbmQoJ3VsIGxpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgJCh0aGlzKS5jbG9zZXN0KCcuY2F0YWxvZy1icmFuZHMnKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS5odG1sKCk7XG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5jaG9vc2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmNob29zZXItY29sb3InKS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XG4gICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCcuY2hvb3Nlci12YWx1ZScpLmh0bWwodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoJCh0aGlzKS5maW5kKCcuY2hvb3Nlci1jb2xvci10ZXh0JykudGV4dCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnLmNob29zZXItdmFsdWUnKS5odG1sKHZhbHVlKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBjaG9vc2VyQ29sb3IuZmluZCgndWwgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS5maW5kKCcuY2hvb3Nlci1jb2xvci10ZXh0JykudGV4dCgpO1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XG4gICAgfVxuICB9KTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCdbZGF0YS1zZWxlY3RdJykubGVuZ3RoID09PSAwKSAkKCcuYWN0aXZlW2RhdGEtc2VsZWN0XScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5oZWFkZXItc2VhcmNoJykubGVuZ3RoID09PSAwKSAkKCcuaGVhZGVyLXNlYXJjaCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5jaG9vc2VyJykubGVuZ3RoID09PSAwKSBjaG9vc2VyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5KSB7XG4gICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5oZWFkZXItY2F0YWxvZycpLmxlbmd0aCA9PT0gMCAmJiB0YXJnZXQuY2xvc2VzdCgnLmJ0bi1jYXRhbG9nJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGJ0bkNhdGFsb2cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuaGVhZGVyLWNhdGFsb2cnKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0uYWN0aXZlIC5oZWFkZXItY2F0YWxvZy1zdWJtZW51IC5maXJzdC1pdGVtJykuZGV0YWNoKCk7XG4gICAgICAgICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0uYWN0aXZlIC5oZWFkZXItY2F0YWxvZy1zdWJtZW51JykuZmFkZU91dCgzMDApO1xuICAgICAgICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGJ0bkNhdGFsb2cub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJy5oZWFkZXItY2F0YWxvZycpLmZhZGVUb2dnbGUoMzAwKTtcbiAgICBidG5DYXRhbG9nQ2xpY2tlZCgkKHRoaXMpKTtcbiAgfSk7XG5cbiAgYnRuQ2F0ZWdvcnkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcbiAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCgnLmNhdGVnb3JpZXMnKS5mYWRlVG9nZ2xlKDMwMCk7XG4gICAgICAkKCcuY2F0ZWdvcmllcyAuY2F0ZWdvcmllcy1zdWJtZW51IC5maXJzdC1pdGVtJykuZGV0YWNoKCk7XG4gICAgICAkKCcuY2F0ZWdvcmllcyB1bCBsaS5hY3RpdmUgLmNhdGVnb3JpZXMtc3VibWVudScpLmZhZGVPdXQoMzAwKTtcbiAgICAgICQoJy5jYXRlZ29yaWVzIHVsIGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWhhbmRsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG4gICAgICBjYXRhbG9nTWVudUhhbmRsZUNsaWNrZWQoJCh0aGlzKSk7XG4gICAgfVxuICB9KTtcblxuICAkKCcuY2F0ZWdvcmllcy1tZW51LWhhbmRsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5jYXRlZ29yaWVzIHVsIGxpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCgnPGxpIGNsYXNzPVwiY2F0ZWdvcmllcy1zdWJtZW51LWl0ZW0gZmlyc3QtaXRlbVwiPjxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtbGVmdFwiPjwvaT7QktC10YDQvdGD0YLRjNGB0Y8g0L3QsNC30LDQtDwvbGk+JylcbiAgICAgICAgLnByZXBlbmRUbygkKHRoaXMpLnNpYmxpbmdzKCcuY2F0ZWdvcmllcy1zdWJtZW51JykpO1xuICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmNhdGVnb3JpZXMtc3VibWVudScpLmZhZGVJbigzMDApO1xuICAgIH1cbiAgfSk7XG5cbiAgJCgnLmhlYWRlci1jYXRhbG9nJykub24oJ2NsaWNrJywgJy5oZWFkZXItY2F0YWxvZy1zdWJtZW51LWl0ZW0uZmlyc3QtaXRlbScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItY2F0YWxvZy1zdWJtZW51JykuZmFkZU91dCgzMDApO1xuICAgICAgJCh0aGlzKS5kZXRhY2goKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0nKS5ob3ZlcihcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoICQod2luZG93KS53aWR0aCgpID4gMTE5OSApIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaG92ZXJlZCcpO1xuICAgICAgICBjb25zdCBzdWJtZW51ID0gJCh0aGlzKS5maW5kKCcuaGVhZGVyLWNhdGFsb2ctc3VibWVudScpO1xuICAgICAgICBpZiAoIHN1Ym1lbnUubGVuZ3RoICYmISQoJy5oZWFkZXItY2F0YWxvZyA+IC5oZWFkZXItY2F0YWxvZy1zdWJtZW51LmRlc2t0b3AtYWN0aXZlJykubGVuZ3RoICApIHtcbiAgICAgICAgICBzdWJtZW51LmFwcGVuZFRvKCQoJy5oZWFkZXItY2F0YWxvZycpKTtcbiAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd3aXRoLXN1Ym1lbnUnKTtcbiAgICAgICAgICBzdWJtZW51LmFkZENsYXNzKCdkZXNrdG9wLWFjdGl2ZScpO1xuICAgICAgICAgIHN1Ym1lbnUuY3NzKCd0b3AnLCAkKHRoaXMpLnBvc2l0aW9uKCkudG9wICsgJ3B4Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS5wb3NpdGlvbigpLnRvcCwgc3VibWVudS5jc3MoJ3RvcCcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCAkKHdpbmRvdykud2lkdGgoKSA+IDExOTkgKSB7XG4gICAgICAgIGlmICggJCh0aGlzKS5oYXNDbGFzcygnd2l0aC1zdWJtZW51JykpIHtcbiAgICAgICAgICBjb25zdCBzdWJtZW51ID0gJCgnLmhlYWRlci1jYXRhbG9nID4gLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUuZGVza3RvcC1hY3RpdmUnKTtcbiAgICAgICAgICBpZiAoICFzdWJtZW51LmlzKCc6aG92ZXInKSApIHtcbiAgICAgICAgICAgIG1lbnVJdGVtVW5ob3ZlcmVkKCQodGhpcykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdob3ZlcmVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICk7XG5cbiAgJCgnLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUnKS5ob3ZlcihcbiAgICBmdW5jdGlvbiAoKSB7fSxcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBwYXJlbnRNZW51SXRlbSA9ICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0uaG92ZXJlZC53aXRoLXN1Ym1lbnUnKTtcbiAgICAgIGlmICggIXBhcmVudE1lbnVJdGVtLmlzKCc6aG92ZXInKSApIHtcbiAgICAgICAgbWVudUl0ZW1VbmhvdmVyZWQocGFyZW50TWVudUl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcblxuICBjYXRlZ29yaWVzLm9uKCdjbGljaycsICcuY2F0ZWdvcmllcy1zdWJtZW51IGxpLmZpcnN0LWl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuY2F0ZWdvcmllcy1zdWJtZW51IGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuY2F0ZWdvcmllcy1zdWJtZW51JykuZmFkZU91dCgzMDApO1xuICAgICAgJCh0aGlzKS5kZXRhY2goKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJy5maWVsZC1maWxlIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykudmFsKCkuc3BsaXQoJ1xcXFwnKTtcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZmllbGQtZmlsZS10ZXh0JykudGV4dCh2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXSk7XG4gIH0pO1xuXG4gICQoJy5maWVsZC1yYXRlIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoICQodGhpcykuaXMoJzpjaGVja2VkJykgKSB7XG4gICAgICBmaWVsZFJhdGVSZW5kZXIoJCh0aGlzKSk7XG4gICAgfVxuICB9KTtcblxuICAkKCcuZmllbGQtcmF0ZSBsYWJlbCcpLmhvdmVyKFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZpZWxkUmF0ZVJlbmRlcigkKHRoaXMpLnByZXYoJ2lucHV0JykpO1xuICAgIH0sXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgY2hlY2tlZCA9ICQodGhpcykuc2libGluZ3MoJ2lucHV0OmNoZWNrZWQnKTtcbiAgICAgIGlmICggY2hlY2tlZC5sZW5ndGggKSB7XG4gICAgICAgIGZpZWxkUmF0ZVJlbmRlcihjaGVja2VkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpZWxkUmF0ZVJlbmRlcigkKCcuZmllbGQtcmF0ZScpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICBmdW5jdGlvbiBmaWVsZFJhdGVSZW5kZXIgKCBpbnB1dCApIHtcbiAgICBsZXQgZmllbGQgPSAkKGlucHV0KTtcbiAgICBjb25zdCB2YWx1ZSA9ICggZmllbGQuaGFzQ2xhc3MoJ2ZpZWxkLXJhdGUnKSApID8gMCA6IHBhcnNlSW50KCQoaW5wdXQpLnZhbCgpKTtcbiAgICBpZiAoIHZhbHVlID09PSAwKSB7XG4gICAgICBmaWVsZCA9IGZpZWxkLmZpbmQoJ2lucHV0JykuZmlyc3QoKTtcbiAgICB9XG4gICAgZmllbGQucGFyZW50KCkuZmluZCgnaW5wdXRbdHlwZT1yYWRpb10nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgY29uc3Qgc3RhciA9ICQoaXRlbSkubmV4dCgnbGFiZWwnKS5maW5kKCdpJyk7XG4gICAgICBpZiAoaW5kZXggPCB2YWx1ZSkge1xuICAgICAgICBzdGFyLnJlbW92ZUNsYXNzKCdmYS1zdGFyLW8nKS5hZGRDbGFzcygnZmEtc3RhcicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Rhci5yZW1vdmVDbGFzcygnZmEtc3RhcicpLmFkZENsYXNzKCdmYS1zdGFyLW8nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ0bkNhdGFsb2dDbGlja2VkIChidG4pIHtcbiAgICAkKCcuaGVhZGVyLWNhdGFsb2ctbWVudS1pdGVtLmFjdGl2ZSAuaGVhZGVyLWNhdGFsb2ctc3VibWVudSAuZmlyc3QtaXRlbScpLmRldGFjaCgpO1xuICAgICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0uYWN0aXZlIC5oZWFkZXItY2F0YWxvZy1zdWJtZW51JykuZmFkZU91dCgzMDApO1xuICAgICQoJy5oZWFkZXItY2F0YWxvZy1tZW51LWl0ZW0uYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2F0YWxvZ01lbnVIYW5kbGVDbGlja2VkIChoYW5kbGUpIHtcbiAgICAkKGhhbmRsZSkucGFyZW50cygnLmhlYWRlci1jYXRhbG9nLW1lbnUtaXRlbScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCc8bGkgY2xhc3M9XCJoZWFkZXItY2F0YWxvZy1zdWJtZW51LWl0ZW0gZmlyc3QtaXRlbVwiPjxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtbGVmdFwiPjwvaT7QktC10YDQvdGD0YLRjNGB0Y8g0L3QsNC30LDQtDwvbGk+JylcbiAgICAgIC5wcmVwZW5kVG8oJChoYW5kbGUpLnNpYmxpbmdzKCcuaGVhZGVyLWNhdGFsb2ctc3VibWVudScpKTtcbiAgICAkKGhhbmRsZSkuc2libGluZ3MoJy5oZWFkZXItY2F0YWxvZy1zdWJtZW51JykuZmFkZUluKDMwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBtZW51SXRlbVVuaG92ZXJlZCAobWVudUl0ZW0pIHtcbiAgICBjb25zdCBzdWJtZW51ID0gJCgnLmhlYWRlci1jYXRhbG9nID4gLmhlYWRlci1jYXRhbG9nLXN1Ym1lbnUuZGVza3RvcC1hY3RpdmUnKTtcbiAgICAkKG1lbnVJdGVtKS5yZW1vdmVDbGFzcygnaG92ZXJlZCcpO1xuICAgICQobWVudUl0ZW0pLnJlbW92ZUNsYXNzKCd3aXRoLXN1Ym1lbnUnKTtcbiAgICBzdWJtZW51LnJlbW92ZUNsYXNzKCdkZXNrdG9wLWFjdGl2ZScpO1xuICAgIHN1Ym1lbnUuYXBwZW5kVG8oJChtZW51SXRlbSkpO1xuICAgIHN1Ym1lbnUuY3NzKCd0b3AnLCAnYXV0bycpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFnZVJlcGFpbnQoKSB7XG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XG4gICAgICByZW5kZXJNb2JpbGVIZWFkZXIoKTtcbiAgICAgIHJlbmRlck1vYmlsZUZvb3RlcigpO1xuICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG4gICAgICByZW5kZXJUYWJsZXRIZWFkZXIoKTtcbiAgICAgIHJlbmRlclRhYmxldEZvb3RlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkZXJTZWFyY2gucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdtZW51LW9wZW5lZCcpO1xuICAgICAgcmVuZGVyRGVza3RvcEhlYWRlcigpO1xuICAgICAgcmVuZGVyRGVza3RvcEZvb3RlcigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUhlYWRlcigpIHtcbiAgICBoZWFkZXJTZWFyY2guaW5zZXJ0QmVmb3JlKGhlYWRlckNhcnQpO1xuICAgIGhlYWRlckNvbnRhY3RzLmFwcGVuZFRvKGhlYWRlck5hdik7XG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xuICAgIGNhdGVnb3JpZXMuaW5zZXJ0QWZ0ZXIoYnRuQ2F0ZWdvcnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyVGFibGV0SGVhZGVyKCkge1xuICAgIGhlYWRlclNlYXJjaC5pbnNlcnRCZWZvcmUoaGVhZGVyQ2FydCk7XG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcbiAgICBoZWFkZXJBZGRyZXNzLmFwcGVuZFRvKGhlYWRlck5hdik7XG4gICAgY2F0ZWdvcmllcy5pbnNlcnRBZnRlcihidG5DYXRlZ29yeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJEZXNrdG9wSGVhZGVyKCkge1xuICAgIGhlYWRlclNlYXJjaC5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xuICAgIGhlYWRlckNvbnRhY3RzLmFwcGVuZFRvKGhlYWRlckJvdHRvbSk7XG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xuICAgIGNhdGVnb3JpZXMuYXBwZW5kVG8oJCgnLndyYXBwZXItc2lkZWJhciAnKSk7XG4gICAgYnRuQ2F0YWxvZ0NsaWNrZWQoYnRuQ2F0YWxvZyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVGb290ZXIoKSB7XG4gICAgZm9vdGVyU3Vic2NyaWJlLmluc2VydEFmdGVyKGZvb3RlckNvcHlyaWdodHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyVGFibGV0Rm9vdGVyKCkge1xuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BGb290ZXIoKSB7XG4gICAgICBmb290ZXJTdWJzY3JpYmUuaW5zZXJ0QmVmb3JlKGZvb3RlclNvY2lhbCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDb2xvcnMgKCkge1xuICAgIGNvbG9ySXRlbS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICQodGhpcykuYXR0cignZGF0YS1iYWNrZ3JvdW5kJywgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKSk7XG4gICAgfSk7XG4gIH1cblxufSk7XG4iLCIkKGZ1bmN0aW9uICgpIHtcblxuICBjb25zdCBib2R5ID0gJCgnYm9keScpO1xuICBjb25zdCBjYXRhbG9nRmlsdGVyID0gJCgnLmNhdGFsb2ctZmlsdGVyJyk7XG4gIGNvbnN0IGNhdGFsb2dBcnRpY2xlcyA9ICQoJy5jYXRhbG9nLWFydGljbGVzJyk7XG4gIGNvbnN0IGNhdGFsb2dCYW5uZXIgPSAkKCcuY2F0YWxvZy1iYW5uZXInKTtcbiAgY29uc3QgYnJlYWRjcnVtYnMgPSAkKCcuYnJlYWRjcnVtYnMnKTtcbiAgY29uc3QgY2F0YWxvZ0FzaWRlID0gJCgnLmNhdGFsb2ctYXNpZGUnKTtcbiAgY29uc3QgZmlsdGVyQ29zdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItY29zdCcpO1xuICBjb25zdCBmaWx0ZXJDb3N0SGFuZGxlcyA9W1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItY29zdC1mcm9tJyksXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1jb3N0LXRvJylcbiAgXTtcblxuICBjYXRhbG9nUmVwYWludCgpO1xuXG4gIHNldENob29zZXJDb2xvcnMoKTtcblxuICBpZiAoZmlsdGVyQ29zdCkge1xuICAgIG5vVWlTbGlkZXIuY3JlYXRlKGZpbHRlckNvc3QsIHtcbiAgICAgIHN0YXJ0OiBbMTAwMCwgNTAwMF0sXG4gICAgICBzdGVwOiAxMDAsXG4gICAgICBtYXJnaW46IDEwMDAsXG4gICAgICBjb25uZWN0OiB0cnVlLFxuICAgICAgcmFuZ2U6IHtcbiAgICAgICAgJ21pbic6IDAsXG4gICAgICAgICdtYXgnOiA4MDAwXG4gICAgICB9XG4gICAgfSk7XG4gICAgZmlsdGVyQ29zdEhhbmRsZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBmaWx0ZXJDb3N0Lm5vVWlTbGlkZXIuc2V0SGFuZGxlKGluZGV4LCBmaWx0ZXJDb3N0SGFuZGxlc1tpbmRleF0udmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZmlsdGVyQ29zdC5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcbiAgICAgIGZpbHRlckNvc3RIYW5kbGVzW2hhbmRsZV0udmFsdWUgPSBNYXRoLnRydW5jKHZhbHVlc1toYW5kbGVdKTtcbiAgICB9KTtcbiAgfVxuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGNhdGFsb2dSZXBhaW50KCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGNhdGFsb2dSZXBhaW50ICgpIHtcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG4gICAgICByZW5kZXJNb2JpbGVDYXRhbG9nKCk7XG4gICAgfSAgZWxzZSB7XG4gICAgICByZW5kZXJEZXNrdG9wQ2F0YWxvZygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUNhdGFsb2cgKCkge1xuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuaGVhZGVyJykubmV4dCgnLndyYXBwZXItaW5uZXInKSk7XG4gICAgaWYgKGNhdGFsb2dGaWx0ZXIuZmluZCgnLm1vZGFsLWNsb3NlJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAkKCc8ZGl2IGNsYXNzPVwibW9kYWwtY2xvc2VcIj48L2Rpdj4nKS5wcmVwZW5kVG8oY2F0YWxvZ0ZpbHRlcik7XG4gICAgfVxuICAgIGNhdGFsb2dGaWx0ZXIuYXBwZW5kVG8oJy5tb2RhbFtkYXRhLW1vZGFsPVwiZmlsdGVyXCJdJyk7XG4gICAgY2F0YWxvZ0FydGljbGVzLmluc2VydEFmdGVyKCcucGFnaW5hdGlvbicpO1xuICAgIGNhdGFsb2dCYW5uZXIuaW5zZXJ0QWZ0ZXIoY2F0YWxvZ0FydGljbGVzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BDYXRhbG9nICgpIHtcbiAgICBicmVhZGNydW1icy5wcmVwZW5kVG8oJCgnLmNhdGFsb2ctY29udGVudCcpKTtcbiAgICBib2R5LnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuZWQnKTtcbiAgICAkKCcubW9kYWxbZGF0YS1tb2RhbD1cImZpbHRlclwiXScpLmNzcyh7XG4gICAgICAnZGlzcGxheSc6ICdub25lJyxcbiAgICAgICd0b3AnOiAnYXV0bydcbiAgICB9KTtcbiAgICBpZiAoY2F0YWxvZ0ZpbHRlci5maW5kKCcubW9kYWwtY2xvc2UnKS5sZW5ndGgpIHtcbiAgICAgICQoY2F0YWxvZ0ZpbHRlci5maW5kKCcubW9kYWwtY2xvc2UnKSkuZGV0YWNoKCk7XG4gICAgfVxuICAgIGNhdGFsb2dGaWx0ZXIucHJlcGVuZFRvKGNhdGFsb2dBc2lkZSk7XG4gICAgY2F0YWxvZ0FydGljbGVzLmFwcGVuZFRvKGNhdGFsb2dBc2lkZSk7XG4gICAgY2F0YWxvZ0Jhbm5lci5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0Q2hvb3NlckNvbG9ycyAoKSB7XG4gICAgJCgnLmNob29zZXItY29sb3IgbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICQodGhpcykuYXR0cignZGF0YS1iYWNrZ3JvdW5kJywgJCh0aGlzKS5maW5kKCdzcGFuJykuZXEoMCkuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJykpO1xuICAgIH0pO1xuICB9XG5cbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xuXG4gIGNvbnN0IGhlcm8gPSAkKCcuaGVybycpO1xuXG4gIGlmIChoZXJvLmxlbmd0aCkge1xuICAgIGhlcm8uc2xpY2soe1xuICAgICAgZG90czogdHJ1ZSxcbiAgICAgIGFycm93czogZmFsc2UsXG4gICAgICBmYWRlOiB0cnVlLFxuICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICBhdXRvcGxheVNwZWVkOiA1MDAwXG4gICAgfSk7XG4gIH1cblxufSk7XG4iLCIkKGZ1bmN0aW9uICgpIHtcblxuICBjb25zdCBpdGVtU2xpZGVyTGFyZ2UgPSAkKCcuaXRlbS1pbWFnZS1sYXJnZScpO1xuICBjb25zdCBpdGVtU2xpZGVyU21hbGwgPSAkKCcuaXRlbS1pbWFnZS1zbWFsbCcpO1xuICBjb25zdCBwYXJhbXMgPSAkKCcuaXRlbS1wYXJhbXMnKTtcbiAgY29uc3QgY29sb3JTbGlkZXIgPSAkKCcuY2hvb3Nlci5jaG9vc2VyLWNvbG9yIHVsJyk7XG4gIGNvbnN0IGl0ZW1MaXN0ID0gJCgnLml0ZW0gLml0ZW0tbGlzdCcpO1xuICBjb25zdCBpdGVtSW1hZ2UgPSAkKCcuaXRlbS1pbWFnZScpO1xuICBjb25zdCBpdGVtRm9ybUhlYWRlciA9ICQoJy5pdGVtLWZvcm0taGVhZGVyJyk7XG4gIGNvbnN0IGl0ZW1EZWxpdmVyeSA9ICQoJy5pdGVtLWRlbGl2ZXJ5Jyk7XG4gIGNvbnN0IGl0ZW1Gb3JtID0gJCgnLml0ZW0tZm9ybScpO1xuXG4gIGl0ZW1SZXBhaW50KCk7XG5cbiAgcmVwYWludENvbG9yU2xpZGVyKGNvbG9yU2xpZGVyKTtcblxuICBpZiAocGFyYW1zLmxlbmd0aCkge1xuICAgIHBhcmFtcy5zbGljayh7XG4gICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGl0ZW1TbGlkZXJMYXJnZS5sZW5ndGggJiYgaXRlbVNsaWRlclNtYWxsLmxlbmd0aCkge1xuXG4gICAgaXRlbVNsaWRlckxhcmdlLnNsaWNrKHtcbiAgICAgIGFycm93czogZmFsc2UsXG4gICAgICBmYWRlOiB0cnVlLFxuICAgICAgYXNOYXZGb3I6ICcuaXRlbS1pbWFnZS1zbWFsbCdcbiAgICB9KTtcblxuICAgIGl0ZW1TbGlkZXJTbWFsbC5zbGljayh7XG4gICAgICBzbGlkZXNUb1Nob3c6IDQsXG4gICAgICBmb2N1c09uU2VsZWN0OiB0cnVlLFxuICAgICAgYXNOYXZGb3I6ICcuaXRlbS1pbWFnZS1sYXJnZScsXG4gICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcblxuICB9XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmVwYWludENvbG9yU2xpZGVyKGNvbG9yU2xpZGVyKTtcbiAgICBpdGVtUmVwYWludCgpO1xuICB9KTtcblxuICBmdW5jdGlvbiByZXBhaW50Q29sb3JTbGlkZXIoY29sb3JTbGlkZXIpIHtcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcbiAgICAgICQoY29sb3JTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcbiAgICAgICAgICAkKHRoaXMpLnNsaWNrKCd1bnNsaWNrJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKGNvbG9yU2xpZGVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xuICAgICAgICAgICQodGhpcykuc2xpY2soe1xuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxuICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGl0ZW1SZXBhaW50KCkge1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgcmVuZGVyTW9iaWxlSXRlbSgpO1xuICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG4gICAgICByZW5kZXJUYWJsZXRJdGVtKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbmRlckRlc2t0b3BJdGVtKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyTW9iaWxlSXRlbSAoKSB7XG4gICAgaXRlbUxpc3QuaW5zZXJ0QWZ0ZXIoaXRlbUZvcm1IZWFkZXIpO1xuICAgIGl0ZW1EZWxpdmVyeS5pbnNlcnRBZnRlcihpdGVtRm9ybSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJUYWJsZXRJdGVtICgpIHtcbiAgICBpdGVtTGlzdC5hcHBlbmRUbyhpdGVtSW1hZ2UpO1xuICAgIGl0ZW1EZWxpdmVyeS5pbnNlcnRBZnRlcihpdGVtRm9ybSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJEZXNrdG9wSXRlbSAoKSB7XG4gICAgaXRlbUxpc3QuYXBwZW5kVG8oaXRlbUltYWdlKTtcbiAgICBpdGVtRGVsaXZlcnkuYXBwZW5kVG8oaXRlbUZvcm0pO1xuICB9XG5cbiAgJCgnLml0ZW0tdGFiLWhlYWRlciBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5pdGVtLXRhYi1oZWFkZXInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGFiJyk7XG4gICAgICAkKCcuaXRlbS10YWItY29udGVudCA+IGxpJykuZmFkZU91dCgwKTtcbiAgICAgICQoJy5pdGVtLXRhYi1jb250ZW50JykuZmluZCgnbGlbZGF0YS10YWI9XCInICsgY3VycmVudCArICdcIl0nKS5mYWRlSW4oKTtcbiAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5pdGVtLXRhYi1oZWFkZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG5cbiAgICB9XG4gIH0pO1xuXG4gICQoJy5pdGVtLWxpc3QtYWxsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogJCgnLml0ZW0tdGFiLWNvbnRlbnQnKS5vZmZzZXQoKS50b3AgLSAxMjBcbiAgICB9LCA0MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJy5pdGVtLXRhYi1oZWFkZXIgbGlbZGF0YS10YWI9XCJwYXJhbXNcIl0nKVxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJCgnLml0ZW0tdGFiLWNvbnRlbnQgbGlbZGF0YS10YWI9XCJwYXJhbXNcIl0nKVxuICAgICAgICAuZmFkZUluKCkuc2libGluZ3MoKS5mYWRlT3V0KDApO1xuICAgIH0pO1xuICB9KTtcblxufSk7IiwiJChmdW5jdGlvbiAoKSB7XG5cbiAgY29uc3QgbW9iaWxlU2xpZGVyID0gJCgnLmFkdmFudGFnZXMgdWwsIC5yZXZpZXdzLXJhdGUnKTtcblxuICByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcik7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmVwYWludE1vYmlsZVNsaWRlcihtb2JpbGVTbGlkZXIpO1xuICB9KTtcblxuICBmdW5jdGlvbiByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcikge1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgJChtb2JpbGVTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ3NsaWNrLXNsaWRlcicpKSB7XG4gICAgICAgICAgJCh0aGlzKS5zbGljaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgJChtb2JpbGVTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcbiAgICAgICAgICAkKHRoaXMpLnNsaWNrKCd1bnNsaWNrJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG59KTtcbiIsIiQoZnVuY3Rpb24gKCkge1xuXG4gIGNvbnN0IHJldmlld3NSZXN1bHRQZXJjZW50ID0gJCgnLnJldmlld3MtcmVzdWx0LXBlcmNlbnQnKTtcblxuICByZXZpZXdzUmVzdWx0UGVyY2VudC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KCQodGhpcykuYXR0cignZGF0YS1yZXN1bHQtcGVyY2VudCcpKTtcbiAgICBjb25zdCB2YWx1ZURPTSA9ICQodGhpcykuZmluZCgnLnJldmlld3MtcmVzdWx0LXBlcmNlbnQtdmFsdWUnKTtcbiAgICAkKCc8ZGl2IGNsYXNzPVwicmV2aWV3cy1yZXN1bHQtcGVyY2VudC1jb2xvclwiPjwvZGl2PicpXG4gICAgICAuYXBwZW5kVG8odmFsdWVET00pLmNzcygnd2lkdGgnLCB2YWx1ZSArICclJyk7XG4gIH0pO1xuXG4gICQoJy5yZXZpZXdzLWxpc3QgLnJldmlld3MtY2FyZCBwIC5zaG93LWFsbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYWxsLXRleHQnKS5jc3MoJ2Rpc3BsYXknLCAnaW5saW5lJyk7XG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmRvdHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICQodGhpcykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgfSk7XG5cbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xuXG4gIGNvbnN0IHNsaWRlcnMgPSAkKCcuY2VydGlmaWNhdGVzLWxpc3QsIC5wcm9kdWN0LWxpc3QsIC5hcnRpY2xlcy1saXN0LCAucmV2aWV3cy1zbGlkZXInKTtcblxuICBpZiAoc2xpZGVycy5sZW5ndGgpIHtcblxuICAgIHNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygncHJvZHVjdC1saXN0JykgfHwgJCh0aGlzKS5oYXNDbGFzcygnY2VydGlmaWNhdGVzLWxpc3QnKSkge1xuICAgICAgICAkKHRoaXMpLnNsaWNrKHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDQsXG4gICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDkzMCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHRoaXMpLnNsaWNrKHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgdmVydGljYWw6ZmFsc2UsXG4gICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgJCh0aGlzKS5maW5kKCcuc2xpY2stcHJldicpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH0pO1xuXG4gICAgc2xpZGVycy5vbignYmVmb3JlQ2hhbmdlJywgZnVuY3Rpb24oZXZlbnQsIHNsaWNrLCBjdXJyZW50U2xpZGUsIG5leHRTbGlkZSkge1xuICAgICAgc2V0U2xpZGVyQXJyb3dzKCQodGhpcyksIG5leHRTbGlkZSk7XG4gICAgfSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNsaWRlckFycm93cyAoc2xpZGVyLCBuZXh0U2xpZGUpIHtcbiAgICBjb25zdCBwcmV2ID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1wcmV2Jyk7XG4gICAgY29uc3QgbmV4dCA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stbmV4dCcpO1xuICAgIGNvbnN0IHNpemUgPSAkKHNsaWRlcikuZmluZCgnLnNsaWNrLXNsaWRlJykubGVuZ3RoO1xuICAgIGNvbnN0IHZpc2libGUgPSAkKHNsaWRlcikuZmluZCgnLnNsaWNrLXNsaWRlLnNsaWNrLWFjdGl2ZScpLmxlbmd0aDtcbiAgICBjb25zdCBzbWFsbEFtb3VudCA9IHZpc2libGUgKyAxID09PSBzaXplO1xuICAgIGlmIChuZXh0U2xpZGUgPT09IDApIHtcbiAgICAgIHByZXYuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICBuZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgICBpZiAoc21hbGxBbW91bnQpIHtcbiAgICAgIGlmIChuZXh0U2xpZGUgKyB2aXNpYmxlID49IHNpemUpIHtcbiAgICAgICAgbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChuZXh0U2xpZGUgKyB2aXNpYmxlID4gc2l6ZSAtIDEpIHtcbiAgICAgICAgbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn0pO1xuIl19
