"use strict";$(function(){var e=$(".wrapper"),s=$("body"),t=$(".header-bottom .wrapper-inner"),a=$(".header-nav"),i=$(".header .contacts"),n=$(".header .address-hours"),o=$(".header-search"),l=$(".header-cart"),c=$(".footer-subscribe"),d=$(".footer-copyrights"),r=$(".footer-social"),h=$(".chooser");function p(){$(window).width()<768?(o.insertBefore(l),i.appendTo(a),n.appendTo(a),c.insertAfter(d)):($(window).width()<1200?(o.insertBefore(l),i.appendTo(t),n.appendTo(a)):(o.removeClass("active"),$(".header").removeClass("menu-opened"),o.appendTo(t),i.appendTo(t),n.appendTo(t)),c.insertBefore(r))}setTimeout(function(){e.animate({opacity:1},500)},500),p(),$(window).on("resize",function(){p()}),$("[data-removable-close]").on("click",function(){$(this).parents("[data-removable]").fadeOut(400,function(){$(this).detach()})}),$('.header-search button[type="submit"]').on("click",function(e){e.preventDefault();var t=$(this).parents(".header-search");$(window).width()<1200?t.hasClass("active")?t.submit():t.addClass("active"):t.submit()}),$(".field-rate-list i").on("click",function(){var s=$(this).index()+1;$(this).parents(".field-rate").find('input[type="hidden"]').val(s),$(this).parents(".field-rate-list").find("i").each(function(e,t){s<=e?$(t).removeClass("fa-red").addClass("fa-grey"):$(t).removeClass("fa-grey").addClass("fa-red")})}),$('.field-file input[type="file"]').on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$('input[type="tel"]').mask("+7 (999) 999-999-99"),$(".header-burger").on("click",function(){$(this).parents(".header").toggleClass("menu-opened")}),$("[data-call-modal]").on("click",function(){var e=$(this).attr("data-call-modal"),t=$(window).scrollTop();s.addClass("modal-opened"),$('[data-modal="'.concat(e,'"]')).fadeIn(300).css({display:"flex",top:"".concat(t,"px")})}),$(".modal").on("click",function(e){var t=$(e.target);!t.hasClass("modal-close")&&t.closest(".modal-inner").length||($(this).fadeOut(300),s.removeClass("modal-opened"))}),$("[data-select-control]").on("click",function(){$(this).parents("[data-select]").hasClass("active")?$(this).parents("[data-select]").removeClass("active"):($("[data-select]").removeClass("active"),$(this).parents("[data-select]").addClass("active"))}),$("[data-select] ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).addClass("active"),$(this).siblings(".active").removeClass("active"),$(this).parents("ul").siblings("[data-select-control]").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents("[data-select]").removeClass("active")}}),$(".amount-chooser-control").on("click",function(){var e=$(this).siblings("input"),t=parseInt(e.val());$(this).hasClass("amount-chooser-minus")?1<t&&e.val(t-1):$(this).hasClass("amount-chooser-plus")&&e.val(t+1),e.trigger("change")}),$(".amount-chooser input").on("change",function(){var e=$(this).parents(".amount-chooser").siblings(".card-cost").children(".card-cost-value"),t=parseInt($(this).val()),s=parseInt($(this).parents(".amount-chooser").attr("data-cost"));e.text(t*s+" руб.")}),h.find(".chooser-value").on("click",function(){if($(this).closest(".catalog-brands").length&&767<$(window).width())return!1;$(this).parents(".chooser").toggleClass("active")}),h.find("ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).parents("ul").siblings(".chooser-value").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents(".chooser").removeClass("active")}}),$(document).on("click",function(e){var t=$(e.target);0===t.closest("[data-select]").length&&$(".active[data-select]").removeClass("active"),0===t.closest(".header-search").length&&$(".header-search").removeClass("active"),0===t.closest(".chooser").length&&h.removeClass("active")})}),$(function(){var e=$(".advantages ul");function t(){$(window).width()<768?e.hasClass("slick-slider")||e.slick({infinite:!1}):e.hasClass("slick-slider")&&e.slick("unslick")}e.length&&t(),$(window).on("resize",function(){e.length&&t()})}),$(function(){var e=$("body"),t=$(".catalog-filter"),s=$(".catalog-articles"),a=$(".catalog-banner"),i=$(".breadcrumbs"),n=$(".catalog-aside"),o=document.getElementById("filter-cost"),l=[document.getElementById("filter-cost-from"),document.getElementById("filter-cost-to")];function c(){$(window).width()<1200?function(){i.prependTo($(".header").next(".wrapper-inner")),0===t.find(".modal-close").length&&$('<div class="modal-close"></div>').prependTo(t);t.appendTo('.modal[data-modal="filter"]'),s.insertAfter(".pagination"),a.insertAfter(s)}():function(){i.prependTo($(".catalog-content")),e.removeClass("modal-opened"),$('.modal[data-modal="filter"]').css({display:"none",top:"auto"}),t.find(".modal-close").length&&$(t.find(".modal-close")).detach();t.prependTo(n),s.appendTo(n),a.appendTo(n)}()}c(),o&&(noUiSlider.create(o,{start:[1e3,5e3],step:100,margin:1e3,connect:!0,range:{min:0,max:8e3}}),l.forEach(function(e,t){e.addEventListener("change",function(){o.noUiSlider.setHandle(t,l[t].value)})}),o.noUiSlider.on("update",function(e,t){l[t].value=Math.trunc(e[t])})),$(window).on("resize",function(){c()})}),$(function(){var e=$(".hero");e.length&&e.slick({dots:!0,arrows:!1,fade:!0,autoplay:!0,autoplaySpeed:5e3})}),$(function(){var e=$(".certificates-list, .product-list, .articles-list, .reviews-list");e.length&&(e.each(function(){$(this).hasClass("product-list")||$(this).hasClass("certificates-list")?$(this).slick({slidesToShow:4,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3,infinite:!1}},{breakpoint:930,settings:{slidesToShow:2,infinite:!1}},{breakpoint:768,settings:{infinite:!0,slidesToShow:1}}]}):$(this).slick({slidesToShow:2,vertical:!1,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,infinite:!1,vertical:!0}},{breakpoint:768,settings:{slidesToShow:1,infinite:!0,vertical:!1}}]}),$(this).find(".slick-prev").addClass("disabled")}),e.on("beforeChange",function(e,t,s,a){!function(e,t){var s=$(e).find(".slick-prev"),a=$(e).find(".slick-next"),i=$(e).find(".slick-slide").length,n=$(e).find(".slick-slide.slick-active").length,o=n+1===i;0===t?(s.addClass("disabled"),a.removeClass("disabled")):s.removeClass("disabled");o?i<=t+n?(a.addClass("disabled"),s.removeClass("disabled")):a.removeClass("disabled"):i-1<t+n?(a.addClass("disabled"),s.removeClass("disabled")):a.removeClass("disabled")}($(this),a)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhZHZhbnRhZ2VzLmpzIiwiY2F0YWxvZy5qcyIsImhlcm8uanMiLCJzbGlkZXJzLmpzIl0sIm5hbWVzIjpbIiQiLCJ3cmFwcGVyIiwiYm9keSIsImhlYWRlckJvdHRvbSIsImhlYWRlck5hdiIsImhlYWRlckNvbnRhY3RzIiwiaGVhZGVyQWRkcmVzcyIsImhlYWRlclNlYXJjaCIsImhlYWRlckNhcnQiLCJmb290ZXJTdWJzY3JpYmUiLCJmb290ZXJDb3B5cmlnaHRzIiwiZm9vdGVyU29jaWFsIiwiY2hvb3NlciIsInBhZ2VSZXBhaW50Iiwid2luZG93Iiwid2lkdGgiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRUbyIsImluc2VydEFmdGVyIiwicmVtb3ZlQ2xhc3MiLCJzZXRUaW1lb3V0IiwiYW5pbWF0ZSIsIm9wYWNpdHkiLCJvbiIsInRoaXMiLCJwYXJlbnRzIiwiZmFkZU91dCIsImRldGFjaCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJmb3JtIiwiaGFzQ2xhc3MiLCJzdWJtaXQiLCJhZGRDbGFzcyIsInZhbHVlIiwiaW5kZXgiLCJmaW5kIiwidmFsIiwiZWFjaCIsImVsZW1lbnQiLCJ2YWxBcnJheSIsInNwbGl0Iiwic2libGluZ3MiLCJ0ZXh0IiwibGVuZ3RoIiwibWFzayIsInRvZ2dsZUNsYXNzIiwidGFyZ2V0IiwiYXR0ciIsInNjcm9sbFZhbHVlIiwic2Nyb2xsVG9wIiwiY29uY2F0IiwiZmFkZUluIiwiY3NzIiwiZGlzcGxheSIsInRvcCIsImNsb3Nlc3QiLCJhbW91bnRET00iLCJhbW91bnRWYWx1ZSIsInBhcnNlSW50IiwidHJpZ2dlciIsImNvc3RET00iLCJjaGlsZHJlbiIsImFtb3VudCIsIml0ZW1Db3N0IiwiZG9jdW1lbnQiLCJhZHZhbnRhZ2VzIiwicmVwYWludEFkdmFudGFnZXMiLCJzbGljayIsImluZmluaXRlIiwiY2F0YWxvZ0ZpbHRlciIsImNhdGFsb2dBcnRpY2xlcyIsImNhdGFsb2dCYW5uZXIiLCJicmVhZGNydW1icyIsImNhdGFsb2dBc2lkZSIsImZpbHRlckNvc3QiLCJnZXRFbGVtZW50QnlJZCIsImZpbHRlckNvc3RIYW5kbGVzIiwiY2F0YWxvZ1JlcGFpbnQiLCJwcmVwZW5kVG8iLCJuZXh0IiwicmVuZGVyTW9iaWxlQ2F0YWxvZyIsInJlbmRlckRlc2t0b3BDYXRhbG9nIiwibm9VaVNsaWRlciIsImNyZWF0ZSIsInN0YXJ0Iiwic3RlcCIsIm1hcmdpbiIsImNvbm5lY3QiLCJyYW5nZSIsIm1pbiIsIm1heCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SGFuZGxlIiwidmFsdWVzIiwiaGFuZGxlIiwiTWF0aCIsInRydW5jIiwiaGVybyIsImRvdHMiLCJhcnJvd3MiLCJmYWRlIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwic2xpZGVycyIsInNsaWRlc1RvU2hvdyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJ2ZXJ0aWNhbCIsImN1cnJlbnRTbGlkZSIsIm5leHRTbGlkZSIsInNsaWRlciIsInByZXYiLCJzaXplIiwidmlzaWJsZSIsInNtYWxsQW1vdW50Iiwic2V0U2xpZGVyQXJyb3dzIl0sIm1hcHBpbmdzIjoiYUFBQUEsRUFBRSxXQUVBLElBQU1DLEVBQVVELEVBQUUsWUFDWkUsRUFBT0YsRUFBRSxRQUNURyxFQUFlSCxFQUFFLGlDQUNqQkksRUFBWUosRUFBRSxlQUNkSyxFQUFpQkwsRUFBRSxxQkFDbkJNLEVBQWdCTixFQUFFLDBCQUNsQk8sRUFBZVAsRUFBRSxrQkFDakJRLEVBQWFSLEVBQUUsZ0JBQ2ZTLEVBQWtCVCxFQUFFLHFCQUNwQlUsRUFBbUJWLEVBQUUsc0JBQ3JCVyxFQUFlWCxFQUFFLGtCQUNqQlksRUFBVVosRUFBRSxZQThJbEIsU0FBU2EsSUFDSGIsRUFBRWMsUUFBUUMsUUFBVSxLQWV4QlIsRUFBYVMsYUFBYVIsR0FDMUJILEVBQWVZLFNBQVNiLEdBQ3hCRSxFQUFjVyxTQUFTYixHQWdCdkJLLEVBQWdCUyxZQUFZUixLQTlCakJWLEVBQUVjLFFBQVFDLFFBQVUsTUFrQi9CUixFQUFhUyxhQUFhUixHQUMxQkgsRUFBZVksU0FBU2QsR0FDeEJHLEVBQWNXLFNBQVNiLEtBaEJyQkcsRUFBYVksWUFBWSxVQUN6Qm5CLEVBQUUsV0FBV21CLFlBQVksZUFtQjNCWixFQUFhVSxTQUFTZCxHQUN0QkUsRUFBZVksU0FBU2QsR0FDeEJHLEVBQWNXLFNBQVNkLElBUXZCTSxFQUFnQk8sYUFBYUwsSUFsTC9CUyxXQUFXLFdBQ1RuQixFQUFRb0IsUUFBUSxDQUFDQyxRQUFTLEdBQUksTUFDN0IsS0FFSFQsSUFFQWIsRUFBRWMsUUFBUVMsR0FBRyxTQUFVLFdBQ3JCVixNQUdGYixFQUFFLDBCQUEwQnVCLEdBQUcsUUFBUyxXQUN0Q3ZCLEVBQUV3QixNQUFNQyxRQUFRLG9CQUNiQyxRQUFRLElBQUssV0FDWjFCLEVBQUV3QixNQUFNRyxhQUlkM0IsRUFBRSx3Q0FBd0N1QixHQUFHLFFBQVMsU0FBVUssR0FDOURBLEVBQU1DLGlCQUNOLElBQU1DLEVBQU85QixFQUFFd0IsTUFBTUMsUUFBUSxrQkFDekJ6QixFQUFFYyxRQUFRQyxRQUFVLEtBQ2xCZSxFQUFLQyxTQUFTLFVBQ2hCRCxFQUFLRSxTQUVMRixFQUFLRyxTQUFTLFVBR2hCSCxFQUFLRSxXQUlUaEMsRUFBRSxzQkFBc0J1QixHQUFHLFFBQVMsV0FDbEMsSUFBTVcsRUFBUWxDLEVBQUV3QixNQUFNVyxRQUFVLEVBQ2hDbkMsRUFBRXdCLE1BQU1DLFFBQVEsZUFBZVcsS0FBSyx3QkFBd0JDLElBQUlILEdBQ2hFbEMsRUFBRXdCLE1BQU1DLFFBQVEsb0JBQW9CVyxLQUFLLEtBQUtFLEtBQUssU0FBVUgsRUFBT0ksR0FDckRMLEdBQVRDLEVBQ0ZuQyxFQUFFdUMsR0FBU3BCLFlBQVksVUFBVWMsU0FBUyxXQUUxQ2pDLEVBQUV1QyxHQUFTcEIsWUFBWSxXQUFXYyxTQUFTLGNBS2pEakMsRUFBRSxrQ0FBa0N1QixHQUFHLFNBQVUsV0FDL0MsSUFBTWlCLEVBQVd4QyxFQUFFd0IsTUFBTWEsTUFBTUksTUFBTSxNQUNyQ3pDLEVBQUV3QixNQUFNa0IsU0FBUyxvQkFBb0JDLEtBQUtILEVBQVNBLEVBQVNJLE9BQVMsTUFHdkU1QyxFQUFFLHFCQUFxQjZDLEtBQUssdUJBRTVCN0MsRUFBRSxrQkFBa0J1QixHQUFHLFFBQVMsV0FDOUJ2QixFQUFFd0IsTUFBTUMsUUFBUSxXQUFXcUIsWUFBWSxpQkFHekM5QyxFQUFFLHFCQUFxQnVCLEdBQUcsUUFBUyxXQUNqQyxJQUFNd0IsRUFBUy9DLEVBQUV3QixNQUFNd0IsS0FBSyxtQkFDdEJDLEVBQWNqRCxFQUFFYyxRQUFRb0MsWUFDOUJoRCxFQUFLK0IsU0FBUyxnQkFDZGpDLEVBQUMsZ0JBQUFtRCxPQUFpQkosRUFBakIsT0FBNkJLLE9BQU8sS0FBS0MsSUFBSSxDQUM1Q0MsUUFBVyxPQUNYQyxJQUFBLEdBQUFKLE9BQVVGLEVBQVYsVUFJSmpELEVBQUUsVUFBVXVCLEdBQUcsUUFBUyxTQUFVSyxHQUNoQyxJQUFNbUIsRUFBUy9DLEVBQUU0QixFQUFNbUIsU0FDbkJBLEVBQU9oQixTQUFTLGdCQUFtQmdCLEVBQU9TLFFBQVEsZ0JBQWdCWixTQUNwRTVDLEVBQUV3QixNQUFNRSxRQUFRLEtBQ2hCeEIsRUFBS2lCLFlBQVksbUJBSXJCbkIsRUFBRSx5QkFBeUJ1QixHQUFHLFFBQVMsV0FDakN2QixFQUFFd0IsTUFBTUMsUUFBUSxpQkFBaUJNLFNBQVMsVUFDNUMvQixFQUFFd0IsTUFBTUMsUUFBUSxpQkFBaUJOLFlBQVksV0FFN0NuQixFQUFFLGlCQUFpQm1CLFlBQVksVUFDL0JuQixFQUFFd0IsTUFBTUMsUUFBUSxpQkFBaUJRLFNBQVMsYUFJOUNqQyxFQUFFLHVCQUF1QnVCLEdBQUcsUUFBUyxXQUNuQyxJQUFLdkIsRUFBRXdCLE1BQU1PLFNBQVMsVUFBVyxDQUMvQixJQUFNRyxFQUFRbEMsRUFBRXdCLE1BQU1tQixPQUN0QjNDLEVBQUV3QixNQUFNUyxTQUFTLFVBQ2pCakMsRUFBRXdCLE1BQU1rQixTQUFTLFdBQVd2QixZQUFZLFVBQ3hDbkIsRUFBRXdCLE1BQU1DLFFBQVEsTUFBTWlCLFNBQVMseUJBQXlCQyxLQUFLVCxHQUM3RGxDLEVBQUV3QixNQUFNQyxRQUFRLE1BQU1pQixTQUFTLFNBQVNMLElBQUlILEdBQzVDbEMsRUFBRXdCLE1BQU1DLFFBQVEsaUJBQWlCTixZQUFZLGFBSWpEbkIsRUFBRSwyQkFBMkJ1QixHQUFHLFFBQVMsV0FDdkMsSUFBTWtDLEVBQVl6RCxFQUFFd0IsTUFBTWtCLFNBQVMsU0FDN0JnQixFQUFjQyxTQUFTRixFQUFVcEIsT0FDbkNyQyxFQUFFd0IsTUFBTU8sU0FBUyx3QkFDRCxFQUFkMkIsR0FDRkQsRUFBVXBCLElBQUlxQixFQUFjLEdBRXJCMUQsRUFBRXdCLE1BQU1PLFNBQVMsd0JBQzFCMEIsRUFBVXBCLElBQUlxQixFQUFjLEdBRTlCRCxFQUFVRyxRQUFRLFlBR3BCNUQsRUFBRSx5QkFBeUJ1QixHQUFHLFNBQVUsV0FDdEMsSUFBTXNDLEVBQVU3RCxFQUFFd0IsTUFBTUMsUUFBUSxtQkFBbUJpQixTQUFTLGNBQWNvQixTQUFTLG9CQUM3RUMsRUFBU0osU0FBUzNELEVBQUV3QixNQUFNYSxPQUMxQjJCLEVBQVdMLFNBQVMzRCxFQUFFd0IsTUFBTUMsUUFBUSxtQkFBbUJ1QixLQUFLLGNBQ2xFYSxFQUFRbEIsS0FBS29CLEVBQVNDLEVBQVcsV0FHbkNwRCxFQUFRd0IsS0FBSyxrQkFBa0JiLEdBQUcsUUFBUyxXQUN6QyxHQUFJdkIsRUFBRXdCLE1BQU1nQyxRQUFRLG1CQUFtQlosUUFBOEIsSUFBcEI1QyxFQUFFYyxRQUFRQyxRQUN6RCxPQUFPLEVBRVBmLEVBQUV3QixNQUFNQyxRQUFRLFlBQVlxQixZQUFZLFlBSTVDbEMsRUFBUXdCLEtBQUssU0FBU2IsR0FBRyxRQUFTLFdBQ2hDLElBQUt2QixFQUFFd0IsTUFBTU8sU0FBUyxVQUFXLENBQy9CLElBQU1HLEVBQVFsQyxFQUFFd0IsTUFBTW1CLE9BQ3RCM0MsRUFBRXdCLE1BQU1rQixXQUFXdkIsWUFBWSxVQUMvQm5CLEVBQUV3QixNQUFNUyxTQUFTLFVBQ2pCakMsRUFBRXdCLE1BQU1DLFFBQVEsTUFBTWlCLFNBQVMsa0JBQWtCQyxLQUFLVCxHQUN0RGxDLEVBQUV3QixNQUFNQyxRQUFRLE1BQU1pQixTQUFTLFNBQVNMLElBQUlILEdBQzVDbEMsRUFBRXdCLE1BQU1DLFFBQVEsWUFBWU4sWUFBWSxhQUk1Q25CLEVBQUVpRSxVQUFVMUMsR0FBRyxRQUFTLFNBQVVLLEdBQ2hDLElBQU1tQixFQUFTL0MsRUFBRTRCLEVBQU1tQixRQUV3QixJQUEzQ0EsRUFBT1MsUUFBUSxpQkFBaUJaLFFBQWM1QyxFQUFFLHdCQUF3Qm1CLFlBQVksVUFDeEMsSUFBNUM0QixFQUFPUyxRQUFRLGtCQUFrQlosUUFBYzVDLEVBQUUsa0JBQWtCbUIsWUFBWSxVQUN6QyxJQUF0QzRCLEVBQU9TLFFBQVEsWUFBWVosUUFBY2hDLEVBQVFPLFlBQVksY0N2SnJFbkIsRUFBRSxXQUVBLElBQU1rRSxFQUFhbEUsRUFBRSxrQkFZckIsU0FBU21FLElBQ0huRSxFQUFFYyxRQUFRQyxRQUFVLElBQ2pCbUQsRUFBV25DLFNBQVMsaUJBQ3ZCbUMsRUFBV0UsTUFBTSxDQUNmQyxVQUFVLElBSVZILEVBQVduQyxTQUFTLGlCQUN0Qm1DLEVBQVdFLE1BQU0sV0FuQm5CRixFQUFXdEIsUUFDYnVCLElBR0ZuRSxFQUFFYyxRQUFRUyxHQUFHLFNBQVUsV0FDakIyQyxFQUFXdEIsUUFDYnVCLFFDVk5uRSxFQUFFLFdBRUEsSUFBTUUsRUFBT0YsRUFBRSxRQUNUc0UsRUFBZ0J0RSxFQUFFLG1CQUNsQnVFLEVBQWtCdkUsRUFBRSxxQkFDcEJ3RSxFQUFnQnhFLEVBQUUsbUJBQ2xCeUUsRUFBY3pFLEVBQUUsZ0JBQ2hCMEUsRUFBZTFFLEVBQUUsa0JBQ2pCMkUsRUFBYVYsU0FBU1csZUFBZSxlQUNyQ0MsRUFBbUIsQ0FDdkJaLFNBQVNXLGVBQWUsb0JBQ3hCWCxTQUFTVyxlQUFlLG1CQThCMUIsU0FBU0UsSUFDSDlFLEVBQUVjLFFBQVFDLFFBQVUsS0FPMUIsV0FDRTBELEVBQVlNLFVBQVUvRSxFQUFFLFdBQVdnRixLQUFLLG1CQUNVLElBQTlDVixFQUFjbEMsS0FBSyxnQkFBZ0JRLFFBQ3JDNUMsRUFBRSxtQ0FBbUMrRSxVQUFVVCxHQUVqREEsRUFBY3JELFNBQVMsK0JBQ3ZCc0QsRUFBZ0JyRCxZQUFZLGVBQzVCc0QsRUFBY3RELFlBQVlxRCxHQWJ4QlUsR0FnQkosV0FDRVIsRUFBWU0sVUFBVS9FLEVBQUUscUJBQ3hCRSxFQUFLaUIsWUFBWSxnQkFDakJuQixFQUFFLCtCQUErQnFELElBQUksQ0FDbkNDLFFBQVcsT0FDWEMsSUFBTyxTQUVMZSxFQUFjbEMsS0FBSyxnQkFBZ0JRLFFBQ3JDNUMsRUFBRXNFLEVBQWNsQyxLQUFLLGlCQUFpQlQsU0FFeEMyQyxFQUFjUyxVQUFVTCxHQUN4QkgsRUFBZ0J0RCxTQUFTeUQsR0FDekJGLEVBQWN2RCxTQUFTeUQsR0ExQnJCUSxHQS9CSkosSUFFSUgsSUFDRlEsV0FBV0MsT0FBT1QsRUFBWSxDQUM1QlUsTUFBTyxDQUFDLElBQU0sS0FDZEMsS0FBTSxJQUNOQyxPQUFRLElBQ1JDLFNBQVMsRUFDVEMsTUFBTyxDQUNMQyxJQUFPLEVBQ1BDLElBQU8sT0FHWGQsRUFBa0JlLFFBQVEsU0FBVXJELEVBQVNKLEdBQzNDSSxFQUFRc0QsaUJBQWlCLFNBQVUsV0FDakNsQixFQUFXUSxXQUFXVyxVQUFVM0QsRUFBTzBDLEVBQWtCMUMsR0FBT0QsV0FHcEV5QyxFQUFXUSxXQUFXNUQsR0FBRyxTQUFVLFNBQVV3RSxFQUFRQyxHQUNuRG5CLEVBQWtCbUIsR0FBUTlELE1BQVErRCxLQUFLQyxNQUFNSCxFQUFPQyxPQUl4RGhHLEVBQUVjLFFBQVFTLEdBQUcsU0FBVSxXQUNyQnVELFFDdENKOUUsRUFBRSxXQUVBLElBQU1tRyxFQUFPbkcsRUFBRSxTQUVYbUcsRUFBS3ZELFFBQ1B1RCxFQUFLL0IsTUFBTSxDQUNUZ0MsTUFBTSxFQUNOQyxRQUFRLEVBQ1JDLE1BQU0sRUFDTkMsVUFBVSxFQUNWQyxjQUFlLFFDVnJCeEcsRUFBRSxXQUVBLElBQU15RyxFQUFVekcsRUFBRSxvRUFFZHlHLEVBQVE3RCxTQUVWNkQsRUFBUW5FLEtBQUssV0FDUHRDLEVBQUV3QixNQUFNTyxTQUFTLGlCQUFtQi9CLEVBQUV3QixNQUFNTyxTQUFTLHFCQUN2RC9CLEVBQUV3QixNQUFNNEMsTUFBTSxDQUNac0MsYUFBYyxFQUNkckMsVUFBVSxFQUNWc0MsV0FBWSxDQUNWLENBQ0VDLFdBQVksS0FDWkMsU0FBVSxDQUNSSCxhQUFjLEVBQ2RyQyxVQUFVLElBR2QsQ0FDRXVDLFdBQVksSUFDWkMsU0FBVSxDQUNSSCxhQUFjLEVBQ2RyQyxVQUFVLElBR2QsQ0FDRXVDLFdBQVksSUFDWkMsU0FBVSxDQUNSeEMsVUFBVSxFQUNWcUMsYUFBYyxPQU10QjFHLEVBQUV3QixNQUFNNEMsTUFBTSxDQUNac0MsYUFBYyxFQUNkSSxVQUFTLEVBQ1R6QyxVQUFVLEVBQ1ZzQyxXQUFZLENBQ1YsQ0FDRUMsV0FBWSxLQUNaQyxTQUFVLENBQ1JILGFBQWMsRUFDZHJDLFVBQVUsRUFDVnlDLFVBQVUsSUFHZCxDQUNFRixXQUFZLElBQ1pDLFNBQVUsQ0FDUkgsYUFBYyxFQUNkckMsVUFBVSxFQUNWeUMsVUFBVSxPQU1wQjlHLEVBQUV3QixNQUFNWSxLQUFLLGVBQWVILFNBQVMsY0FHdkN3RSxFQUFRbEYsR0FBRyxlQUFnQixTQUFTSyxFQUFPd0MsRUFBTzJDLEVBQWNDLElBTWxFLFNBQTBCQyxFQUFRRCxHQUNoQyxJQUFNRSxFQUFPbEgsRUFBRWlILEdBQVE3RSxLQUFLLGVBQ3RCNEMsRUFBT2hGLEVBQUVpSCxHQUFRN0UsS0FBSyxlQUN0QitFLEVBQU9uSCxFQUFFaUgsR0FBUTdFLEtBQUssZ0JBQWdCUSxPQUN0Q3dFLEVBQVVwSCxFQUFFaUgsR0FBUTdFLEtBQUssNkJBQTZCUSxPQUN0RHlFLEVBQWNELEVBQVUsSUFBTUQsRUFDbEIsSUFBZEgsR0FDRkUsRUFBS2pGLFNBQVMsWUFDZCtDLEVBQUs3RCxZQUFZLGFBRWpCK0YsRUFBSy9GLFlBQVksWUFFZmtHLEVBQ3lCRixHQUF2QkgsRUFBWUksR0FDZHBDLEVBQUsvQyxTQUFTLFlBQ2RpRixFQUFLL0YsWUFBWSxhQUVqQjZELEVBQUs3RCxZQUFZLFlBR09nRyxFQUFPLEVBQTdCSCxFQUFZSSxHQUNkcEMsRUFBSy9DLFNBQVMsWUFDZGlGLEVBQUsvRixZQUFZLGFBRWpCNkQsRUFBSzdELFlBQVksWUE3Qm5CbUcsQ0FBZ0J0SCxFQUFFd0IsTUFBT3dGIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IHdyYXBwZXIgPSAkKCcud3JhcHBlcicpO1xyXG4gIGNvbnN0IGJvZHkgPSAkKCdib2R5Jyk7XHJcbiAgY29uc3QgaGVhZGVyQm90dG9tID0gJCgnLmhlYWRlci1ib3R0b20gLndyYXBwZXItaW5uZXInKTtcclxuICBjb25zdCBoZWFkZXJOYXYgPSAkKCcuaGVhZGVyLW5hdicpO1xyXG4gIGNvbnN0IGhlYWRlckNvbnRhY3RzID0gJCgnLmhlYWRlciAuY29udGFjdHMnKTtcclxuICBjb25zdCBoZWFkZXJBZGRyZXNzID0gJCgnLmhlYWRlciAuYWRkcmVzcy1ob3VycycpO1xyXG4gIGNvbnN0IGhlYWRlclNlYXJjaCA9ICQoJy5oZWFkZXItc2VhcmNoJyk7XHJcbiAgY29uc3QgaGVhZGVyQ2FydCA9ICQoJy5oZWFkZXItY2FydCcpO1xyXG4gIGNvbnN0IGZvb3RlclN1YnNjcmliZSA9ICQoJy5mb290ZXItc3Vic2NyaWJlJyk7XHJcbiAgY29uc3QgZm9vdGVyQ29weXJpZ2h0cyA9ICQoJy5mb290ZXItY29weXJpZ2h0cycpO1xyXG4gIGNvbnN0IGZvb3RlclNvY2lhbCA9ICQoJy5mb290ZXItc29jaWFsJyk7XHJcbiAgY29uc3QgY2hvb3NlciA9ICQoJy5jaG9vc2VyJyk7XHJcblxyXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgd3JhcHBlci5hbmltYXRlKHtvcGFjaXR5OiAxfSwgNTAwKTtcclxuICB9LCA1MDApO1xyXG5cclxuICBwYWdlUmVwYWludCgpO1xyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIHBhZ2VSZXBhaW50KCk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLXJlbW92YWJsZS1jbG9zZV0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXJlbW92YWJsZV0nKVxyXG4gICAgICAuZmFkZU91dCg0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmRldGFjaCgpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmhlYWRlci1zZWFyY2ggYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBmb3JtID0gJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLXNlYXJjaCcpO1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xyXG4gICAgICBpZiAoZm9ybS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICBmb3JtLnN1Ym1pdCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvcm0uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3JtLnN1Ym1pdCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuZmllbGQtcmF0ZS1saXN0IGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykuaW5kZXgoKSArIDE7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5maWVsZC1yYXRlJykuZmluZCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLnZhbCh2YWx1ZSk7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5maWVsZC1yYXRlLWxpc3QnKS5maW5kKCdpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgaWYgKGluZGV4ID49IHZhbHVlKSB7XHJcbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnZmEtcmVkJykuYWRkQ2xhc3MoJ2ZhLWdyZXknKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmYS1ncmV5JykuYWRkQ2xhc3MoJ2ZhLXJlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmZpZWxkLWZpbGUgaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmFsQXJyYXkgPSAkKHRoaXMpLnZhbCgpLnNwbGl0KCdcXFxcJyk7XHJcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZmllbGQtZmlsZS10ZXh0JykudGV4dCh2YWxBcnJheVt2YWxBcnJheS5sZW5ndGggLSAxXSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKS5tYXNrKFwiKzcgKDk5OSkgOTk5LTk5OS05OVwiKTtcclxuXHJcbiAgJCgnLmhlYWRlci1idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXInKS50b2dnbGVDbGFzcygnbWVudS1vcGVuZWQnKTtcclxuICB9KTtcclxuXHJcbiAgJCgnW2RhdGEtY2FsbC1tb2RhbF0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtY2FsbC1tb2RhbCcpO1xyXG4gICAgY29uc3Qgc2Nyb2xsVmFsdWUgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICBib2R5LmFkZENsYXNzKCdtb2RhbC1vcGVuZWQnKTtcclxuICAgICQoYFtkYXRhLW1vZGFsPVwiJHt0YXJnZXR9XCJdYCkuZmFkZUluKDMwMCkuY3NzKHtcclxuICAgICAgJ2Rpc3BsYXknOiAnZmxleCcsXHJcbiAgICAgICd0b3AnOiBgJHtzY3JvbGxWYWx1ZX1weGBcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcubW9kYWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgIGlmICh0YXJnZXQuaGFzQ2xhc3MoJ21vZGFsLWNsb3NlJykgfHwgIXRhcmdldC5jbG9zZXN0KCcubW9kYWwtaW5uZXInKS5sZW5ndGgpIHtcclxuICAgICAgJCh0aGlzKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW5lZCcpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCdbZGF0YS1zZWxlY3QtY29udHJvbF0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnW2RhdGEtc2VsZWN0XScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoJ1tkYXRhLXNlbGVjdF0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnW2RhdGEtc2VsZWN0XScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnW2RhdGEtc2VsZWN0XSB1bCBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLnRleHQoKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnW2RhdGEtc2VsZWN0LWNvbnRyb2xdJykudGV4dCh2YWx1ZSk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwodmFsdWUpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5hbW91bnQtY2hvb3Nlci1jb250cm9sJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgYW1vdW50RE9NID0gJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQnKTtcclxuICAgIGNvbnN0IGFtb3VudFZhbHVlID0gcGFyc2VJbnQoYW1vdW50RE9NLnZhbCgpKTtcclxuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhbW91bnQtY2hvb3Nlci1taW51cycpKSB7XHJcbiAgICAgIGlmIChhbW91bnRWYWx1ZSA+IDEpIHtcclxuICAgICAgICBhbW91bnRET00udmFsKGFtb3VudFZhbHVlIC0gMSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYW1vdW50LWNob29zZXItcGx1cycpKSB7XHJcbiAgICAgIGFtb3VudERPTS52YWwoYW1vdW50VmFsdWUgKyAxKTtcclxuICAgIH1cclxuICAgIGFtb3VudERPTS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmFtb3VudC1jaG9vc2VyIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvc3RET00gPSAkKHRoaXMpLnBhcmVudHMoJy5hbW91bnQtY2hvb3NlcicpLnNpYmxpbmdzKCcuY2FyZC1jb3N0JykuY2hpbGRyZW4oJy5jYXJkLWNvc3QtdmFsdWUnKTtcclxuICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlSW50KCQodGhpcykudmFsKCkpO1xyXG4gICAgY29uc3QgaXRlbUNvc3QgPSBwYXJzZUludCgkKHRoaXMpLnBhcmVudHMoJy5hbW91bnQtY2hvb3NlcicpLmF0dHIoJ2RhdGEtY29zdCcpKTtcclxuICAgIGNvc3RET00udGV4dChhbW91bnQgKiBpdGVtQ29zdCArICcg0YDRg9CxLicpO1xyXG4gIH0pO1xyXG5cclxuICBjaG9vc2VyLmZpbmQoJy5jaG9vc2VyLXZhbHVlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmNhdGFsb2ctYnJhbmRzJykubGVuZ3RoICYmICQod2luZG93KS53aWR0aCgpID4gNzY3KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNob29zZXIuZmluZCgndWwgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJy5jaG9vc2VyLXZhbHVlJykudGV4dCh2YWx1ZSk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwodmFsdWUpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5jaG9vc2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuXHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXNlbGVjdF0nKS5sZW5ndGggPT09IDApICQoJy5hY3RpdmVbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuaGVhZGVyLXNlYXJjaCcpLmxlbmd0aCA9PT0gMCkgJCgnLmhlYWRlci1zZWFyY2gnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5jaG9vc2VyJykubGVuZ3RoID09PSAwKSBjaG9vc2VyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHBhZ2VSZXBhaW50KCkge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgIHJlbmRlck1vYmlsZUhlYWRlcigpO1xyXG4gICAgICByZW5kZXJNb2JpbGVGb290ZXIoKTtcclxuICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIHJlbmRlclRhYmxldEhlYWRlcigpO1xyXG4gICAgICByZW5kZXJUYWJsZXRGb290ZXIoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlclNlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnbWVudS1vcGVuZWQnKTtcclxuICAgICAgcmVuZGVyRGVza3RvcEhlYWRlcigpO1xyXG4gICAgICByZW5kZXJEZXNrdG9wRm9vdGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVIZWFkZXIoKSB7XHJcbiAgICBoZWFkZXJTZWFyY2guaW5zZXJ0QmVmb3JlKGhlYWRlckNhcnQpO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5pbnNlcnRCZWZvcmUoaGVhZGVyQ2FydCk7XHJcbiAgICBoZWFkZXJDb250YWN0cy5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRGVza3RvcEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRBZnRlcihmb290ZXJDb3B5cmlnaHRzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BGb290ZXIoKSB7XHJcbiAgICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IGFkdmFudGFnZXMgPSAkKCcuYWR2YW50YWdlcyB1bCcpO1xyXG5cclxuICBpZiAoYWR2YW50YWdlcy5sZW5ndGgpIHtcclxuICAgIHJlcGFpbnRBZHZhbnRhZ2VzKCk7XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChhZHZhbnRhZ2VzLmxlbmd0aCkge1xyXG4gICAgICByZXBhaW50QWR2YW50YWdlcygpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiByZXBhaW50QWR2YW50YWdlcyAoKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgaWYgKCFhZHZhbnRhZ2VzLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgIGFkdmFudGFnZXMuc2xpY2soe1xyXG4gICAgICAgICAgaW5maW5pdGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChhZHZhbnRhZ2VzLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgIGFkdmFudGFnZXMuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKTtcclxuICBjb25zdCBjYXRhbG9nRmlsdGVyID0gJCgnLmNhdGFsb2ctZmlsdGVyJyk7XHJcbiAgY29uc3QgY2F0YWxvZ0FydGljbGVzID0gJCgnLmNhdGFsb2ctYXJ0aWNsZXMnKTtcclxuICBjb25zdCBjYXRhbG9nQmFubmVyID0gJCgnLmNhdGFsb2ctYmFubmVyJyk7XHJcbiAgY29uc3QgYnJlYWRjcnVtYnMgPSAkKCcuYnJlYWRjcnVtYnMnKTtcclxuICBjb25zdCBjYXRhbG9nQXNpZGUgPSAkKCcuY2F0YWxvZy1hc2lkZScpO1xyXG4gIGNvbnN0IGZpbHRlckNvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyLWNvc3QnKTtcclxuICBjb25zdCBmaWx0ZXJDb3N0SGFuZGxlcyA9W1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1jb3N0LWZyb20nKSxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItY29zdC10bycpXHJcbiAgXTtcclxuXHJcbiAgY2F0YWxvZ1JlcGFpbnQoKTtcclxuXHJcbiAgaWYgKGZpbHRlckNvc3QpIHtcclxuICAgIG5vVWlTbGlkZXIuY3JlYXRlKGZpbHRlckNvc3QsIHtcclxuICAgICAgc3RhcnQ6IFsxMDAwLCA1MDAwXSxcclxuICAgICAgc3RlcDogMTAwLFxyXG4gICAgICBtYXJnaW46IDEwMDAsXHJcbiAgICAgIGNvbm5lY3Q6IHRydWUsXHJcbiAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgJ21pbic6IDAsXHJcbiAgICAgICAgJ21heCc6IDgwMDBcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBmaWx0ZXJDb3N0SGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmaWx0ZXJDb3N0Lm5vVWlTbGlkZXIuc2V0SGFuZGxlKGluZGV4LCBmaWx0ZXJDb3N0SGFuZGxlc1tpbmRleF0udmFsdWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZmlsdGVyQ29zdC5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcclxuICAgICAgZmlsdGVyQ29zdEhhbmRsZXNbaGFuZGxlXS52YWx1ZSA9IE1hdGgudHJ1bmModmFsdWVzW2hhbmRsZV0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNhdGFsb2dSZXBhaW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNhdGFsb2dSZXBhaW50ICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgcmVuZGVyTW9iaWxlQ2F0YWxvZygpO1xyXG4gICAgfSAgZWxzZSB7XHJcbiAgICAgIHJlbmRlckRlc2t0b3BDYXRhbG9nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVDYXRhbG9nICgpIHtcclxuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuaGVhZGVyJykubmV4dCgnLndyYXBwZXItaW5uZXInKSk7XHJcbiAgICBpZiAoY2F0YWxvZ0ZpbHRlci5maW5kKCcubW9kYWwtY2xvc2UnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgJCgnPGRpdiBjbGFzcz1cIm1vZGFsLWNsb3NlXCI+PC9kaXY+JykucHJlcGVuZFRvKGNhdGFsb2dGaWx0ZXIpO1xyXG4gICAgfVxyXG4gICAgY2F0YWxvZ0ZpbHRlci5hcHBlbmRUbygnLm1vZGFsW2RhdGEtbW9kYWw9XCJmaWx0ZXJcIl0nKTtcclxuICAgIGNhdGFsb2dBcnRpY2xlcy5pbnNlcnRBZnRlcignLnBhZ2luYXRpb24nKTtcclxuICAgIGNhdGFsb2dCYW5uZXIuaW5zZXJ0QWZ0ZXIoY2F0YWxvZ0FydGljbGVzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BDYXRhbG9nICgpIHtcclxuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuY2F0YWxvZy1jb250ZW50JykpO1xyXG4gICAgYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbmVkJyk7XHJcbiAgICAkKCcubW9kYWxbZGF0YS1tb2RhbD1cImZpbHRlclwiXScpLmNzcyh7XHJcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxyXG4gICAgICAndG9wJzogJ2F1dG8nXHJcbiAgICB9KTtcclxuICAgIGlmIChjYXRhbG9nRmlsdGVyLmZpbmQoJy5tb2RhbC1jbG9zZScpLmxlbmd0aCkge1xyXG4gICAgICAkKGNhdGFsb2dGaWx0ZXIuZmluZCgnLm1vZGFsLWNsb3NlJykpLmRldGFjaCgpO1xyXG4gICAgfVxyXG4gICAgY2F0YWxvZ0ZpbHRlci5wcmVwZW5kVG8oY2F0YWxvZ0FzaWRlKTtcclxuICAgIGNhdGFsb2dBcnRpY2xlcy5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xyXG4gICAgY2F0YWxvZ0Jhbm5lci5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xyXG4gIH1cclxuXHJcbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCBoZXJvID0gJCgnLmhlcm8nKTtcclxuXHJcbiAgaWYgKGhlcm8ubGVuZ3RoKSB7XHJcbiAgICBoZXJvLnNsaWNrKHtcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgZmFkZTogdHJ1ZSxcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3Qgc2xpZGVycyA9ICQoJy5jZXJ0aWZpY2F0ZXMtbGlzdCwgLnByb2R1Y3QtbGlzdCwgLmFydGljbGVzLWxpc3QsIC5yZXZpZXdzLWxpc3QnKTtcclxuXHJcbiAgaWYgKHNsaWRlcnMubGVuZ3RoKSB7XHJcblxyXG4gICAgc2xpZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3Byb2R1Y3QtbGlzdCcpIHx8ICQodGhpcykuaGFzQ2xhc3MoJ2NlcnRpZmljYXRlcy1saXN0JykpIHtcclxuICAgICAgICAkKHRoaXMpLnNsaWNrKHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcclxuICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEyMDAsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDkzMCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuc2xpY2soe1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgdmVydGljYWw6ZmFsc2UsXHJcbiAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAkKHRoaXMpLmZpbmQoJy5zbGljay1wcmV2JykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzbGlkZXJzLm9uKCdiZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlKSB7XHJcbiAgICAgIHNldFNsaWRlckFycm93cygkKHRoaXMpLCBuZXh0U2xpZGUpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0U2xpZGVyQXJyb3dzIChzbGlkZXIsIG5leHRTbGlkZSkge1xyXG4gICAgY29uc3QgcHJldiA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stcHJldicpO1xyXG4gICAgY29uc3QgbmV4dCA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stbmV4dCcpO1xyXG4gICAgY29uc3Qgc2l6ZSA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stc2xpZGUnKS5sZW5ndGg7XHJcbiAgICBjb25zdCB2aXNpYmxlID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1zbGlkZS5zbGljay1hY3RpdmUnKS5sZW5ndGg7XHJcbiAgICBjb25zdCBzbWFsbEFtb3VudCA9IHZpc2libGUgKyAxID09PSBzaXplO1xyXG4gICAgaWYgKG5leHRTbGlkZSA9PT0gMCkge1xyXG4gICAgICBwcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICBuZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICAgIGlmIChzbWFsbEFtb3VudCkge1xyXG4gICAgICBpZiAobmV4dFNsaWRlICsgdmlzaWJsZSA+PSBzaXplKSB7XHJcbiAgICAgICAgbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBwcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChuZXh0U2xpZGUgKyB2aXNpYmxlID4gc2l6ZSAtIDEpIHtcclxuICAgICAgICBuZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iXX0=
