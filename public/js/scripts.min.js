"use strict";$(function(){var e=$(".wrapper"),s=$(".header-bottom .wrapper-inner"),t=$(".header-nav"),i=$(".header .contacts"),a=$(".header .address-hours"),n=$(".header-search"),l=$(".header-cart"),o=$(".footer-subscribe"),r=$(".footer-copyrights"),c=$(".footer-social"),d=$(".chooser");function h(){$(window).width()<768?(n.insertBefore(l),i.appendTo(t),a.appendTo(t),o.insertAfter(r)):($(window).width()<1200?(n.insertBefore(l),i.appendTo(s),a.appendTo(t)):(n.removeClass("active"),$(".header").removeClass("menu-opened"),n.appendTo(s),i.appendTo(s),a.appendTo(s)),o.insertBefore(c))}setTimeout(function(){e.animate({opacity:1},500)},500),h(),$(window).on("resize",function(){h()}),$('.header-search button[type="submit"]').on("click",function(e){e.preventDefault();var s=$(this).parents(".header-search");$(window).width()<1200?s.hasClass("active")?s.submit():s.addClass("active"):s.submit()}),$(".field-rate-list i").on("click",function(){var t=$(this).index()+1;$(this).parents(".field-rate").find('input[type="hidden"]').val(t),$(this).parents(".field-rate-list").find("i").each(function(e,s){t<=e?$(s).removeClass("fa-red").addClass("fa-grey"):$(s).removeClass("fa-grey").addClass("fa-red")})}),$('.field-file input[type="file"]').on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$('input[type="tel"]').mask("+7 (999) 999-999-99"),$(".header-burger").on("click",function(){$(this).parents(".header").toggleClass("menu-opened")}),$(".catalog-burger").on("click",function(){$(this).toggleClass("active"),$(this).siblings(".catalog-filter").toggleClass("active")}),$("[data-select-control]").on("click",function(){$(this).parents("[data-select]").hasClass("active")?$(this).parents("[data-select]").removeClass("active"):($("[data-select]").removeClass("active"),$(this).parents("[data-select]").addClass("active"))}),$("[data-select] ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).html(),s=$(this).find(".color-item").length?$(this).find(".color-item-name").text():$(this).text();$(this).addClass("active"),$(this).siblings(".active").removeClass("active"),$(this).parents("[data-select]").find("[data-select-control]").html(e),$(this).parents("[data-select]").find("input").val(s),$(this).parents("[data-select]").removeClass("active")}}),$(".amount-chooser .fa").on("click",function(){var e=$(this).parents(".amount-chooser").find("input"),s=parseInt(e.val());$(this).hasClass("fa-chevron-left")?1<s&&e.val(s-1):$(this).hasClass("fa-chevron-right")&&e.val(s+1),e.trigger("change")}),$(".amount-chooser input").on("change",function(){var e=$(this).parents(".amount-chooser").find("input"),s=$(this).parents(".amount-chooser").siblings(".card-cost"),t=!!s.length&&parseInt($(this).parents("[data-cost]").attr("data-cost"));s.html(e.val()*t+' <i class="fa fa-rub"></i>')}),d.find(".chooser-value").on("click",function(){$(this).parents(".chooser").toggleClass("active")}),d.find("ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).parents(".chooser").find(".chooser-value").text(e),$(this).parents(".chooser").removeClass("active")}}),$(document).on("click",function(e){var s=$(e.target);0===s.closest("[data-select]").length&&$(".active[data-select]").removeClass("active"),0===s.closest(".header-search").length&&$(".header-search").removeClass("active"),0===s.closest(".chooser").length&&d.removeClass("active")})}),$(function(){var e=$(".advantages ul");function s(){$(window).width()<768?e.hasClass("slick-slider")||e.slick({infinite:!1}):e.hasClass("slick-slider")&&e.slick("unslick")}e.length&&s(),$(window).on("resize",function(){e.length&&s()})}),$(function(){var e=$(".hero");e.length&&e.slick({dots:!0,arrows:!1,fade:!0,autoplay:!0,autoplaySpeed:5e3})}),$(function(){var e=$(".certificates-list, .product-list, .articles-list, .reviews-list");e.length&&(e.each(function(){$(this).hasClass("product-list")||$(this).hasClass("certificates-list")?$(this).slick({slidesToShow:4,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3,infinite:!1}},{breakpoint:930,settings:{slidesToShow:2,infinite:!1}},{breakpoint:768,settings:{infinite:!0,slidesToShow:1}}]}):$(this).slick({slidesToShow:2,vertical:!1,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,infinite:!1,vertical:!0}},{breakpoint:768,settings:{slidesToShow:1,infinite:!0,vertical:!1}}]}),$(this).find(".slick-prev").addClass("disabled")}),e.on("beforeChange",function(e,s,t,i){!function(e,s){var t=$(e).find(".slick-prev"),i=$(e).find(".slick-next"),a=$(e).find(".slick-slide").length,n=$(e).find(".slick-slide.slick-active").length,l=n+1===a;0===s?(t.addClass("disabled"),i.removeClass("disabled")):t.removeClass("disabled");l?a<=s+n?(i.addClass("disabled"),t.removeClass("disabled")):i.removeClass("disabled"):a-1<s+n?(i.addClass("disabled"),t.removeClass("disabled")):i.removeClass("disabled")}($(this),i)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhZHZhbnRhZ2VzLmpzIiwiaGVyby5qcyIsInNsaWRlcnMuanMiXSwibmFtZXMiOlsiJCIsIndyYXBwZXIiLCJoZWFkZXJCb3R0b20iLCJoZWFkZXJOYXYiLCJoZWFkZXJDb250YWN0cyIsImhlYWRlckFkZHJlc3MiLCJoZWFkZXJTZWFyY2giLCJoZWFkZXJDYXJ0IiwiZm9vdGVyU3Vic2NyaWJlIiwiZm9vdGVyQ29weXJpZ2h0cyIsImZvb3RlclNvY2lhbCIsImNob29zZXIiLCJwYWdlUmVwYWludCIsIndpbmRvdyIsIndpZHRoIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlbW92ZUNsYXNzIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJvcGFjaXR5Iiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm9ybSIsInRoaXMiLCJwYXJlbnRzIiwiaGFzQ2xhc3MiLCJzdWJtaXQiLCJhZGRDbGFzcyIsInZhbHVlIiwiaW5kZXgiLCJmaW5kIiwidmFsIiwiZWFjaCIsImVsZW1lbnQiLCJ2YWxBcnJheSIsInNwbGl0Iiwic2libGluZ3MiLCJ0ZXh0IiwibGVuZ3RoIiwibWFzayIsInRvZ2dsZUNsYXNzIiwiaHRtbCIsInZhbHVlVGV4dCIsImFtb3VudERPTSIsImFtb3VudFZhbHVlIiwicGFyc2VJbnQiLCJ0cmlnZ2VyIiwiY29zdERPTSIsImNvc3RWYWx1ZSIsImF0dHIiLCJkb2N1bWVudCIsInRhcmdldCIsImNsb3Nlc3QiLCJhZHZhbnRhZ2VzIiwicmVwYWludEFkdmFudGFnZXMiLCJzbGljayIsImluZmluaXRlIiwiaGVybyIsImRvdHMiLCJhcnJvd3MiLCJmYWRlIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwic2xpZGVycyIsInNsaWRlc1RvU2hvdyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJ2ZXJ0aWNhbCIsImN1cnJlbnRTbGlkZSIsIm5leHRTbGlkZSIsInNsaWRlciIsInByZXYiLCJuZXh0Iiwic2l6ZSIsInZpc2libGUiLCJzbWFsbEFtb3VudCIsInNldFNsaWRlckFycm93cyJdLCJtYXBwaW5ncyI6ImFBQUFBLEVBQUUsV0FFQSxJQUFNQyxFQUFVRCxFQUFFLFlBQ1pFLEVBQWVGLEVBQUUsaUNBQ2pCRyxFQUFZSCxFQUFFLGVBQ2RJLEVBQWlCSixFQUFFLHFCQUNuQkssRUFBZ0JMLEVBQUUsMEJBQ2xCTSxFQUFlTixFQUFFLGtCQUNqQk8sRUFBYVAsRUFBRSxnQkFDZlEsRUFBa0JSLEVBQUUscUJBQ3BCUyxFQUFtQlQsRUFBRSxzQkFDckJVLEVBQWVWLEVBQUUsa0JBQ2pCVyxFQUFVWCxFQUFFLFlBMEhsQixTQUFTWSxJQUNIWixFQUFFYSxRQUFRQyxRQUFVLEtBZXhCUixFQUFhUyxhQUFhUixHQUMxQkgsRUFBZVksU0FBU2IsR0FDeEJFLEVBQWNXLFNBQVNiLEdBZ0J2QkssRUFBZ0JTLFlBQVlSLEtBOUJqQlQsRUFBRWEsUUFBUUMsUUFBVSxNQWtCL0JSLEVBQWFTLGFBQWFSLEdBQzFCSCxFQUFlWSxTQUFTZCxHQUN4QkcsRUFBY1csU0FBU2IsS0FoQnJCRyxFQUFhWSxZQUFZLFVBQ3pCbEIsRUFBRSxXQUFXa0IsWUFBWSxlQW1CM0JaLEVBQWFVLFNBQVNkLEdBQ3RCRSxFQUFlWSxTQUFTZCxHQUN4QkcsRUFBY1csU0FBU2QsSUFRdkJNLEVBQWdCTyxhQUFhTCxJQTlKL0JTLFdBQVcsV0FDVGxCLEVBQVFtQixRQUFRLENBQUNDLFFBQVMsR0FBSSxNQUM3QixLQUVIVCxJQUVBWixFQUFFYSxRQUFRUyxHQUFHLFNBQVUsV0FDckJWLE1BR0ZaLEVBQUUsd0NBQXdDc0IsR0FBRyxRQUFTLFNBQVVDLEdBQzlEQSxFQUFNQyxpQkFDTixJQUFNQyxFQUFPekIsRUFBRTBCLE1BQU1DLFFBQVEsa0JBQ3pCM0IsRUFBRWEsUUFBUUMsUUFBVSxLQUNsQlcsRUFBS0csU0FBUyxVQUNoQkgsRUFBS0ksU0FFTEosRUFBS0ssU0FBUyxVQUdoQkwsRUFBS0ksV0FJVDdCLEVB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QUFZLFlBN0JuQjhELENBQWdCaEYsRUFBRTBCLE1BQU8rQyIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCB3cmFwcGVyID0gJCgnLndyYXBwZXInKTtcclxuICBjb25zdCBoZWFkZXJCb3R0b20gPSAkKCcuaGVhZGVyLWJvdHRvbSAud3JhcHBlci1pbm5lcicpO1xyXG4gIGNvbnN0IGhlYWRlck5hdiA9ICQoJy5oZWFkZXItbmF2Jyk7XHJcbiAgY29uc3QgaGVhZGVyQ29udGFjdHMgPSAkKCcuaGVhZGVyIC5jb250YWN0cycpO1xyXG4gIGNvbnN0IGhlYWRlckFkZHJlc3MgPSAkKCcuaGVhZGVyIC5hZGRyZXNzLWhvdXJzJyk7XHJcbiAgY29uc3QgaGVhZGVyU2VhcmNoID0gJCgnLmhlYWRlci1zZWFyY2gnKTtcclxuICBjb25zdCBoZWFkZXJDYXJ0ID0gJCgnLmhlYWRlci1jYXJ0Jyk7XHJcbiAgY29uc3QgZm9vdGVyU3Vic2NyaWJlID0gJCgnLmZvb3Rlci1zdWJzY3JpYmUnKTtcclxuICBjb25zdCBmb290ZXJDb3B5cmlnaHRzID0gJCgnLmZvb3Rlci1jb3B5cmlnaHRzJyk7XHJcbiAgY29uc3QgZm9vdGVyU29jaWFsID0gJCgnLmZvb3Rlci1zb2NpYWwnKTtcclxuICBjb25zdCBjaG9vc2VyID0gJCgnLmNob29zZXInKTtcclxuXHJcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICB3cmFwcGVyLmFuaW1hdGUoe29wYWNpdHk6IDF9LCA1MDApO1xyXG4gIH0sIDUwMCk7XHJcblxyXG4gIHBhZ2VSZXBhaW50KCk7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcGFnZVJlcGFpbnQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmhlYWRlci1zZWFyY2ggYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBmb3JtID0gJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLXNlYXJjaCcpO1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xyXG4gICAgICBpZiAoZm9ybS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICBmb3JtLnN1Ym1pdCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvcm0uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3JtLnN1Ym1pdCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuZmllbGQtcmF0ZS1saXN0IGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykuaW5kZXgoKSArIDE7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5maWVsZC1yYXRlJykuZmluZCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLnZhbCh2YWx1ZSk7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5maWVsZC1yYXRlLWxpc3QnKS5maW5kKCdpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgaWYgKGluZGV4ID49IHZhbHVlKSB7XHJcbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnZmEtcmVkJykuYWRkQ2xhc3MoJ2ZhLWdyZXknKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmYS1ncmV5JykuYWRkQ2xhc3MoJ2ZhLXJlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmZpZWxkLWZpbGUgaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmFsQXJyYXkgPSAkKHRoaXMpLnZhbCgpLnNwbGl0KCdcXFxcJyk7XHJcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZmllbGQtZmlsZS10ZXh0JykudGV4dCh2YWxBcnJheVt2YWxBcnJheS5sZW5ndGggLSAxXSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKS5tYXNrKFwiKzcgKDk5OSkgOTk5LTk5OS05OVwiKTtcclxuXHJcbiAgJCgnLmhlYWRlci1idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXInKS50b2dnbGVDbGFzcygnbWVudS1vcGVuZWQnKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmNhdGFsb2ctYnVyZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuY2F0YWxvZy1maWx0ZXInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLXNlbGVjdC1jb250cm9sXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCgnW2RhdGEtc2VsZWN0XScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCdbZGF0YS1zZWxlY3RdIHVsIGxpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykuaHRtbCgpO1xyXG4gICAgICBjb25zdCB2YWx1ZVRleHQgPSAoJCh0aGlzKS5maW5kKCcuY29sb3ItaXRlbScpLmxlbmd0aClcclxuICAgICAgICA/ICQodGhpcykuZmluZCgnLmNvbG9yLWl0ZW0tbmFtZScpLnRleHQoKVxyXG4gICAgICAgIDogJCh0aGlzKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5maW5kKCdbZGF0YS1zZWxlY3QtY29udHJvbF0nKS5odG1sKHZhbHVlKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykuZmluZCgnaW5wdXQnKS52YWwodmFsdWVUZXh0KTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuYW1vdW50LWNob29zZXIgLmZhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgYW1vdW50RE9NID0gJCh0aGlzKS5wYXJlbnRzKCcuYW1vdW50LWNob29zZXInKS5maW5kKCdpbnB1dCcpO1xyXG4gICAgY29uc3QgYW1vdW50VmFsdWUgPSBwYXJzZUludChhbW91bnRET00udmFsKCkpO1xyXG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpKSB7XHJcbiAgICAgIGlmIChhbW91bnRWYWx1ZSA+IDEpIHtcclxuICAgICAgICBhbW91bnRET00udmFsKGFtb3VudFZhbHVlIC0gMSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpKSB7XHJcbiAgICAgIGFtb3VudERPTS52YWwoYW1vdW50VmFsdWUgKyAxKTtcclxuICAgIH1cclxuICAgIGFtb3VudERPTS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLmFtb3VudC1jaG9vc2VyIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGFtb3VudERPTSA9ICQodGhpcykucGFyZW50cygnLmFtb3VudC1jaG9vc2VyJykuZmluZCgnaW5wdXQnKTtcclxuICAgIGNvbnN0IGNvc3RET00gPSAkKHRoaXMpLnBhcmVudHMoJy5hbW91bnQtY2hvb3NlcicpLnNpYmxpbmdzKCcuY2FyZC1jb3N0Jyk7XHJcbiAgICBjb25zdCBjb3N0VmFsdWUgPSBjb3N0RE9NLmxlbmd0aFxyXG4gICAgICA/IHBhcnNlSW50KCQodGhpcykucGFyZW50cygnW2RhdGEtY29zdF0nKS5hdHRyKCdkYXRhLWNvc3QnKSlcclxuICAgICAgOiBmYWxzZTtcclxuICAgIGNvc3RET00uaHRtbChhbW91bnRET00udmFsKCkgKiBjb3N0VmFsdWUgKyAnIDxpIGNsYXNzPVwiZmEgZmEtcnViXCI+PC9pPicpO1xyXG4gIH0pO1xyXG5cclxuICBjaG9vc2VyLmZpbmQoJy5jaG9vc2VyLXZhbHVlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuY2hvb3NlcicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICB9KTtcclxuXHJcbiAgY2hvb3Nlci5maW5kKCd1bCBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLnRleHQoKTtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS5maW5kKCcuY2hvb3Nlci12YWx1ZScpLnRleHQodmFsdWUpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5jaG9vc2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuXHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXNlbGVjdF0nKS5sZW5ndGggPT09IDApICQoJy5hY3RpdmVbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuaGVhZGVyLXNlYXJjaCcpLmxlbmd0aCA9PT0gMCkgJCgnLmhlYWRlci1zZWFyY2gnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5jaG9vc2VyJykubGVuZ3RoID09PSAwKSBjaG9vc2VyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHBhZ2VSZXBhaW50KCkge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgIHJlbmRlck1vYmlsZUhlYWRlcigpO1xyXG4gICAgICByZW5kZXJNb2JpbGVGb290ZXIoKTtcclxuICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIHJlbmRlclRhYmxldEhlYWRlcigpO1xyXG4gICAgICByZW5kZXJUYWJsZXRGb290ZXIoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlclNlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnbWVudS1vcGVuZWQnKTtcclxuICAgICAgcmVuZGVyRGVza3RvcEhlYWRlcigpO1xyXG4gICAgICByZW5kZXJEZXNrdG9wRm9vdGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVIZWFkZXIoKSB7XHJcbiAgICBoZWFkZXJTZWFyY2guaW5zZXJ0QmVmb3JlKGhlYWRlckNhcnQpO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5pbnNlcnRCZWZvcmUoaGVhZGVyQ2FydCk7XHJcbiAgICBoZWFkZXJDb250YWN0cy5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRGVza3RvcEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRBZnRlcihmb290ZXJDb3B5cmlnaHRzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BGb290ZXIoKSB7XHJcbiAgICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IGFkdmFudGFnZXMgPSAkKCcuYWR2YW50YWdlcyB1bCcpO1xyXG5cclxuICBpZiAoYWR2YW50YWdlcy5sZW5ndGgpIHtcclxuICAgIHJlcGFpbnRBZHZhbnRhZ2VzKCk7XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChhZHZhbnRhZ2VzLmxlbmd0aCkge1xyXG4gICAgICByZXBhaW50QWR2YW50YWdlcygpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiByZXBhaW50QWR2YW50YWdlcyAoKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgaWYgKCFhZHZhbnRhZ2VzLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgIGFkdmFudGFnZXMuc2xpY2soe1xyXG4gICAgICAgICAgaW5maW5pdGU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChhZHZhbnRhZ2VzLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgIGFkdmFudGFnZXMuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgaGVybyA9ICQoJy5oZXJvJyk7XHJcblxyXG4gIGlmIChoZXJvLmxlbmd0aCkge1xyXG4gICAgaGVyby5zbGljayh7XHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIGZhZGU6IHRydWUsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhdXRvcGxheVNwZWVkOiA1MDAwXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IHNsaWRlcnMgPSAkKCcuY2VydGlmaWNhdGVzLWxpc3QsIC5wcm9kdWN0LWxpc3QsIC5hcnRpY2xlcy1saXN0LCAucmV2aWV3cy1saXN0Jyk7XHJcblxyXG4gIGlmIChzbGlkZXJzLmxlbmd0aCkge1xyXG5cclxuICAgIHNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdwcm9kdWN0LWxpc3QnKSB8fCAkKHRoaXMpLmhhc0NsYXNzKCdjZXJ0aWZpY2F0ZXMtbGlzdCcpKSB7XHJcbiAgICAgICAgJCh0aGlzKS5zbGljayh7XHJcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDQsXHJcbiAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiA5MzAsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDFcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKHRoaXMpLnNsaWNrKHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgIHZlcnRpY2FsOmZhbHNlLFxyXG4gICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmVydGljYWw6IHRydWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgJCh0aGlzKS5maW5kKCcuc2xpY2stcHJldicpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2xpZGVycy5vbignYmVmb3JlQ2hhbmdlJywgZnVuY3Rpb24oZXZlbnQsIHNsaWNrLCBjdXJyZW50U2xpZGUsIG5leHRTbGlkZSkge1xyXG4gICAgICBzZXRTbGlkZXJBcnJvd3MoJCh0aGlzKSwgbmV4dFNsaWRlKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldFNsaWRlckFycm93cyAoc2xpZGVyLCBuZXh0U2xpZGUpIHtcclxuICAgIGNvbnN0IHByZXYgPSAkKHNsaWRlcikuZmluZCgnLnNsaWNrLXByZXYnKTtcclxuICAgIGNvbnN0IG5leHQgPSAkKHNsaWRlcikuZmluZCgnLnNsaWNrLW5leHQnKTtcclxuICAgIGNvbnN0IHNpemUgPSAkKHNsaWRlcikuZmluZCgnLnNsaWNrLXNsaWRlJykubGVuZ3RoO1xyXG4gICAgY29uc3QgdmlzaWJsZSA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stc2xpZGUuc2xpY2stYWN0aXZlJykubGVuZ3RoO1xyXG4gICAgY29uc3Qgc21hbGxBbW91bnQgPSB2aXNpYmxlICsgMSA9PT0gc2l6ZTtcclxuICAgIGlmIChuZXh0U2xpZGUgPT09IDApIHtcclxuICAgICAgcHJldi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgbmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoc21hbGxBbW91bnQpIHtcclxuICAgICAgaWYgKG5leHRTbGlkZSArIHZpc2libGUgPj0gc2l6ZSkge1xyXG4gICAgICAgIG5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBuZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAobmV4dFNsaWRlICsgdmlzaWJsZSA+IHNpemUgLSAxKSB7XHJcbiAgICAgICAgbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBwcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59KTtcclxuIl19
