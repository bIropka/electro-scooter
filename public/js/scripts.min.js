"use strict";$(function(){var e=$(".wrapper"),t=$("body"),s=$(".header-bottom .wrapper-inner"),i=$(".header-nav"),a=$(".header .contacts"),n=$(".header .address-hours"),o=$(".header-search"),l=$(".header-cart"),c=$(".footer-subscribe"),r=$(".footer-copyrights"),d=$(".footer-social"),h=$(".chooser");function p(){$(window).width()<768?(o.insertBefore(l),a.appendTo(i),n.appendTo(i),c.insertAfter(r)):($(window).width()<1200?(o.insertBefore(l),a.appendTo(s),n.appendTo(i)):(o.removeClass("active"),$(".header").removeClass("menu-opened"),o.appendTo(s),a.appendTo(s),n.appendTo(s)),c.insertBefore(d))}setTimeout(function(){e.animate({opacity:1},500)},500),p(),$(window).on("resize",function(){p()}),$("[data-removable-close]").on("click",function(){$(this).parents("[data-removable]").fadeOut(400,function(){$(this).detach()})}),$('.header-search button[type="submit"]').on("click",function(e){e.preventDefault();var s=$(this).parents(".header-search");$(window).width()<1200?s.hasClass("active")?s.submit():s.addClass("active"):s.submit()}),$(".field-rate-list i").on("click",function(){var t=$(this).index()+1;$(this).parents(".field-rate").find('input[type="hidden"]').val(t),$(this).parents(".field-rate-list").find("i").each(function(e,s){t<=e?$(s).removeClass("fa-red").addClass("fa-grey"):$(s).removeClass("fa-grey").addClass("fa-red")})}),$('.field-file input[type="file"]').on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$('input[type="tel"]').mask("+7 (999) 999-999-99"),$(".header-burger").on("click",function(){$(this).parents(".header").toggleClass("menu-opened")}),$("[data-call-modal]").on("click",function(){var e=$(this).attr("data-call-modal"),s=$(window).scrollTop();t.addClass("modal-opened"),$('[data-modal="'.concat(e,'"]')).fadeIn(300).css({display:"flex",top:"".concat(s,"px")})}),$(".modal").on("click",function(e){var s=$(e.target);!s.hasClass("modal-close")&&s.closest(".modal-inner").length||($(this).fadeOut(300),t.removeClass("modal-opened"))}),$("[data-select-control]").on("click",function(){$(this).parents("[data-select]").hasClass("active")?$(this).parents("[data-select]").removeClass("active"):($("[data-select]").removeClass("active"),$(this).parents("[data-select]").addClass("active"))}),$("[data-select] ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).addClass("active"),$(this).siblings(".active").removeClass("active"),$(this).parents("ul").siblings("[data-select-control]").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents("[data-select]").removeClass("active")}}),$(".amount-chooser-control").on("click",function(){var e=$(this).siblings("input"),s=parseInt(e.val());$(this).hasClass("amount-chooser-minus")?1<s&&e.val(s-1):$(this).hasClass("amount-chooser-plus")&&e.val(s+1),e.trigger("change")}),$(".amount-chooser input").on("change",function(){var e=$(this).parents(".amount-chooser").siblings(".card-cost").children(".card-cost-value"),s=parseInt($(this).val()),t=parseInt($(this).parents(".amount-chooser").attr("data-cost"));e.text(s*t+" руб.")}),h.find(".chooser-value").on("click",function(){if($(this).closest(".catalog-brands").length&&767<$(window).width())return!1;$(this).parents(".chooser").toggleClass("active")}),h.find("ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).parents("ul").siblings(".chooser-value").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents(".chooser").removeClass("active")}}),$(document).on("click",function(e){var s=$(e.target);0===s.closest("[data-select]").length&&$(".active[data-select]").removeClass("active"),0===s.closest(".header-search").length&&$(".header-search").removeClass("active"),0===s.closest(".chooser").length&&h.removeClass("active")})}),$(function(){var e=$("body"),s=$(".catalog-filter"),t=$(".catalog-articles"),i=$(".catalog-banner"),a=$(".breadcrumbs"),n=$(".catalog-aside"),o=document.getElementById("filter-cost"),l=[document.getElementById("filter-cost-from"),document.getElementById("filter-cost-to")];function c(){$(window).width()<1200?function(){a.prependTo($(".header").next(".wrapper-inner")),0===s.find(".modal-close").length&&$('<div class="modal-close"></div>').prependTo(s);s.appendTo('.modal[data-modal="filter"]'),t.insertAfter(".pagination"),i.insertAfter(t)}():function(){a.prependTo($(".catalog-content")),e.removeClass("modal-opened"),$('.modal[data-modal="filter"]').css({display:"none",top:"auto"}),s.find(".modal-close").length&&$(s.find(".modal-close")).detach();s.prependTo(n),t.appendTo(n),i.appendTo(n)}()}c(),o&&(noUiSlider.create(o,{start:[1e3,5e3],step:100,margin:1e3,connect:!0,range:{min:0,max:8e3}}),l.forEach(function(e,s){e.addEventListener("change",function(){o.noUiSlider.setHandle(s,l[s].value)})}),o.noUiSlider.on("update",function(e,s){l[s].value=Math.trunc(e[s])})),$(window).on("resize",function(){c()})}),$(function(){var e=$(".hero");e.length&&e.slick({dots:!0,arrows:!1,fade:!0,autoplay:!0,autoplaySpeed:5e3})}),$(function(){}),$(function(){var e=$(".advantages ul, .reviews-rate");function s(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick()}):$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")})}s(e),$(window).on("resize",function(){s(e)})}),$(function(){$(".reviews-result-percent").each(function(){var e=parseInt($(this).attr("data-result-percent")),s=$(this).find(".reviews-result-percent-value");$('<div class="reviews-result-percent-color"></div>').appendTo(s).css("width",e+"%")}),$(".reviews-list .reviews-card p .show-all").on("click",function(){$(this).siblings(".all-text").css("display","inline"),$(this).siblings(".dots").css("display","none"),$(this).css("display","none")})}),$(function(){var e=$(".certificates-list, .product-list, .articles-list, .reviews-slider");e.length&&(e.each(function(){$(this).hasClass("product-list")||$(this).hasClass("certificates-list")?$(this).slick({slidesToShow:4,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3,infinite:!1}},{breakpoint:930,settings:{slidesToShow:2,infinite:!1}},{breakpoint:768,settings:{infinite:!0,slidesToShow:1}}]}):$(this).slick({slidesToShow:2,vertical:!1,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,infinite:!1,vertical:!0}},{breakpoint:768,settings:{slidesToShow:1,infinite:!0,vertical:!1}}]}),$(this).find(".slick-prev").addClass("disabled")}),e.on("beforeChange",function(e,s,t,i){!function(e,s){var t=$(e).find(".slick-prev"),i=$(e).find(".slick-next"),a=$(e).find(".slick-slide").length,n=$(e).find(".slick-slide.slick-active").length,o=n+1===a;0===s?(t.addClass("disabled"),i.removeClass("disabled")):t.removeClass("disabled");o?a<=s+n?(i.addClass("disabled"),t.removeClass("disabled")):i.removeClass("disabled"):a-1<s+n?(i.addClass("disabled"),t.removeClass("disabled")):i.removeClass("disabled")}($(this),i)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjYXRhbG9nLmpzIiwiaGVyby5qcyIsIml0ZW0uanMiLCJtb2JpbGVTbGlkZXIuanMiLCJyZXZpZXdzLmpzIiwic2xpZGVycy5qcyJdLCJuYW1lcyI6WyIkIiwid3JhcHBlciIsImJvZHkiLCJoZWFkZXJCb3R0b20iLCJoZWFkZXJOYXYiLCJoZWFkZXJDb250YWN0cyIsImhlYWRlckFkZHJlc3MiLCJoZWFkZXJTZWFyY2giLCJoZWFkZXJDYXJ0IiwiZm9vdGVyU3Vic2NyaWJlIiwiZm9vdGVyQ29weXJpZ2h0cyIsImZvb3RlclNvY2lhbCIsImNob29zZXIiLCJwYWdlUmVwYWludCIsIndpbmRvdyIsIndpZHRoIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlbW92ZUNsYXNzIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJvcGFjaXR5Iiwib24iLCJ0aGlzIiwicGFyZW50cyIsImZhZGVPdXQiLCJkZXRhY2giLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm9ybSIsImhhc0NsYXNzIiwic3VibWl0IiwiYWRkQ2xhc3MiLCJ2YWx1ZSIsImluZGV4IiwiZmluZCIsInZhbCIsImVhY2giLCJlbGVtZW50IiwidmFsQXJyYXkiLCJzcGxpdCIsInNpYmxpbmdzIiwidGV4dCIsImxlbmd0aCIsIm1hc2siLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsImF0dHIiLCJzY3JvbGxWYWx1ZSIsInNjcm9sbFRvcCIsImNvbmNhdCIsImZhZGVJbiIsImNzcyIsImRpc3BsYXkiLCJ0b3AiLCJjbG9zZXN0IiwiYW1vdW50RE9NIiwiYW1vdW50VmFsdWUiLCJwYXJzZUludCIsInRyaWdnZXIiLCJjb3N0RE9NIiwiY2hpbGRyZW4iLCJhbW91bnQiLCJpdGVtQ29zdCIsImRvY3VtZW50IiwiY2F0YWxvZ0ZpbHRlciIsImNhdGFsb2dBcnRpY2xlcyIsImNhdGFsb2dCYW5uZXIiLCJicmVhZGNydW1icyIsImNhdGFsb2dBc2lkZSIsImZpbHRlckNvc3QiLCJnZXRFbGVtZW50QnlJZCIsImZpbHRlckNvc3RIYW5kbGVzIiwiY2F0YWxvZ1JlcGFpbnQiLCJwcmVwZW5kVG8iLCJuZXh0IiwicmVuZGVyTW9iaWxlQ2F0YWxvZyIsInJlbmRlckRlc2t0b3BDYXRhbG9nIiwibm9VaVNsaWRlciIsImNyZWF0ZSIsInN0YXJ0Iiwic3RlcCIsIm1hcmdpbiIsImNvbm5lY3QiLCJyYW5nZSIsIm1pbiIsIm1heCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SGFuZGxlIiwidmFsdWVzIiwiaGFuZGxlIiwiTWF0aCIsInRydW5jIiwiaGVybyIsInNsaWNrIiwiZG90cyIsImFycm93cyIsImZhZGUiLCJhdXRvcGxheSIsImF1dG9wbGF5U3BlZWQiLCJtb2JpbGVTbGlkZXIiLCJyZXBhaW50TW9iaWxlU2xpZGVyIiwidmFsdWVET00iLCJzbGlkZXJzIiwic2xpZGVzVG9TaG93IiwiaW5maW5pdGUiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwidmVydGljYWwiLCJjdXJyZW50U2xpZGUiLCJuZXh0U2xpZGUiLCJzbGlkZXIiLCJwcmV2Iiwic2l6ZSIsInZpc2libGUiLCJzbWFsbEFtb3VudCIsInNldFNsaWRlckFycm93cyJdLCJtYXBwaW5ncyI6ImFBQUFBLEVBQUUsV0FFQSxJQUFNQyxFQUFVRCxFQUFFLFlBQ1pFLEVBQU9GLEVBQUUsUUFDVEcsRUFBZUgsRUFBRSxpQ0FDakJJLEVBQVlKLEVBQUUsZUFDZEssRUFBaUJMLEVBQUUscUJBQ25CTSxFQUFnQk4sRUFBRSwwQkFDbEJPLEVBQWVQLEVBQUUsa0JBQ2pCUSxFQUFhUixFQUFFLGdCQUNmUyxFQUFrQlQsRUFBRSxxQkFDcEJVLEVBQW1CVixFQUFFLHNCQUNyQlcsRUFBZVgsRUFBRSxrQkFDakJZLEVBQVVaLEVBQUUsWUE4SWxCLFNBQVNhLElBQ0hiLEVBQUVjLFFBQVFDLFFBQVUsS0FleEJSLEVBQWFTLGFBQWFSLEdBQzFCSCxFQUFlWSxTQUFTYixHQUN4QkUs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LE9BTXBCL0csRUFBRXdCLE1BQU1ZLEtBQUssZUFBZUgsU0FBUyxjQUd2Q3dFLEVBQVFsRixHQUFHLGVBQWdCLFNBQVNLLEVBQU9vRSxFQUFPZ0IsRUFBY0MsSUFNbEUsU0FBMEJDLEVBQVFELEdBQ2hDLElBQU1FLEVBQU9uSCxFQUFFa0gsR0FBUTlFLEtBQUssZUFDdEJ3QyxFQUFPNUUsRUFBRWtILEdBQVE5RSxLQUFLLGVBQ3RCZ0YsRUFBT3BILEVBQUVrSCxHQUFROUUsS0FBSyxnQkFBZ0JRLE9BQ3RDeUUsRUFBVXJILEVBQUVrSCxHQUFROUUsS0FBSyw2QkFBNkJRLE9BQ3REMEUsRUFBY0QsRUFBVSxJQUFNRCxFQUNsQixJQUFkSCxHQUNGRSxFQUFLbEYsU0FBUyxZQUNkMkMsRUFBS3pELFlBQVksYUFFakJnRyxFQUFLaEcsWUFBWSxZQUVmbUcsRUFDeUJGLEdBQXZCSCxFQUFZSSxHQUNkekMsRUFBSzNDLFNBQVMsWUFDZGtGLEVBQUtoRyxZQUFZLGFBRWpCeUQsRUFBS3pELFlBQVksWUFHT2lHLEVBQU8sRUFBN0JILEVBQVlJLEdBQ2R6QyxFQUFLM0MsU0FBUyxZQUNka0YsRUFBS2hHLFlBQVksYUFFakJ5RCxFQUFLekQsWUFBWSxZQTdCbkJvRyxDQUFnQnZILEVBQUV3QixNQUFPeUYiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3Qgd3JhcHBlciA9ICQoJy53cmFwcGVyJyk7XHJcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKTtcclxuICBjb25zdCBoZWFkZXJCb3R0b20gPSAkKCcuaGVhZGVyLWJvdHRvbSAud3JhcHBlci1pbm5lcicpO1xyXG4gIGNvbnN0IGhlYWRlck5hdiA9ICQoJy5oZWFkZXItbmF2Jyk7XHJcbiAgY29uc3QgaGVhZGVyQ29udGFjdHMgPSAkKCcuaGVhZGVyIC5jb250YWN0cycpO1xyXG4gIGNvbnN0IGhlYWRlckFkZHJlc3MgPSAkKCcuaGVhZGVyIC5hZGRyZXNzLWhvdXJzJyk7XHJcbiAgY29uc3QgaGVhZGVyU2VhcmNoID0gJCgnLmhlYWRlci1zZWFyY2gnKTtcclxuICBjb25zdCBoZWFkZXJDYXJ0ID0gJCgnLmhlYWRlci1jYXJ0Jyk7XHJcbiAgY29uc3QgZm9vdGVyU3Vic2NyaWJlID0gJCgnLmZvb3Rlci1zdWJzY3JpYmUnKTtcclxuICBjb25zdCBmb290ZXJDb3B5cmlnaHRzID0gJCgnLmZvb3Rlci1jb3B5cmlnaHRzJyk7XHJcbiAgY29uc3QgZm9vdGVyU29jaWFsID0gJCgnLmZvb3Rlci1zb2NpYWwnKTtcclxuICBjb25zdCBjaG9vc2VyID0gJCgnLmNob29zZXInKTtcclxuXHJcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICB3cmFwcGVyLmFuaW1hdGUoe29wYWNpdHk6IDF9LCA1MDApO1xyXG4gIH0sIDUwMCk7XHJcblxyXG4gIHBhZ2VSZXBhaW50KCk7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcGFnZVJlcGFpbnQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnW2RhdGEtcmVtb3ZhYmxlLWNsb3NlXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucGFyZW50cygnW2RhdGEtcmVtb3ZhYmxlXScpXHJcbiAgICAgIC5mYWRlT3V0KDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZGV0YWNoKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuaGVhZGVyLXNlYXJjaCBidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGZvcm0gPSAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItc2VhcmNoJyk7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIGlmIChmb3JtLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGZvcm0uc3VibWl0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9ybS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcm0uc3VibWl0KCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5maWVsZC1yYXRlLWxpc3QgaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS5pbmRleCgpICsgMTtcclxuICAgICQodGhpcykucGFyZW50cygnLmZpZWxkLXJhdGUnKS5maW5kKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJykudmFsKHZhbHVlKTtcclxuICAgICQodGhpcykucGFyZW50cygnLmZpZWxkLXJhdGUtbGlzdCcpLmZpbmQoJ2knKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICBpZiAoaW5kZXggPj0gdmFsdWUpIHtcclxuICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmYS1yZWQnKS5hZGRDbGFzcygnZmEtZ3JleScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2ZhLWdyZXknKS5hZGRDbGFzcygnZmEtcmVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuZmllbGQtZmlsZSBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB2YWxBcnJheSA9ICQodGhpcykudmFsKCkuc3BsaXQoJ1xcXFwnKTtcclxuICAgICQodGhpcykuc2libGluZ3MoJy5maWVsZC1maWxlLXRleHQnKS50ZXh0KHZhbEFycmF5W3ZhbEFycmF5Lmxlbmd0aCAtIDFdKTtcclxuICB9KTtcclxuXHJcbiAgJCgnaW5wdXRbdHlwZT1cInRlbFwiXScpLm1hc2soXCIrNyAoOTk5KSA5OTktOTk5LTk5XCIpO1xyXG5cclxuICAkKCcuaGVhZGVyLWJ1cmdlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICQodGhpcykucGFyZW50cygnLmhlYWRlcicpLnRvZ2dsZUNsYXNzKCdtZW51LW9wZW5lZCcpO1xyXG4gIH0pO1xyXG5cclxuICAkKCdbZGF0YS1jYWxsLW1vZGFsXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQodGhpcykuYXR0cignZGF0YS1jYWxsLW1vZGFsJyk7XHJcbiAgICBjb25zdCBzY3JvbGxWYWx1ZSA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgIGJvZHkuYWRkQ2xhc3MoJ21vZGFsLW9wZW5lZCcpO1xyXG4gICAgJChgW2RhdGEtbW9kYWw9XCIke3RhcmdldH1cIl1gKS5mYWRlSW4oMzAwKS5jc3Moe1xyXG4gICAgICAnZGlzcGxheSc6ICdmbGV4JyxcclxuICAgICAgJ3RvcCc6IGAke3Njcm9sbFZhbHVlfXB4YFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5tb2RhbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgaWYgKHRhcmdldC5oYXNDbGFzcygnbW9kYWwtY2xvc2UnKSB8fCAhdGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbC1pbm5lcicpLmxlbmd0aCkge1xyXG4gICAgICAkKHRoaXMpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbmVkJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLXNlbGVjdC1jb250cm9sXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCgnW2RhdGEtc2VsZWN0XScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCdbZGF0YS1zZWxlY3RdIHVsIGxpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9ICQodGhpcykudGV4dCgpO1xyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdbZGF0YS1zZWxlY3QtY29udHJvbF0nKS50ZXh0KHZhbHVlKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnW2RhdGEtc2VsZWN0XScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnLmFtb3VudC1jaG9vc2VyLWNvbnRyb2wnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBhbW91bnRET00gPSAkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpO1xyXG4gICAgY29uc3QgYW1vdW50VmFsdWUgPSBwYXJzZUludChhbW91bnRET00udmFsKCkpO1xyXG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Ftb3VudC1jaG9vc2VyLW1pbnVzJykpIHtcclxuICAgICAgaWYgKGFtb3VudFZhbHVlID4gMSkge1xyXG4gICAgICAgIGFtb3VudERPTS52YWwoYW1vdW50VmFsdWUgLSAxKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhbW91bnQtY2hvb3Nlci1wbHVzJykpIHtcclxuICAgICAgYW1vdW50RE9NLnZhbChhbW91bnRWYWx1ZSArIDEpO1xyXG4gICAgfVxyXG4gICAgYW1vdW50RE9NLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuYW1vdW50LWNob29zZXIgaW5wdXQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY29zdERPTSA9ICQodGhpcykucGFyZW50cygnLmFtb3VudC1jaG9vc2VyJykuc2libGluZ3MoJy5jYXJkLWNvc3QnKS5jaGlsZHJlbignLmNhcmQtY29zdC12YWx1ZScpO1xyXG4gICAgY29uc3QgYW1vdW50ID0gcGFyc2VJbnQoJCh0aGlzKS52YWwoKSk7XHJcbiAgICBjb25zdCBpdGVtQ29zdCA9IHBhcnNlSW50KCQodGhpcykucGFyZW50cygnLmFtb3VudC1jaG9vc2VyJykuYXR0cignZGF0YS1jb3N0JykpO1xyXG4gICAgY29zdERPTS50ZXh0KGFtb3VudCAqIGl0ZW1Db3N0ICsgJyDRgNGD0LEuJyk7XHJcbiAgfSk7XHJcblxyXG4gIGNob29zZXIuZmluZCgnLmNob29zZXItdmFsdWUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuY2F0YWxvZy1icmFuZHMnKS5sZW5ndGggJiYgJCh3aW5kb3cpLndpZHRoKCkgPiA3NjcpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuY2hvb3NlcicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY2hvb3Nlci5maW5kKCd1bCBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLnRleHQoKTtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnLmNob29zZXItdmFsdWUnKS50ZXh0KHZhbHVlKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC50YXJnZXQpO1xyXG5cclxuICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnW2RhdGEtc2VsZWN0XScpLmxlbmd0aCA9PT0gMCkgJCgnLmFjdGl2ZVtkYXRhLXNlbGVjdF0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5oZWFkZXItc2VhcmNoJykubGVuZ3RoID09PSAwKSAkKCcuaGVhZGVyLXNlYXJjaCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmNob29zZXInKS5sZW5ndGggPT09IDApIGNob29zZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gcGFnZVJlcGFpbnQoKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgcmVuZGVyTW9iaWxlSGVhZGVyKCk7XHJcbiAgICAgIHJlbmRlck1vYmlsZUZvb3RlcigpO1xyXG4gICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgcmVuZGVyVGFibGV0SGVhZGVyKCk7XHJcbiAgICAgIHJlbmRlclRhYmxldEZvb3RlcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGVhZGVyU2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdtZW51LW9wZW5lZCcpO1xyXG4gICAgICByZW5kZXJEZXNrdG9wSGVhZGVyKCk7XHJcbiAgICAgIHJlbmRlckRlc2t0b3BGb290ZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5pbnNlcnRCZWZvcmUoaGVhZGVyQ2FydCk7XHJcbiAgICBoZWFkZXJDb250YWN0cy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyVGFibGV0SGVhZGVyKCkge1xyXG4gICAgaGVhZGVyU2VhcmNoLmluc2VydEJlZm9yZShoZWFkZXJDYXJ0KTtcclxuICAgIGhlYWRlckNvbnRhY3RzLmFwcGVuZFRvKGhlYWRlckJvdHRvbSk7XHJcbiAgICBoZWFkZXJBZGRyZXNzLmFwcGVuZFRvKGhlYWRlck5hdik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJEZXNrdG9wSGVhZGVyKCkge1xyXG4gICAgaGVhZGVyU2VhcmNoLmFwcGVuZFRvKGhlYWRlckJvdHRvbSk7XHJcbiAgICBoZWFkZXJDb250YWN0cy5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyTW9iaWxlRm9vdGVyKCkge1xyXG4gICAgZm9vdGVyU3Vic2NyaWJlLmluc2VydEFmdGVyKGZvb3RlckNvcHlyaWdodHMpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyVGFibGV0Rm9vdGVyKCkge1xyXG4gICAgZm9vdGVyU3Vic2NyaWJlLmluc2VydEJlZm9yZShmb290ZXJTb2NpYWwpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRGVza3RvcEZvb3RlcigpIHtcclxuICAgICAgZm9vdGVyU3Vic2NyaWJlLmluc2VydEJlZm9yZShmb290ZXJTb2NpYWwpO1xyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKTtcclxuICBjb25zdCBjYXRhbG9nRmlsdGVyID0gJCgnLmNhdGFsb2ctZmlsdGVyJyk7XHJcbiAgY29uc3QgY2F0YWxvZ0FydGljbGVzID0gJCgnLmNhdGFsb2ctYXJ0aWNsZXMnKTtcclxuICBjb25zdCBjYXRhbG9nQmFubmVyID0gJCgnLmNhdGFsb2ctYmFubmVyJyk7XHJcbiAgY29uc3QgYnJlYWRjcnVtYnMgPSAkKCcuYnJlYWRjcnVtYnMnKTtcclxuICBjb25zdCBjYXRhbG9nQXNpZGUgPSAkKCcuY2F0YWxvZy1hc2lkZScpO1xyXG4gIGNvbnN0IGZpbHRlckNvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyLWNvc3QnKTtcclxuICBjb25zdCBmaWx0ZXJDb3N0SGFuZGxlcyA9W1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1jb3N0LWZyb20nKSxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItY29zdC10bycpXHJcbiAgXTtcclxuXHJcbiAgY2F0YWxvZ1JlcGFpbnQoKTtcclxuXHJcbiAgaWYgKGZpbHRlckNvc3QpIHtcclxuICAgIG5vVWlTbGlkZXIuY3JlYXRlKGZpbHRlckNvc3QsIHtcclxuICAgICAgc3RhcnQ6IFsxMDAwLCA1MDAwXSxcclxuICAgICAgc3RlcDogMTAwLFxyXG4gICAgICBtYXJnaW46IDEwMDAsXHJcbiAgICAgIGNvbm5lY3Q6IHRydWUsXHJcbiAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgJ21pbic6IDAsXHJcbiAgICAgICAgJ21heCc6IDgwMDBcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBmaWx0ZXJDb3N0SGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmaWx0ZXJDb3N0Lm5vVWlTbGlkZXIuc2V0SGFuZGxlKGluZGV4LCBmaWx0ZXJDb3N0SGFuZGxlc1tpbmRleF0udmFsdWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZmlsdGVyQ29zdC5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGUpIHtcclxuICAgICAgZmlsdGVyQ29zdEhhbmRsZXNbaGFuZGxlXS52YWx1ZSA9IE1hdGgudHJ1bmModmFsdWVzW2hhbmRsZV0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNhdGFsb2dSZXBhaW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNhdGFsb2dSZXBhaW50ICgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgcmVuZGVyTW9iaWxlQ2F0YWxvZygpO1xyXG4gICAgfSAgZWxzZSB7XHJcbiAgICAgIHJlbmRlckRlc2t0b3BDYXRhbG9nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVDYXRhbG9nICgpIHtcclxuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuaGVhZGVyJykubmV4dCgnLndyYXBwZXItaW5uZXInKSk7XHJcbiAgICBpZiAoY2F0YWxvZ0ZpbHRlci5maW5kKCcubW9kYWwtY2xvc2UnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgJCgnPGRpdiBjbGFzcz1cIm1vZGFsLWNsb3NlXCI+PC9kaXY+JykucHJlcGVuZFRvKGNhdGFsb2dGaWx0ZXIpO1xyXG4gICAgfVxyXG4gICAgY2F0YWxvZ0ZpbHRlci5hcHBlbmRUbygnLm1vZGFsW2RhdGEtbW9kYWw9XCJmaWx0ZXJcIl0nKTtcclxuICAgIGNhdGFsb2dBcnRpY2xlcy5pbnNlcnRBZnRlcignLnBhZ2luYXRpb24nKTtcclxuICAgIGNhdGFsb2dCYW5uZXIuaW5zZXJ0QWZ0ZXIoY2F0YWxvZ0FydGljbGVzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BDYXRhbG9nICgpIHtcclxuICAgIGJyZWFkY3J1bWJzLnByZXBlbmRUbygkKCcuY2F0YWxvZy1jb250ZW50JykpO1xyXG4gICAgYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbmVkJyk7XHJcbiAgICAkKCcubW9kYWxbZGF0YS1tb2RhbD1cImZpbHRlclwiXScpLmNzcyh7XHJcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxyXG4gICAgICAndG9wJzogJ2F1dG8nXHJcbiAgICB9KTtcclxuICAgIGlmIChjYXRhbG9nRmlsdGVyLmZpbmQoJy5tb2RhbC1jbG9zZScpLmxlbmd0aCkge1xyXG4gICAgICAkKGNhdGFsb2dGaWx0ZXIuZmluZCgnLm1vZGFsLWNsb3NlJykpLmRldGFjaCgpO1xyXG4gICAgfVxyXG4gICAgY2F0YWxvZ0ZpbHRlci5wcmVwZW5kVG8oY2F0YWxvZ0FzaWRlKTtcclxuICAgIGNhdGFsb2dBcnRpY2xlcy5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xyXG4gICAgY2F0YWxvZ0Jhbm5lci5hcHBlbmRUbyhjYXRhbG9nQXNpZGUpO1xyXG4gIH1cclxuXHJcbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCBoZXJvID0gJCgnLmhlcm8nKTtcclxuXHJcbiAgaWYgKGhlcm8ubGVuZ3RoKSB7XHJcbiAgICBoZXJvLnNsaWNrKHtcclxuICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgZmFkZTogdHJ1ZSxcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCBtb2JpbGVTbGlkZXIgPSAkKCcuYWR2YW50YWdlcyB1bCwgLnJldmlld3MtcmF0ZScpO1xyXG5cclxuICByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcik7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmVwYWludE1vYmlsZVNsaWRlcihtb2JpbGVTbGlkZXIpO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcikge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgICQobW9iaWxlU2xpZGVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ3NsaWNrLXNsaWRlcicpKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQobW9iaWxlU2xpZGVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICQodGhpcykuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgcmV2aWV3c1Jlc3VsdFBlcmNlbnQgPSAkKCcucmV2aWV3cy1yZXN1bHQtcGVyY2VudCcpO1xyXG5cclxuICByZXZpZXdzUmVzdWx0UGVyY2VudC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCdkYXRhLXJlc3VsdC1wZXJjZW50JykpO1xyXG4gICAgY29uc3QgdmFsdWVET00gPSAkKHRoaXMpLmZpbmQoJy5yZXZpZXdzLXJlc3VsdC1wZXJjZW50LXZhbHVlJyk7XHJcbiAgICAkKCc8ZGl2IGNsYXNzPVwicmV2aWV3cy1yZXN1bHQtcGVyY2VudC1jb2xvclwiPjwvZGl2PicpXHJcbiAgICAgIC5hcHBlbmRUbyh2YWx1ZURPTSkuY3NzKCd3aWR0aCcsIHZhbHVlICsgJyUnKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLnJldmlld3MtbGlzdCAucmV2aWV3cy1jYXJkIHAgLnNob3ctYWxsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmFsbC10ZXh0JykuY3NzKCdkaXNwbGF5JywgJ2lubGluZScpO1xyXG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmRvdHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gIH0pO1xyXG5cclxufSk7IiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IHNsaWRlcnMgPSAkKCcuY2VydGlmaWNhdGVzLWxpc3QsIC5wcm9kdWN0LWxpc3QsIC5hcnRpY2xlcy1saXN0LCAucmV2aWV3cy1zbGlkZXInKTtcclxuXHJcbiAgaWYgKHNsaWRlcnMubGVuZ3RoKSB7XHJcblxyXG4gICAgc2xpZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3Byb2R1Y3QtbGlzdCcpIHx8ICQodGhpcykuaGFzQ2xhc3MoJ2NlcnRpZmljYXRlcy1saXN0JykpIHtcclxuICAgICAgICAkKHRoaXMpLnNsaWNrKHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcclxuICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEyMDAsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDkzMCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuc2xpY2soe1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgdmVydGljYWw6ZmFsc2UsXHJcbiAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAkKHRoaXMpLmZpbmQoJy5zbGljay1wcmV2JykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzbGlkZXJzLm9uKCdiZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlKSB7XHJcbiAgICAgIHNldFNsaWRlckFycm93cygkKHRoaXMpLCBuZXh0U2xpZGUpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0U2xpZGVyQXJyb3dzIChzbGlkZXIsIG5leHRTbGlkZSkge1xyXG4gICAgY29uc3QgcHJldiA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stcHJldicpO1xyXG4gICAgY29uc3QgbmV4dCA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stbmV4dCcpO1xyXG4gICAgY29uc3Qgc2l6ZSA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stc2xpZGUnKS5sZW5ndGg7XHJcbiAgICBjb25zdCB2aXNpYmxlID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1zbGlkZS5zbGljay1hY3RpdmUnKS5sZW5ndGg7XHJcbiAgICBjb25zdCBzbWFsbEFtb3VudCA9IHZpc2libGUgKyAxID09PSBzaXplO1xyXG4gICAgaWYgKG5leHRTbGlkZSA9PT0gMCkge1xyXG4gICAgICBwcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICBuZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICAgIGlmIChzbWFsbEFtb3VudCkge1xyXG4gICAgICBpZiAobmV4dFNsaWRlICsgdmlzaWJsZSA+PSBzaXplKSB7XHJcbiAgICAgICAgbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBwcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChuZXh0U2xpZGUgKyB2aXNpYmxlID4gc2l6ZSAtIDEpIHtcclxuICAgICAgICBuZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iXX0=
