"use strict";$(function(){var e=$(".wrapper"),s=$("body"),t=$(".header-bottom .wrapper-inner"),i=$(".header-nav"),a=$(".header .contacts"),n=$(".header .address-hours"),o=$(".header-search"),l=$(".header-cart"),c=$(".footer-subscribe"),r=$(".footer-copyrights"),d=$(".footer-social"),h=$(".chooser"),f=$(".chooser.chooser-color");function p(){$(window).width()<768?(o.insertBefore(l),a.appendTo(i),n.appendTo(i),c.insertAfter(r)):($(window).width()<1200?(o.insertBefore(l),a.appendTo(t),n.appendTo(i)):(o.removeClass("active"),$(".header").removeClass("menu-opened"),o.appendTo(t),a.appendTo(t),n.appendTo(t)),c.insertBefore(d))}setTimeout(function(){e.animate({opacity:1},500)},500),p(),$(window).on("resize",function(){p()}),$("[data-removable-close]").on("click",function(){$(this).parents("[data-removable]").fadeOut(400,function(){$(this).detach()})}),$('.header-search button[type="submit"]').on("click",function(e){e.preventDefault();var t=$(this).parents(".header-search");$(window).width()<1200?t.hasClass("active")?t.submit():t.addClass("active"):t.submit()}),$(".field-rate-list i").on("click",function(){var s=$(this).index()+1;$(this).parents(".field-rate").find('input[type="hidden"]').val(s),$(this).parents(".field-rate-list").find("i").each(function(e,t){s<=e?$(t).removeClass("fa-red").addClass("fa-grey"):$(t).removeClass("fa-grey").addClass("fa-red")})}),$('.field-file input[type="file"]').on("change",function(){var e=$(this).val().split("\\");$(this).siblings(".field-file-text").text(e[e.length-1])}),$('input[type="tel"]').mask("+7 (999) 999-999-99"),$(".header-burger").on("click",function(){$(this).parents(".header").toggleClass("menu-opened")}),$("[data-call-modal]").on("click",function(){var e=$(this).attr("data-call-modal"),t=$(window).scrollTop();s.addClass("modal-opened"),$('[data-modal="'.concat(e,'"]')).fadeIn(300).css({display:"flex",top:"".concat(t,"px")})}),$(".modal").on("click",function(e){var t=$(e.target);!t.hasClass("modal-close")&&t.closest(".modal-inner").length||($(this).fadeOut(300),s.removeClass("modal-opened"))}),$("[data-select-control]").on("click",function(){$(this).parents("[data-select]").hasClass("active")?$(this).parents("[data-select]").removeClass("active"):($("[data-select]").removeClass("active"),$(this).parents("[data-select]").addClass("active"))}),$("[data-select] ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).text();$(this).addClass("active"),$(this).siblings(".active").removeClass("active"),$(this).parents("ul").siblings("[data-select-control]").text(e),$(this).parents("ul").siblings("input").val(e),$(this).parents("[data-select]").removeClass("active")}}),$(".amount-chooser-control").on("click",function(){var e=$(this).siblings("input"),t=parseInt(e.val());$(this).hasClass("amount-chooser-minus")?1<t&&e.val(t-1):$(this).hasClass("amount-chooser-plus")&&e.val(t+1),e.trigger("change")}),$(".amount-chooser input").on("change",function(){var e=$(this).parents(".amount-chooser").siblings(".card-cost").children(".card-cost-value"),t=parseInt($(this).val()),s=parseInt($(this).parents(".amount-chooser").attr("data-cost"));e.text(t*s+" руб.")}),h.find(".chooser-value").on("click",function(){if($(this).closest(".catalog-brands").length||$(this).closest(".chooser-color").length&&767<$(window).width())return!1;$(this).parents(".chooser").toggleClass("active")}),h.find("ul li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).html();$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).parents(".chooser").removeClass("active"),$(this).closest(".chooser-color").length?($(window).width()<768&&$(this).parents("ul").siblings(".chooser-value").html(e),$(this).parents("ul").siblings("input").val($(this).find(".chooser-color-text").text())):($(this).parents("ul").siblings(".chooser-value").html(e),$(this).parents("ul").siblings("input").val(e))}}),f.find("ul li").on("click",function(e){if(e.preventDefault(),!$(this).hasClass("active")){var t=$(this).find(".chooser-color-text").text();$(this).parents("ul").siblings("input").val(t)}}),$(document).on("click",function(e){var t=$(e.target);0===t.closest("[data-select]").length&&$(".active[data-select]").removeClass("active"),0===t.closest(".header-search").length&&$(".header-search").removeClass("active"),0===t.closest(".chooser").length&&h.removeClass("active")})}),$(function(){var e=$("body"),t=$(".catalog-filter"),s=$(".catalog-articles"),i=$(".catalog-banner"),a=$(".breadcrumbs"),n=$(".catalog-aside"),o=document.getElementById("filter-cost"),l=[document.getElementById("filter-cost-from"),document.getElementById("filter-cost-to")];function c(){$(window).width()<1200?function(){a.prependTo($(".header").next(".wrapper-inner")),0===t.find(".modal-close").length&&$('<div class="modal-close"></div>').prependTo(t);t.appendTo('.modal[data-modal="filter"]'),s.insertAfter(".pagination"),i.insertAfter(s)}():function(){a.prependTo($(".catalog-content")),e.removeClass("modal-opened"),$('.modal[data-modal="filter"]').css({display:"none",top:"auto"}),t.find(".modal-close").length&&$(t.find(".modal-close")).detach();t.prependTo(n),s.appendTo(n),i.appendTo(n)}()}c(),o&&(noUiSlider.create(o,{start:[1e3,5e3],step:100,margin:1e3,connect:!0,range:{min:0,max:8e3}}),l.forEach(function(e,t){e.addEventListener("change",function(){o.noUiSlider.setHandle(t,l[t].value)})}),o.noUiSlider.on("update",function(e,t){l[t].value=Math.trunc(e[t])})),$(window).on("resize",function(){c()})}),$(function(){var e=$(".hero");e.length&&e.slick({dots:!0,arrows:!1,fade:!0,autoplay:!0,autoplaySpeed:5e3})}),$(function(){var e=$(".item-image-large"),t=$(".item-image-small"),s=$(".item-params"),i=$(".chooser.chooser-color ul"),a=$(".item .item-list"),n=$(".item-image"),o=$(".item-form-header"),l=$(".item-delivery"),c=$(".item-form");function r(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")}):$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick({slidesToShow:3,infinite:!1})})}function d(){$(window).width()<768?(a.insertAfter(o),l.insertAfter(c)):$(window).width()<1200?(a.appendTo(n),l.insertAfter(c)):(a.appendTo(n),l.appendTo(c))}d(),r(i),s.length&&s.slick({slidesToShow:3,responsive:[{breakpoint:1200,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:2}}]}),e.length&&t.length&&(e.slick({arrows:!1,fade:!0,asNavFor:".item-image-small"}),t.slick({slidesToShow:4,focusOnSelect:!0,asNavFor:".item-image-large",responsive:[{breakpoint:1200,settings:{slidesToShow:2}}]})),$(window).on("resize",function(){r(i),d()}),$(".item-tab-header li").on("click",function(){if($(this).hasClass("active"))$(window).width()<768&&$(this).parents(".item-tab-header").toggleClass("active");else{var e=$(this).attr("data-tab");$(".item-tab-content > li").fadeOut(0),$(".item-tab-content").find('li[data-tab="'+e+'"]').fadeIn(),$(this).siblings().removeClass("active"),$(this).addClass("active"),$(window).width()<768&&$(this).parents(".item-tab-header").removeClass("active")}}),$(".item-list-all").on("click",function(){$("html, body").animate({scrollTop:$(".item-tab-content").offset().top-120},400,function(){$('.item-tab-header li[data-tab="params"]').addClass("active").siblings().removeClass("active"),$('.item-tab-content li[data-tab="params"]').fadeIn().siblings().fadeOut(0)})})}),$(function(){var e=$(".advantages ul, .reviews-rate");function t(e){$(window).width()<768?$(e).each(function(){$(this).hasClass("slick-slider")||$(this).slick()}):$(e).each(function(){$(this).hasClass("slick-slider")&&$(this).slick("unslick")})}t(e),$(window).on("resize",function(){t(e)})}),$(function(){$(".reviews-result-percent").each(function(){var e=parseInt($(this).attr("data-result-percent")),t=$(this).find(".reviews-result-percent-value");$('<div class="reviews-result-percent-color"></div>').appendTo(t).css("width",e+"%")}),$(".reviews-list .reviews-card p .show-all").on("click",function(){$(this).siblings(".all-text").css("display","inline"),$(this).siblings(".dots").css("display","none"),$(this).css("display","none")})}),$(function(){var e=$(".certificates-list, .product-list, .articles-list, .reviews-slider");e.length&&(e.each(function(){$(this).hasClass("product-list")||$(this).hasClass("certificates-list")?$(this).slick({slidesToShow:4,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3,infinite:!1}},{breakpoint:930,settings:{slidesToShow:2,infinite:!1}},{breakpoint:768,settings:{infinite:!0,slidesToShow:1}}]}):$(this).slick({slidesToShow:2,vertical:!1,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,infinite:!1,vertical:!0}},{breakpoint:768,settings:{slidesToShow:1,infinite:!0,vertical:!1}}]}),$(this).find(".slick-prev").addClass("disabled")}),e.on("beforeChange",function(e,t,s,i){!function(e,t){var s=$(e).find(".slick-prev"),i=$(e).find(".slick-next"),a=$(e).find(".slick-slide").length,n=$(e).find(".slick-slide.slick-active").length,o=n+1===a;0===t?(s.addClass("disabled"),i.removeClass("disabled")):s.removeClass("disabled");o?a<=t+n?(i.addClass("disabled"),s.removeClass("disabled")):i.removeClass("disabled"):a-1<t+n?(i.addClass("disabled"),s.removeClass("disabled")):i.removeClass("disabled")}($(this),i)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjYXRhbG9nLmpzIiwiaGVyby5qcyIsIml0ZW0uanMiLCJtb2JpbGVTbGlkZXIuanMiLCJyZXZpZXdzLmpzIiwic2xpZGVycy5qcyJdLCJuYW1lcyI6WyIkIiwid3JhcHBlciIsImJvZHkiLCJoZWFkZXJCb3R0b20iLCJoZWFkZXJOYXYiLCJoZWFkZXJDb250YWN0cyIsImhlYWRlckFkZHJlc3MiLCJoZWFkZXJTZWFyY2giLCJoZWFkZXJDYXJ0IiwiZm9vdGVyU3Vic2NyaWJlIiwiZm9vdGVyQ29weXJpZ2h0cyIsImZvb3RlclNvY2lhbCIsImNob29zZXIiLCJjaG9vc2VyQ29sb3IiLCJwYWdlUmVwYWludCIsIndpbmRvdyIsIndpZHRoIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlbW92ZUNsYXNzIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJvcGFjaXR5Iiwib24iLCJ0aGlzIiwicGFyZW50cyIsImZhZGVPdXQiLCJkZXRhY2giLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm9ybSIsImhhc0NsYXNzIiwic3VibWl0IiwiYWRkQ2xhc3MiLCJ2YWx1ZSIsImluZGV4IiwiZmluZCIsInZhbCIsImVhY2giLCJlbGVtZW50IiwidmFsQXJyYXkiLCJzcGxpdCIsInNpYmxpbmdzIiwidGV4dCIsImxlbmd0aCIsIm1hc2siLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsImF0dHIiLCJzY3JvbGxWYWx1ZSIsInNjcm9sbFRvcCIsImNvbmNhdCIsImZhZGVJbiIsImNzcyIsImRpc3BsYXkiLCJ0b3AiLCJjbG9zZXN0IiwiYW1vdW50RE9NIiwiYW1vdW50VmFsdWUiLCJwYXJzZUludCIsInRyaWdnZXIiLCJjb3N0RE9NIiwiY2hpbGRyZW4iLCJhbW91bnQiLCJpdGVtQ29zdCIsImh0bWwiLCJkb2N1bWVudCIsImNhdGFsb2dGaWx0ZXIiLCJjYXRhbG9nQXJ0aWNsZXMiLCJjYXRhbG9nQmFubmVyIiwiYnJlYWRjcnVtYnMiLCJjYXRhbG9nQXNpZGUiLCJmaWx0ZXJDb3N0IiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWx0ZXJDb3N0SGFuZGxlcyIsImNhdGFsb2dSZXBhaW50IiwicHJlcGVuZFRvIiwibmV4dCIsInJlbmRlck1vYmlsZUNhdGFsb2ciLCJyZW5kZXJEZXNrdG9wQ2F0YWxvZyIsIm5vVWlTbGlkZXIiLCJjcmVhdGUiLCJzdGFydCIsInN0ZXAiLCJtYXJnaW4iLCJjb25uZWN0IiwicmFuZ2UiLCJtaW4iLCJtYXgiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEhhbmRsZSIsInZhbHVlcyIsImhhbmRsZSIsIk1hdGgiLCJ0cnVuYyIsImhlcm8iLCJzbGljayIsImRvdHMiLCJhcnJvd3MiLCJmYWRlIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwiaXRlbVNsaWRlckxhcmdlIiwiaXRlbVNsaWRlclNtYWxsIiwicGFyYW1zIiwiY29sb3JTbGlkZXIiLCJpdGVtTGlzdCIsIml0ZW1JbWFnZSIsIml0ZW1Gb3JtSGVhZGVyIiwiaXRlbURlbGl2ZXJ5IiwiaXRlbUZvcm0iLCJyZXBhaW50Q29sb3JTbGlkZXIiLCJzbGlkZXNUb1Nob3ciLCJpbmZpbml0ZSIsIml0ZW1SZXBhaW50IiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsImFzTmF2Rm9yIiwiZm9jdXNPblNlbGVjdCIsImN1cnJlbnQiLCJvZmZzZXQiLCJtb2JpbGVTbGlkZXIiLCJyZXBhaW50TW9iaWxlU2xpZGVyIiwidmFsdWVET00iLCJzbGlkZXJzIiwidmVydGljYWwiLCJjdXJyZW50U2xpZGUiLCJuZXh0U2xpZGUiLCJzbGlkZXIiLCJwcmV2Iiwic2l6ZSIsInZpc2libGUiLCJzbWFsbEFtb3VudCIsInNldFNsaWRlckFycm93cyJdLCJtYXBwaW5ncyI6ImFBQUFBLEVBQUUsV0FFQSxJQUFNQyxFQUFVRCxFQUFFLFlBQ1pFLEVBQU9GLEVBQUUsUUFDVEcsRUFBZUgsRUFBRSxpQ0FDakJJLEVBQVlKLEVBQUUsZUFDZEss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eEQsRUFBSzVDLFNBQVMsWUFDZGtHLEVBQUtoSCxZQUFZLGFBRWpCMEQsRUFBSzFELFlBQVksWUE3Qm5Cb0gsQ0FBZ0J4SSxFQUFFeUIsTUFBT3lHIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IHdyYXBwZXIgPSAkKCcud3JhcHBlcicpO1xyXG4gIGNvbnN0IGJvZHkgPSAkKCdib2R5Jyk7XHJcbiAgY29uc3QgaGVhZGVyQm90dG9tID0gJCgnLmhlYWRlci1ib3R0b20gLndyYXBwZXItaW5uZXInKTtcclxuICBjb25zdCBoZWFkZXJOYXYgPSAkKCcuaGVhZGVyLW5hdicpO1xyXG4gIGNvbnN0IGhlYWRlckNvbnRhY3RzID0gJCgnLmhlYWRlciAuY29udGFjdHMnKTtcclxuICBjb25zdCBoZWFkZXJBZGRyZXNzID0gJCgnLmhlYWRlciAuYWRkcmVzcy1ob3VycycpO1xyXG4gIGNvbnN0IGhlYWRlclNlYXJjaCA9ICQoJy5oZWFkZXItc2VhcmNoJyk7XHJcbiAgY29uc3QgaGVhZGVyQ2FydCA9ICQoJy5oZWFkZXItY2FydCcpO1xyXG4gIGNvbnN0IGZvb3RlclN1YnNjcmliZSA9ICQoJy5mb290ZXItc3Vic2NyaWJlJyk7XHJcbiAgY29uc3QgZm9vdGVyQ29weXJpZ2h0cyA9ICQoJy5mb290ZXItY29weXJpZ2h0cycpO1xyXG4gIGNvbnN0IGZvb3RlclNvY2lhbCA9ICQoJy5mb290ZXItc29jaWFsJyk7XHJcbiAgY29uc3QgY2hvb3NlciA9ICQoJy5jaG9vc2VyJyk7XHJcbiAgY29uc3QgY2hvb3NlckNvbG9yID0gJCgnLmNob29zZXIuY2hvb3Nlci1jb2xvcicpO1xyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgIHdyYXBwZXIuYW5pbWF0ZSh7b3BhY2l0eTogMX0sIDUwMCk7XHJcbiAgfSwgNTAwKTtcclxuXHJcbiAgcGFnZVJlcGFpbnQoKTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwYWdlUmVwYWludCgpO1xyXG4gIH0pO1xyXG5cclxuICAkKCdbZGF0YS1yZW1vdmFibGUtY2xvc2VdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1yZW1vdmFibGVdJylcclxuICAgICAgLmZhZGVPdXQoNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5kZXRhY2goKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5oZWFkZXItc2VhcmNoIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgZm9ybSA9ICQodGhpcykucGFyZW50cygnLmhlYWRlci1zZWFyY2gnKTtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuICAgICAgaWYgKGZvcm0uaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgZm9ybS5zdWJtaXQoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3JtLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9ybS5zdWJtaXQoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnLmZpZWxkLXJhdGUtbGlzdCBpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLmluZGV4KCkgKyAxO1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuZmllbGQtcmF0ZScpLmZpbmQoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKS52YWwodmFsdWUpO1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuZmllbGQtcmF0ZS1saXN0JykuZmluZCgnaScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgIGlmIChpbmRleCA+PSB2YWx1ZSkge1xyXG4gICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2ZhLXJlZCcpLmFkZENsYXNzKCdmYS1ncmV5Jyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnZmEtZ3JleScpLmFkZENsYXNzKCdmYS1yZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5maWVsZC1maWxlIGlucHV0W3R5cGU9XCJmaWxlXCJdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZhbEFycmF5ID0gJCh0aGlzKS52YWwoKS5zcGxpdCgnXFxcXCcpO1xyXG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmZpZWxkLWZpbGUtdGV4dCcpLnRleHQodmFsQXJyYXlbdmFsQXJyYXkubGVuZ3RoIC0gMV0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCdpbnB1dFt0eXBlPVwidGVsXCJdJykubWFzayhcIis3ICg5OTkpIDk5OS05OTktOTlcIik7XHJcblxyXG4gICQoJy5oZWFkZXItYnVyZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyJykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbmVkJyk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLWNhbGwtbW9kYWxdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdkYXRhLWNhbGwtbW9kYWwnKTtcclxuICAgIGNvbnN0IHNjcm9sbFZhbHVlID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgYm9keS5hZGRDbGFzcygnbW9kYWwtb3BlbmVkJyk7XHJcbiAgICAkKGBbZGF0YS1tb2RhbD1cIiR7dGFyZ2V0fVwiXWApLmZhZGVJbigzMDApLmNzcyh7XHJcbiAgICAgICdkaXNwbGF5JzogJ2ZsZXgnLFxyXG4gICAgICAndG9wJzogYCR7c2Nyb2xsVmFsdWV9cHhgXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgJCgnLm1vZGFsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICBpZiAodGFyZ2V0Lmhhc0NsYXNzKCdtb2RhbC1jbG9zZScpIHx8ICF0YXJnZXQuY2xvc2VzdCgnLm1vZGFsLWlubmVyJykubGVuZ3RoKSB7XHJcbiAgICAgICQodGhpcykuZmFkZU91dCgzMDApO1xyXG4gICAgICBib2R5LnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuZWQnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnW2RhdGEtc2VsZWN0LWNvbnRyb2xdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykucGFyZW50cygnW2RhdGEtc2VsZWN0XScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLXNlbGVjdF0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJ1tkYXRhLXNlbGVjdF0gdWwgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJ1tkYXRhLXNlbGVjdC1jb250cm9sXScpLnRleHQodmFsdWUpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJ2lucHV0JykudmFsKHZhbHVlKTtcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKCdbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcuYW1vdW50LWNob29zZXItY29udHJvbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGFtb3VudERPTSA9ICQodGhpcykuc2libGluZ3MoJ2lucHV0Jyk7XHJcbiAgICBjb25zdCBhbW91bnRWYWx1ZSA9IHBhcnNlSW50KGFtb3VudERPTS52YWwoKSk7XHJcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYW1vdW50LWNob29zZXItbWludXMnKSkge1xyXG4gICAgICBpZiAoYW1vdW50VmFsdWUgPiAxKSB7XHJcbiAgICAgICAgYW1vdW50RE9NLnZhbChhbW91bnRWYWx1ZSAtIDEpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Ftb3VudC1jaG9vc2VyLXBsdXMnKSkge1xyXG4gICAgICBhbW91bnRET00udmFsKGFtb3VudFZhbHVlICsgMSk7XHJcbiAgICB9XHJcbiAgICBhbW91bnRET00udHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5hbW91bnQtY2hvb3NlciBpbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjb3N0RE9NID0gJCh0aGlzKS5wYXJlbnRzKCcuYW1vdW50LWNob29zZXInKS5zaWJsaW5ncygnLmNhcmQtY29zdCcpLmNoaWxkcmVuKCcuY2FyZC1jb3N0LXZhbHVlJyk7XHJcbiAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludCgkKHRoaXMpLnZhbCgpKTtcclxuICAgIGNvbnN0IGl0ZW1Db3N0ID0gcGFyc2VJbnQoJCh0aGlzKS5wYXJlbnRzKCcuYW1vdW50LWNob29zZXInKS5hdHRyKCdkYXRhLWNvc3QnKSk7XHJcbiAgICBjb3N0RE9NLnRleHQoYW1vdW50ICogaXRlbUNvc3QgKyAnINGA0YPQsS4nKTtcclxuICB9KTtcclxuXHJcbiAgY2hvb3Nlci5maW5kKCcuY2hvb3Nlci12YWx1ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5jYXRhbG9nLWJyYW5kcycpLmxlbmd0aFxyXG4gICAgICB8fCAkKHRoaXMpLmNsb3Nlc3QoJy5jaG9vc2VyLWNvbG9yJykubGVuZ3RoXHJcbiAgICAgICYmICQod2luZG93KS53aWR0aCgpID4gNzY3KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQodGhpcykucGFyZW50cygnLmNob29zZXInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNob29zZXIuZmluZCgndWwgbGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gJCh0aGlzKS5odG1sKCk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnBhcmVudHMoJy5jaG9vc2VyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuY2hvb3Nlci1jb2xvcicpLmxlbmd0aCkge1xyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xyXG4gICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCcuY2hvb3Nlci12YWx1ZScpLmh0bWwodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuc2libGluZ3MoJ2lucHV0JykudmFsKCQodGhpcykuZmluZCgnLmNob29zZXItY29sb3ItdGV4dCcpLnRleHQoKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCd1bCcpLnNpYmxpbmdzKCcuY2hvb3Nlci12YWx1ZScpLmh0bWwodmFsdWUpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwodmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNob29zZXJDb2xvci5maW5kKCd1bCBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSAkKHRoaXMpLmZpbmQoJy5jaG9vc2VyLWNvbG9yLXRleHQnKS50ZXh0KCk7XHJcbiAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnaW5wdXQnKS52YWwodmFsdWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuXHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXNlbGVjdF0nKS5sZW5ndGggPT09IDApICQoJy5hY3RpdmVbZGF0YS1zZWxlY3RdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuaGVhZGVyLXNlYXJjaCcpLmxlbmd0aCA9PT0gMCkgJCgnLmhlYWRlci1zZWFyY2gnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5jaG9vc2VyJykubGVuZ3RoID09PSAwKSBjaG9vc2VyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHBhZ2VSZXBhaW50KCkge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgIHJlbmRlck1vYmlsZUhlYWRlcigpO1xyXG4gICAgICByZW5kZXJNb2JpbGVGb290ZXIoKTtcclxuICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIHJlbmRlclRhYmxldEhlYWRlcigpO1xyXG4gICAgICByZW5kZXJUYWJsZXRGb290ZXIoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlclNlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnbWVudS1vcGVuZWQnKTtcclxuICAgICAgcmVuZGVyRGVza3RvcEhlYWRlcigpO1xyXG4gICAgICByZW5kZXJEZXNrdG9wRm9vdGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJNb2JpbGVIZWFkZXIoKSB7XHJcbiAgICBoZWFkZXJTZWFyY2guaW5zZXJ0QmVmb3JlKGhlYWRlckNhcnQpO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyTmF2KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5pbnNlcnRCZWZvcmUoaGVhZGVyQ2FydCk7XHJcbiAgICBoZWFkZXJDb250YWN0cy5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQWRkcmVzcy5hcHBlbmRUbyhoZWFkZXJOYXYpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRGVza3RvcEhlYWRlcigpIHtcclxuICAgIGhlYWRlclNlYXJjaC5hcHBlbmRUbyhoZWFkZXJCb3R0b20pO1xyXG4gICAgaGVhZGVyQ29udGFjdHMuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICAgIGhlYWRlckFkZHJlc3MuYXBwZW5kVG8oaGVhZGVyQm90dG9tKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlck1vYmlsZUZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRBZnRlcihmb290ZXJDb3B5cmlnaHRzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclRhYmxldEZvb3RlcigpIHtcclxuICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BGb290ZXIoKSB7XHJcbiAgICAgIGZvb3RlclN1YnNjcmliZS5pbnNlcnRCZWZvcmUoZm9vdGVyU29jaWFsKTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IGJvZHkgPSAkKCdib2R5Jyk7XHJcbiAgY29uc3QgY2F0YWxvZ0ZpbHRlciA9ICQoJy5jYXRhbG9nLWZpbHRlcicpO1xyXG4gIGNvbnN0IGNhdGFsb2dBcnRpY2xlcyA9ICQoJy5jYXRhbG9nLWFydGljbGVzJyk7XHJcbiAgY29uc3QgY2F0YWxvZ0Jhbm5lciA9ICQoJy5jYXRhbG9nLWJhbm5lcicpO1xyXG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gJCgnLmJyZWFkY3J1bWJzJyk7XHJcbiAgY29uc3QgY2F0YWxvZ0FzaWRlID0gJCgnLmNhdGFsb2ctYXNpZGUnKTtcclxuICBjb25zdCBmaWx0ZXJDb3N0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1jb3N0Jyk7XHJcbiAgY29uc3QgZmlsdGVyQ29zdEhhbmRsZXMgPVtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItY29zdC1mcm9tJyksXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyLWNvc3QtdG8nKVxyXG4gIF07XHJcblxyXG4gIGNhdGFsb2dSZXBhaW50KCk7XHJcblxyXG4gIGlmIChmaWx0ZXJDb3N0KSB7XHJcbiAgICBub1VpU2xpZGVyLmNyZWF0ZShmaWx0ZXJDb3N0LCB7XHJcbiAgICAgIHN0YXJ0OiBbMTAwMCwgNTAwMF0sXHJcbiAgICAgIHN0ZXA6IDEwMCxcclxuICAgICAgbWFyZ2luOiAxMDAwLFxyXG4gICAgICBjb25uZWN0OiB0cnVlLFxyXG4gICAgICByYW5nZToge1xyXG4gICAgICAgICdtaW4nOiAwLFxyXG4gICAgICAgICdtYXgnOiA4MDAwXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZmlsdGVyQ29zdEhhbmRsZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZmlsdGVyQ29zdC5ub1VpU2xpZGVyLnNldEhhbmRsZShpbmRleCwgZmlsdGVyQ29zdEhhbmRsZXNbaW5kZXhdLnZhbHVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGZpbHRlckNvc3Qubm9VaVNsaWRlci5vbigndXBkYXRlJywgZnVuY3Rpb24gKHZhbHVlcywgaGFuZGxlKSB7XHJcbiAgICAgIGZpbHRlckNvc3RIYW5kbGVzW2hhbmRsZV0udmFsdWUgPSBNYXRoLnRydW5jKHZhbHVlc1toYW5kbGVdKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjYXRhbG9nUmVwYWludCgpO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBjYXRhbG9nUmVwYWludCAoKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XHJcbiAgICAgIHJlbmRlck1vYmlsZUNhdGFsb2coKTtcclxuICAgIH0gIGVsc2Uge1xyXG4gICAgICByZW5kZXJEZXNrdG9wQ2F0YWxvZygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyTW9iaWxlQ2F0YWxvZyAoKSB7XHJcbiAgICBicmVhZGNydW1icy5wcmVwZW5kVG8oJCgnLmhlYWRlcicpLm5leHQoJy53cmFwcGVyLWlubmVyJykpO1xyXG4gICAgaWYgKGNhdGFsb2dGaWx0ZXIuZmluZCgnLm1vZGFsLWNsb3NlJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1jbG9zZVwiPjwvZGl2PicpLnByZXBlbmRUbyhjYXRhbG9nRmlsdGVyKTtcclxuICAgIH1cclxuICAgIGNhdGFsb2dGaWx0ZXIuYXBwZW5kVG8oJy5tb2RhbFtkYXRhLW1vZGFsPVwiZmlsdGVyXCJdJyk7XHJcbiAgICBjYXRhbG9nQXJ0aWNsZXMuaW5zZXJ0QWZ0ZXIoJy5wYWdpbmF0aW9uJyk7XHJcbiAgICBjYXRhbG9nQmFubmVyLmluc2VydEFmdGVyKGNhdGFsb2dBcnRpY2xlcyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJEZXNrdG9wQ2F0YWxvZyAoKSB7XHJcbiAgICBicmVhZGNydW1icy5wcmVwZW5kVG8oJCgnLmNhdGFsb2ctY29udGVudCcpKTtcclxuICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW5lZCcpO1xyXG4gICAgJCgnLm1vZGFsW2RhdGEtbW9kYWw9XCJmaWx0ZXJcIl0nKS5jc3Moe1xyXG4gICAgICAnZGlzcGxheSc6ICdub25lJyxcclxuICAgICAgJ3RvcCc6ICdhdXRvJ1xyXG4gICAgfSk7XHJcbiAgICBpZiAoY2F0YWxvZ0ZpbHRlci5maW5kKCcubW9kYWwtY2xvc2UnKS5sZW5ndGgpIHtcclxuICAgICAgJChjYXRhbG9nRmlsdGVyLmZpbmQoJy5tb2RhbC1jbG9zZScpKS5kZXRhY2goKTtcclxuICAgIH1cclxuICAgIGNhdGFsb2dGaWx0ZXIucHJlcGVuZFRvKGNhdGFsb2dBc2lkZSk7XHJcbiAgICBjYXRhbG9nQXJ0aWNsZXMuYXBwZW5kVG8oY2F0YWxvZ0FzaWRlKTtcclxuICAgIGNhdGFsb2dCYW5uZXIuYXBwZW5kVG8oY2F0YWxvZ0FzaWRlKTtcclxuICB9XHJcblxyXG59KTsiLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgaGVybyA9ICQoJy5oZXJvJyk7XHJcblxyXG4gIGlmIChoZXJvLmxlbmd0aCkge1xyXG4gICAgaGVyby5zbGljayh7XHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIGZhZGU6IHRydWUsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhdXRvcGxheVNwZWVkOiA1MDAwXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IGl0ZW1TbGlkZXJMYXJnZSA9ICQoJy5pdGVtLWltYWdlLWxhcmdlJyk7XHJcbiAgY29uc3QgaXRlbVNsaWRlclNtYWxsID0gJCgnLml0ZW0taW1hZ2Utc21hbGwnKTtcclxuICBjb25zdCBwYXJhbXMgPSAkKCcuaXRlbS1wYXJhbXMnKTtcclxuICBjb25zdCBjb2xvclNsaWRlciA9ICQoJy5jaG9vc2VyLmNob29zZXItY29sb3IgdWwnKTtcclxuICBjb25zdCBpdGVtTGlzdCA9ICQoJy5pdGVtIC5pdGVtLWxpc3QnKTtcclxuICBjb25zdCBpdGVtSW1hZ2UgPSAkKCcuaXRlbS1pbWFnZScpO1xyXG4gIGNvbnN0IGl0ZW1Gb3JtSGVhZGVyID0gJCgnLml0ZW0tZm9ybS1oZWFkZXInKTtcclxuICBjb25zdCBpdGVtRGVsaXZlcnkgPSAkKCcuaXRlbS1kZWxpdmVyeScpO1xyXG4gIGNvbnN0IGl0ZW1Gb3JtID0gJCgnLml0ZW0tZm9ybScpO1xyXG5cclxuICBpdGVtUmVwYWludCgpO1xyXG5cclxuICByZXBhaW50Q29sb3JTbGlkZXIoY29sb3JTbGlkZXIpO1xyXG5cclxuICBpZiAocGFyYW1zLmxlbmd0aCkge1xyXG4gICAgcGFyYW1zLnNsaWNrKHtcclxuICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWtwb2ludDogMTIwMCxcclxuICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogNFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGlmIChpdGVtU2xpZGVyTGFyZ2UubGVuZ3RoICYmIGl0ZW1TbGlkZXJTbWFsbC5sZW5ndGgpIHtcclxuXHJcbiAgICBpdGVtU2xpZGVyTGFyZ2Uuc2xpY2soe1xyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICBmYWRlOiB0cnVlLFxyXG4gICAgICBhc05hdkZvcjogJy5pdGVtLWltYWdlLXNtYWxsJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXRlbVNsaWRlclNtYWxsLnNsaWNrKHtcclxuICAgICAgc2xpZGVzVG9TaG93OiA0LFxyXG4gICAgICBmb2N1c09uU2VsZWN0OiB0cnVlLFxyXG4gICAgICBhc05hdkZvcjogJy5pdGVtLWltYWdlLWxhcmdlJyxcclxuICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrcG9pbnQ6IDEyMDAsXHJcbiAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmVwYWludENvbG9yU2xpZGVyKGNvbG9yU2xpZGVyKTtcclxuICAgIGl0ZW1SZXBhaW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlcGFpbnRDb2xvclNsaWRlcihjb2xvclNsaWRlcikge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgICQoY29sb3JTbGlkZXIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdzbGljay1zbGlkZXInKSkge1xyXG4gICAgICAgICAgJCh0aGlzKS5zbGljaygndW5zbGljaycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKGNvbG9yU2xpZGVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ3NsaWNrLXNsaWRlcicpKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnNsaWNrKHtcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgICAgICBpbmZpbml0ZTogZmFsc2VcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpdGVtUmVwYWludCgpIHtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xyXG4gICAgICByZW5kZXJNb2JpbGVJdGVtKCk7XHJcbiAgICB9IGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xyXG4gICAgICByZW5kZXJUYWJsZXRJdGVtKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZW5kZXJEZXNrdG9wSXRlbSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyTW9iaWxlSXRlbSAoKSB7XHJcbiAgICBpdGVtTGlzdC5pbnNlcnRBZnRlcihpdGVtRm9ybUhlYWRlcik7XHJcbiAgICBpdGVtRGVsaXZlcnkuaW5zZXJ0QWZ0ZXIoaXRlbUZvcm0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyVGFibGV0SXRlbSAoKSB7XHJcbiAgICBpdGVtTGlzdC5hcHBlbmRUbyhpdGVtSW1hZ2UpO1xyXG4gICAgaXRlbURlbGl2ZXJ5Lmluc2VydEFmdGVyKGl0ZW1Gb3JtKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRlc2t0b3BJdGVtICgpIHtcclxuICAgIGl0ZW1MaXN0LmFwcGVuZFRvKGl0ZW1JbWFnZSk7XHJcbiAgICBpdGVtRGVsaXZlcnkuYXBwZW5kVG8oaXRlbUZvcm0pO1xyXG4gIH1cclxuXHJcbiAgJCgnLml0ZW0tdGFiLWhlYWRlciBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5pdGVtLXRhYi1oZWFkZXInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGFiJyk7XHJcbiAgICAgICQoJy5pdGVtLXRhYi1jb250ZW50ID4gbGknKS5mYWRlT3V0KDApO1xyXG4gICAgICAkKCcuaXRlbS10YWItY29udGVudCcpLmZpbmQoJ2xpW2RhdGEtdGFiPVwiJyArIGN1cnJlbnQgKyAnXCJdJykuZmFkZUluKCk7XHJcbiAgICAgICQodGhpcykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA3NjgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5pdGVtLXRhYi1oZWFkZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5pdGVtLWxpc3QtYWxsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICBzY3JvbGxUb3A6ICQoJy5pdGVtLXRhYi1jb250ZW50Jykub2Zmc2V0KCkudG9wIC0gMTIwXHJcbiAgICB9LCA0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgJCgnLml0ZW0tdGFiLWhlYWRlciBsaVtkYXRhLXRhYj1cInBhcmFtc1wiXScpXHJcbiAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJCgnLml0ZW0tdGFiLWNvbnRlbnQgbGlbZGF0YS10YWI9XCJwYXJhbXNcIl0nKVxyXG4gICAgICAgIC5mYWRlSW4oKS5zaWJsaW5ncygpLmZhZGVPdXQoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbn0pOyIsIiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICBjb25zdCBtb2JpbGVTbGlkZXIgPSAkKCcuYWR2YW50YWdlcyB1bCwgLnJldmlld3MtcmF0ZScpO1xyXG5cclxuICByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcik7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmVwYWludE1vYmlsZVNsaWRlcihtb2JpbGVTbGlkZXIpO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiByZXBhaW50TW9iaWxlU2xpZGVyKG1vYmlsZVNsaWRlcikge1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgICQobW9iaWxlU2xpZGVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ3NsaWNrLXNsaWRlcicpKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQobW9iaWxlU2xpZGVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnc2xpY2stc2xpZGVyJykpIHtcclxuICAgICAgICAgICQodGhpcykuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgY29uc3QgcmV2aWV3c1Jlc3VsdFBlcmNlbnQgPSAkKCcucmV2aWV3cy1yZXN1bHQtcGVyY2VudCcpO1xyXG5cclxuICByZXZpZXdzUmVzdWx0UGVyY2VudC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoJCh0aGlzKS5hdHRyKCdkYXRhLXJlc3VsdC1wZXJjZW50JykpO1xyXG4gICAgY29uc3QgdmFsdWVET00gPSAkKHRoaXMpLmZpbmQoJy5yZXZpZXdzLXJlc3VsdC1wZXJjZW50LXZhbHVlJyk7XHJcbiAgICAkKCc8ZGl2IGNsYXNzPVwicmV2aWV3cy1yZXN1bHQtcGVyY2VudC1jb2xvclwiPjwvZGl2PicpXHJcbiAgICAgIC5hcHBlbmRUbyh2YWx1ZURPTSkuY3NzKCd3aWR0aCcsIHZhbHVlICsgJyUnKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLnJldmlld3MtbGlzdCAucmV2aWV3cy1jYXJkIHAgLnNob3ctYWxsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmFsbC10ZXh0JykuY3NzKCdkaXNwbGF5JywgJ2lubGluZScpO1xyXG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmRvdHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gIH0pO1xyXG5cclxufSk7IiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGNvbnN0IHNsaWRlcnMgPSAkKCcuY2VydGlmaWNhdGVzLWxpc3QsIC5wcm9kdWN0LWxpc3QsIC5hcnRpY2xlcy1saXN0LCAucmV2aWV3cy1zbGlkZXInKTtcclxuXHJcbiAgaWYgKHNsaWRlcnMubGVuZ3RoKSB7XHJcblxyXG4gICAgc2xpZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3Byb2R1Y3QtbGlzdCcpIHx8ICQodGhpcykuaGFzQ2xhc3MoJ2NlcnRpZmljYXRlcy1saXN0JykpIHtcclxuICAgICAgICAkKHRoaXMpLnNsaWNrKHtcclxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcclxuICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEyMDAsXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcclxuICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDkzMCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuc2xpY2soe1xyXG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgdmVydGljYWw6ZmFsc2UsXHJcbiAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBicmVha3BvaW50OiAxMjAwLFxyXG4gICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAkKHRoaXMpLmZpbmQoJy5zbGljay1wcmV2JykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzbGlkZXJzLm9uKCdiZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlKSB7XHJcbiAgICAgIHNldFNsaWRlckFycm93cygkKHRoaXMpLCBuZXh0U2xpZGUpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0U2xpZGVyQXJyb3dzIChzbGlkZXIsIG5leHRTbGlkZSkge1xyXG4gICAgY29uc3QgcHJldiA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stcHJldicpO1xyXG4gICAgY29uc3QgbmV4dCA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stbmV4dCcpO1xyXG4gICAgY29uc3Qgc2l6ZSA9ICQoc2xpZGVyKS5maW5kKCcuc2xpY2stc2xpZGUnKS5sZW5ndGg7XHJcbiAgICBjb25zdCB2aXNpYmxlID0gJChzbGlkZXIpLmZpbmQoJy5zbGljay1zbGlkZS5zbGljay1hY3RpdmUnKS5sZW5ndGg7XHJcbiAgICBjb25zdCBzbWFsbEFtb3VudCA9IHZpc2libGUgKyAxID09PSBzaXplO1xyXG4gICAgaWYgKG5leHRTbGlkZSA9PT0gMCkge1xyXG4gICAgICBwcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICBuZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICAgIGlmIChzbWFsbEFtb3VudCkge1xyXG4gICAgICBpZiAobmV4dFNsaWRlICsgdmlzaWJsZSA+PSBzaXplKSB7XHJcbiAgICAgICAgbmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBwcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChuZXh0U2xpZGUgKyB2aXNpYmxlID4gc2l6ZSAtIDEpIHtcclxuICAgICAgICBuZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHByZXYucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pO1xyXG4iXX0=
